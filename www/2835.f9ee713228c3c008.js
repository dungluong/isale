"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2835],{2835:(E,_,r)=>{r.r(_),r.d(_,{ChartModule:()=>q});var m=r(6895),g=r(4006),i=r(191),C=r(3306),y=r(529),v=r(3196),Z=r(5861),b=r(6841),D=r(3989),u=r(1914),t=r(6738),A=r(5851),F=r(4518),L=r(7488),J=r(323),f=r(4155);function I(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"ion-item",12),t.NdJ("click",function(){t.CHM(a);const s=t.oxw();return t.KtG(s.selectDateRangeForTrade())}),t.TgZ(1,"ion-label",13),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&e){const a=t.oxw();t.xp6(2),t.HOy(" ",t.lcZ(3,4,"common.filter"),": ",a.dateFormat(a.chart.dateFrom)," ",""!=a.chart.dateFrom?"-":""," ",a.dateFormat(a.chart.dateTo)," ")}}const T=function(e,o,a){return[e,o,"symbol","1.0-2",a]};function S(e,o){if(1&e&&(t.TgZ(0,"ion-text",18),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"currency"),t.qZA()),2&e){const a=t.oxw().$implicit,n=t.oxw(3);t.s9C("color",a.totalValue>=0?"secondary":"danger"),t.xp6(1),t.lnq(" ",t.lcZ(2,4,"common.total"),": ",a.totalValue>=0?"+":"","",t.G7q(3,6,t.kEZ(12,T,a.totalValue,n.currency,n.translateService.currentLang))," ")}}function U(e,o){if(1&e&&(t.TgZ(0,"ion-text",19),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"currency"),t.qZA()),2&e){const a=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"common.total"),": ",t.G7q(3,4,t.kEZ(10,T,a.totalValue,n.currency,n.translateService.currentLang))," ")}}function Y(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"chart.contact(s)"),"."))}function N(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"chart.category(s)"),"."))}function Q(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"chart.product(s)"),"."))}function M(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"report-detail.dates"),"."))}function R(e,o){if(1&e&&(t.TgZ(0,"ion-item")(1,"ion-label",13)(2,"p")(3,"span"),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"p",15),t.YNc(8,S,4,16,"ion-text",16),t.YNc(9,U,4,14,"ion-text",17),t._uU(10),t.YNc(11,Y,3,3,"span",11),t.YNc(12,N,3,3,"span",11),t.YNc(13,Q,3,3,"span",11),t.YNc(14,M,3,3,"span",11),t.qZA()()()),2&e){const a=o.$implicit,n=t.oxw(3);t.xp6(4),t.xDo(" ",a.dateType," (",t.lcZ(5,12,"common.from")," ",a.dateFrom," ",t.lcZ(6,14,"common.to")," ",a.dateTo,") "),t.xp6(4),t.Q6J("ngIf",!n.isDebtChart),t.xp6(1),t.Q6J("ngIf",n.isDebtChart),t.xp6(1),t.hij(" / ",a.totalItem,"\xa0 "),t.xp6(1),t.Q6J("ngIf",0==n.chart.dataType),t.xp6(1),t.Q6J("ngIf",1==n.chart.dataType),t.xp6(1),t.Q6J("ngIf",2==n.chart.dataType),t.xp6(1),t.Q6J("ngIf",3==n.chart.dataType)}}function O(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,R,15,16,"ion-item",14),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Q6J("ngForOf",a)}}function j(e,o){if(1&e&&(t.TgZ(0,"ion-list"),t.YNc(1,O,2,1,"div",14),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.data)}}function V(e,o){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"canvas",20),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("datasets",a.barChartData)("labels",a.barChartLabels)("options",a.barChartOptions)("legend",a.barChartLegend)("type",a.barChartType)}}const G=[{path:"detail",component:(()=>{class e{constructor(a,n,s,c,l,h){this.navCtrl=a,this.translateService=n,this.reportService=s,this.userService=c,this.modalCtrl=l,this.analyticsService=h,this.params=null,this.chart=new D.k,this.segment="chart",this.data=[],this.barChartOptions={scaleShowVerticalLines:!1,responsive:!0},this.barChartLabels=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartData=[],this.isChartReady=!1,this.isDebtChart=!1;const p=d=>{d.detail&&this.reload()};this.navCtrl.unsubscribe("reloadChart",p),this.navCtrl.subscribe("reloadChart",p)}ionViewWillEnter(){var a=this;return(0,Z.Z)(function*(){yield a.analyticsService.setCurrentScreen("chart-detail")})()}ngOnInit(){this.reload()}reload(){this.userService.getAttr("current-currency").then(n=>{this.currency=n}),this.isChartReady=!1;const a=this.params?this.params:this.navCtrl.getParams();if(this.params=a,a&&null!=a){this.chart=a.chart,this.data=a.data,this.isDebtChart=a.isDebtChart;const n={label:"",data:[]},s=[];for(const c of this.data){const l=c[0];s.push(l.dateType),n.data.push(l.totalValue)}this.barChartLabels=s,this.barChartData=[n],this.isChartReady=!0}}dateFormat(a){return u.C.toUiDateString(a)}selectDateRangeForTrade(){var a=this;return(0,Z.Z)(function*(){const n=yield a.modalCtrl.create({component:b.S,componentProps:{dateFromInput:a.chart.dateFrom,dateToInput:a.chart.dateTo}});yield n.present();const{data:s}=yield n.onDidDismiss();s&&(a.isChartReady=!1,a.chart.dateFrom=""!=s.dateFrom?u.C.toDbString(s.dateFrom,u.C.getDbFormat()):"",a.chart.dateTo=""!=s.dateTo?u.C.toDbString(s.dateTo,u.C.getDbFormat()):"",a.isDebtChart?a.reportService.calculateDebtChart(a.chart).then(c=>{a.data=c;const l={data:[]},h=[];for(const p of a.data){const d=p[0];h.push(d.dateType),l.data.push(d.totalValue)}a.barChartLabels=h,a.barChartData=[l],a.isChartReady=!0}):a.reportService.calculateChart(a.chart).then(c=>{a.data=c;const l={data:[]},h=[];for(const p of a.data){const d=p[0];h.push(d.dateType),l.data.push(d.totalValue)}a.barChartLabels=h,a.barChartData=[l],a.isChartReady=!0}))})()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(A.G),t.Y36(C.sK),t.Y36(F.r),t.Y36(L.K),t.Y36(i.IN),t.Y36(J.y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["chart-detail"]],decls:24,vars:15,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["color","primary",3,"click"],["name","funnel"],[3,"ngModel","ngModelChange"],["value","chart"],["name","star"],["value","data"],["name","time"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"ion-text-wrap"],[4,"ngFor","ngForOf"],[2,"padding-top","5px"],[3,"color",4,"ngIf"],["color","danger",4,"ngIf"],[3,"color"],["color","danger"],["baseChart","",3,"datasets","labels","options","legend","type"]],template:function(a,n){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",2)(8,"ion-button",3),t.NdJ("click",function(){return n.selectDateRangeForTrade()}),t._UZ(9,"ion-icon",4),t.qZA()()()(),t.TgZ(10,"ion-content")(11,"ion-segment",5),t.NdJ("ngModelChange",function(c){return n.segment=c}),t.TgZ(12,"ion-segment-button",6),t._UZ(13,"ion-icon",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"ion-segment-button",8),t._UZ(17,"ion-icon",9),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"ion-list"),t.YNc(21,I,4,6,"ion-item",10),t.qZA(),t.YNc(22,j,2,1,"ion-list",11),t.YNc(23,V,2,5,"div",11),t.qZA()),2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,9,"chart.title")),t.xp6(5),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("ngModel",n.segment),t.xp6(3),t.hij(" ",t.lcZ(15,11,"chart.chart")," "),t.xp6(4),t.hij(" ",t.lcZ(19,13,"chart.data")," "),t.xp6(3),t.Q6J("ngIf",""!=n.chart.dateFrom||""!=n.chart.dateTo),t.xp6(1),t.Q6J("ngIf","data"===n.segment),t.xp6(1),t.Q6J("ngIf","chart"==n.segment&&n.isChartReady))},dependencies:[m.sg,m.O5,g.JJ,g.On,i.oU,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.cJ,i.GO,i.yW,i.wd,i.sr,i.QI,i.cs,f.jh,m.H9,C.X$],encapsulation:2}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.Bz.forChild(G),v.Bz]}),e})();var H=r(2216),x=r(3093);let q=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:f.$g,useValue:{generateColors:!1}}],imports:[m.ez,g.u5,i.Pc,$,f.vQ,x.m,H.uH,C.aw.forChild({loader:{provide:C.Zw,useFactory:x.x,deps:[y.eN]}})]}),e})()}}]);