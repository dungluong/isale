"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7280],{8257:(M,b,u)=>{u.d(b,{r:()=>e});var _=u(6900);class e{constructor(m=0,h="",d="",C="",y=!1){this.id=0,this.code="",this.staffId=0,this.businessTypeId=0,this.salesLineId=0,this.avatarUrl="",this.fullName="",this.mobile="",this.isImportant=!1,this.gender="",this.email="",this.address="",this.dateOfBirth="",this.lastActive="",this.lastAction="",this.onlineId=0,this.staff=new _.O,this.businessType=null,this.salesLine=null,this.point=0,this.levelId=0,this.level=null,this.buyCount=0,this.fbUserId=null,this.source=null,this.id=m,this.avatarUrl=h,this.fullName=d,this.mobile=C,this.isImportant=y}}},6900:(M,b,u)=>{u.d(b,{O:()=>_});class _{constructor(t=0,m="",h="",d=""){this.hourLimit=1,this.storeId=0,this.store=null,this.isCollaborator=!1,this.shiftId=0,this.shift=null,this.blockViewingQuantity=!1,this.id=0,this.avatarUrl="",this.name="",this.userName="",this.shopName="",this.createdAt="",this.hasFullAccess=!1,this.canCreateOrder=!1,this.canUpdateDeleteOrder=!1,this.canCreateNewTransaction=!1,this.canUpdateDeleteTransaction=!1,this.canCreateUpdateNote=!1,this.canCreateUpdateDebt=!1,this.canUpdateDeleteProduct=!1,this.canViewProductCostPrice=!1,this.canUpdateProductCostPrice=!1,this.canViewAllContacts=!1,this.canManageContacts=!1,this.updateStatusExceptDone=!1,this.blockEditingOrderPrice=!1,this.id=t,this.avatarUrl=m,this.name=h,this.userName=d}}},6391:(M,b,u)=>{u.d(b,{A:()=>v});var _=u(6723),e=u(1914),t=u(6738),m=u(3306),h=u(6895),d=u(191);function C(i,l){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.you-borrowed")))}function y(i,l){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.borrowed-you")))}function Z(i,l){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.you-owned")))}function A(i,l){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.owned-you")))}function U(i,l){1&i&&(t.TgZ(0,"ion-text",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" - ",t.lcZ(2,1,"debt-detail.paid"),""))}function D(i,l){1&i&&(t.TgZ(0,"ion-text",5),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" - ",t.lcZ(2,1,"debt-detail.not-yet-paid"),""))}function p(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Oqu(a.debt.contact.fullName)}}function f(i,l){if(1&i&&(t.TgZ(0,"p",12)(1,"b"),t._uU(2),t.qZA()()),2&i){const a=t.oxw();t.xp6(2),t.Oqu(a.productName(a.debt.product.code,a.debt.product.title))}}function n(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"debt.buy")," ",a.debt.productCount," (",a.debt.product.unit,") ")}}function r(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"debt-add.created-at"),": ",a.dateFormat(a.debt.createdAt)," ")}}function s(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"debt-add.maturity-date"),": ",a.dateFormat(a.debt.maturityDate)," ")}}function c(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"debt-add.interest-rate"),": ",a.debt.interestRate,"% ")}}function x(i,l){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=t.oxw(2);t.xp6(1),t.hij(" - ",a.debt.store.name,"")}}function I(i,l){if(1&i&&(t.TgZ(0,"p")(1,"i",14),t._uU(2),t.ALo(3,"translate"),t.YNc(4,x,2,1,"span",2),t.qZA()()),2&i){const a=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,3,"store.created-by")," ",a.debt.staff.name,""),t.xp6(2),t.Q6J("ngIf",a.debt.store)}}function T(i,l){if(1&i&&(t.TgZ(0,"p")(1,"i",14),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const a=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"store.created-by"),": ",a.debt.store.name,"")}}function g(i,l){if(1&i&&(t.TgZ(0,"ion-avatar",15),t._UZ(1,"img",16),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("src",a.contactImageOrPlaceholder(a.debt.contact),t.LSH)}}function O(i,l){if(1&i&&(t.TgZ(0,"ion-avatar",15),t._UZ(1,"img",16),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("src",a.debt.product.avatarUrl,t.LSH)}}const E=function(i,l,a){return[i,l,"symbol","1.0-2",a]};let v=(()=>{class i{constructor(a){this.translateService=a,this.onPress=new t.vpe,this.onClick=new t.vpe,this.isStaff=!1}dateFormat(a){return e.C.toUiDateString(a)}productName(a,o){return _.W.productName(a,o)}contactImageOrPlaceholder(a){return _.W.contactImageOrPlaceholder(a.avatarUrl)}limitText(a,o=200){return _.W.limitText(a,o)}press(){this.onPress.emit()}click(){this.onClick.emit()}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(m.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["debt-item"]],inputs:{currency:"currency",showContact:"showContact",showProduct:"showProduct",debt:"debt",isStaff:"isStaff"},outputs:{onPress:"onPress",onClick:"onClick"},decls:44,vars:65,consts:[[3,"press","click"],[1,"ion-text-wrap"],[4,"ngIf"],["color","primary",4,"ngIf"],["color","danger",4,"ngIf"],["color","danger"],["color","secondary"],["color","warning"],[3,"hidden"],["color","primary"],["color","dark","slot","end"],["style","white-space: pre-wrap;",4,"ngIf"],[2,"white-space","pre-wrap"],["slot","end",4,"ngIf"],[2,"font-size","11px"],["slot","end"],[3,"src"]],template:function(a,o){1&a&&(t.TgZ(0,"ion-item",0),t.NdJ("press",function(){return o.press()})("click",function(){return o.click()}),t.TgZ(1,"ion-label",1),t._uU(2),t.YNc(3,C,3,3,"span",2),t.YNc(4,y,3,3,"span",2),t.YNc(5,Z,3,3,"span",2),t.YNc(6,A,3,3,"span",2),t.YNc(7,U,3,3,"ion-text",3),t.YNc(8,D,3,3,"ion-text",4),t._UZ(9,"br"),t._uU(10),t.ALo(11,"translate"),t.TgZ(12,"ion-text",5),t._uU(13),t.ALo(14,"currency"),t.qZA(),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"ion-text",6),t._uU(18),t.ALo(19,"currency"),t.qZA(),t._uU(20),t.ALo(21,"translate"),t.TgZ(22,"ion-text",7),t._uU(23),t.ALo(24,"currency"),t.qZA(),t._UZ(25,"br"),t.TgZ(26,"p",8)(27,"ion-text",9),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"ion-text",10),t._uU(31),t.qZA()(),t.YNc(32,p,3,1,"p",2),t.YNc(33,f,3,1,"p",11),t.YNc(34,n,3,5,"p",2),t.TgZ(35,"span",12),t._uU(36),t.qZA(),t.YNc(37,r,3,4,"p",2),t.YNc(38,s,3,4,"p",2),t.YNc(39,c,3,4,"p",2),t.YNc(40,I,5,5,"p",2),t.YNc(41,T,4,4,"p",2),t.qZA(),t.YNc(42,g,2,1,"ion-avatar",13),t.YNc(43,O,2,1,"ion-avatar",13),t.qZA()),2&a&&(t.xp6(2),t.hij(" ","#"+o.debt.id," - "),t.xp6(1),t.Q6J("ngIf",0===o.debt.debtType),t.xp6(1),t.Q6J("ngIf",1===o.debt.debtType),t.xp6(1),t.Q6J("ngIf",2===o.debt.debtType),t.xp6(1),t.Q6J("ngIf",3===o.debt.debtType),t.xp6(1),t.Q6J("ngIf",o.debt.isPaid),t.xp6(1),t.Q6J("ngIf",!o.debt.isPaid),t.xp6(2),t.hij(" ",t.lcZ(11,27,"debt.total-amount-left"),": "),t.xp6(3),t.Oqu(t.G7q(14,29,t.kEZ(53,E,o.debt.value-o.debt.valuePaid,o.currency,o.translateService.currentLang))),t.xp6(2),t.hij(" / ",t.lcZ(16,35,"debt-detail.paid"),": "),t.xp6(3),t.Oqu(t.G7q(19,37,t.kEZ(57,E,o.debt.valuePaid,o.currency,o.translateService.currentLang))),t.xp6(2),t.hij(" / ",t.lcZ(21,43,"common.total"),": "),t.xp6(3),t.Oqu(t.G7q(24,45,t.kEZ(61,E,o.debt.value,o.currency,o.translateService.currentLang))),t.xp6(3),t.Q6J("hidden",!o.debt.order||0==o.debt.order.id),t.xp6(2),t.Oqu(t.lcZ(29,51,"debt-add.order")),t.xp6(3),t.hij(" ",o.debt.order?"#"+o.debt.order.orderCode:""," "),t.xp6(1),t.Q6J("ngIf",o.debt.contactId&&0!=o.debt.contactId&&o.debt.contact&&o.showContact),t.xp6(1),t.Q6J("ngIf",o.debt.productId&&0!=o.debt.productId&&o.debt.product&&o.showProduct),t.xp6(1),t.Q6J("ngIf",o.debt.productId&&0!=o.debt.productId&&o.debt.product&&o.debt.isPurchase),t.xp6(2),t.Oqu(o.limitText(o.debt.note)),t.xp6(1),t.Q6J("ngIf",o.debt.createdAt),t.xp6(1),t.Q6J("ngIf",o.debt.maturityDate),t.xp6(1),t.Q6J("ngIf",o.debt.interestRate),t.xp6(1),t.Q6J("ngIf",o.debt.staffId&&0!=o.debt.staffId&&o.debt.staff&&!o.isStaff),t.xp6(1),t.Q6J("ngIf",!(o.debt.staffId&&0!=o.debt.staffId&&o.debt.staff&&!o.isStaff)&&o.debt.store),t.xp6(1),t.Q6J("ngIf",o.debt.contactId&&0!=o.debt.contactId&&o.debt.contact&&o.showContact),t.xp6(1),t.Q6J("ngIf",o.debt.productId&&0!=o.debt.productId&&o.debt.product&&o.debt.product.avatarUrl&&o.showProduct))},dependencies:[h.O5,d.BJ,d.Ie,d.Q$,d.yW,h.H9,m.X$],encapsulation:2}),i})()},7613:(M,b,u)=>{u.d(b,{F:()=>D});var _=u(5861),e=u(6738),t=u(6895),m=u(4006),h=u(191);const d=["template"],C=["input1"],y=["input2"];function Z(p,f){if(1&p){const n=e.EpF();e.TgZ(0,"ion-input",4,5),e.NdJ("ngModelChange",function(s){e.CHM(n);const c=e.oxw(2);return e.KtG(c.moneyValueString=s)})("ionBlur",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.ionBlur())})("ionFocus",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.ionFocus())})("keyup.enter",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.onEnter())}),e.qZA()}if(2&p){const n=e.oxw(2);e.Q6J("placeholder",n.placeholder)("disabled",n.disabled)("ngModel",n.moneyValueString)}}function A(p,f){if(1&p){const n=e.EpF();e.TgZ(0,"ion-input",6,7),e.NdJ("ngModelChange",function(s){e.CHM(n);const c=e.oxw(2);return e.KtG(c.moneyValueString=s)})("ionBlur",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.ionBlur())})("ionFocus",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.ionFocus())})("keyup.enter",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.onEnter())}),e.qZA()}if(2&p){const n=e.oxw(2);e.Q6J("disabled",n.disabled)("placeholder",n.placeholder)("ngModel",n.moneyValueString)}}function U(p,f){if(1&p){const n=e.EpF();e.YNc(0,Z,2,3,"ion-input",1),e.YNc(1,A,2,3,"ion-input",2),e.TgZ(2,"ion-input",3),e.NdJ("ngModelChange",function(s){e.CHM(n);const c=e.oxw();return e.KtG(c.moneyValue=s)})("ngModelChange",function(s){e.CHM(n);const c=e.oxw();return e.KtG(c.change(s))})("ionChange",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.change(s.moneyValue))}),e.qZA()}if(2&p){const n=e.oxw();e.Q6J("ngIf",n.clear),e.xp6(1),e.Q6J("ngIf",!n.clear),e.xp6(1),e.Q6J("hidden",!0)("ngModel",n.moneyValue)}}let D=(()=>{class p{constructor(n){this.viewContainerRef=n,this.moneyValueChange=new e.vpe,this.clear=!1,this.decimal=".",this.thousands=",",this.decimalCount=2,this.changing=!1}ngOnInit(){var n=this;return(0,_.Z)(function*(){n.thousands=n.thousandsSeparator(),n.decimal="."===n.thousands?",":".",setTimeout(()=>{n.moneyValueString=n.moneyValue?n.formatMoney(n.moneyValue):n.moneyValue},1e3),n.viewContainerRef.createEmbeddedView(n.template)})()}getMoneyValueStringToNumber(n){if(n){let r=n.split(this.decimal).join("");return r=r.split(this.thousands).join(this.thousandsSeparator()),+r}return n}change(n){this.moneyValue=n,n?(this.moneyValueString=this.formatMoney(n),this.oldValue=this.moneyValueString):(this.moneyValueString=n,this.oldValue=n)}ionFocus(){return(0,_.Z)(function*(){})()}ionBlur(){if(this.moneyValueString){let n=this.moneyValueString.split(this.decimal).join("");n=n.split(this.thousands).join(this.thousandsSeparator()),this.moneyValue=+n,this.moneyValueString!=this.oldValue&&(this.moneyValueChange.emit(+n),this.oldValue=this.moneyValueString)}else this.moneyValue=this.moneyValueString,this.moneyValueString!=this.oldValue&&(this.moneyValueChange.emit(this.moneyValueString),this.oldValue=this.moneyValueString);this.moneyValueString=this.formatMoney(this.moneyValue),setTimeout(()=>{this.changing=!1},300)}formatMoney(n){if(!n)return n;const r=this.decimalCount,c=this.decimal,x=this.thousands;try{const I="\\d(?=(\\d{3})+"+(r>0?"\\D":"$")+")",T=n.toFixed(Math.max(0,~~r));let g=(x?T.replace(".",x):T).replace(new RegExp(I,"g"),"$&"+(c||","));return g&&(g.indexOf(this.thousands+"00")&&(g=g.split(this.thousands+"00").join("")),g)}catch(I){console.error(I)}}thousandsSeparator(){return parseFloat(.55.toString()).toLocaleString().indexOf(",55")>=0?",":"."}select(n){this.moneyValueString=n,this.ionBlur()}onEnter(){var n=this;return(0,_.Z)(function*(){const r=n.input1?n.input1:n.input2;if(!r)return;const s=yield r.getInputElement();!s||s.blur()})()}}return p.\u0275fac=function(n){return new(n||p)(e.Y36(e.s_b))},p.\u0275cmp=e.Xpm({type:p,selectors:[["money-input"]],viewQuery:function(n,r){if(1&n&&(e.Gf(d,7),e.Gf(C,5),e.Gf(y,5)),2&n){let s;e.iGM(s=e.CRH())&&(r.template=s.first),e.iGM(s=e.CRH())&&(r.input1=s.first),e.iGM(s=e.CRH())&&(r.input2=s.first)}},inputs:{moneyValue:"moneyValue",placeholder:"placeholder",disabled:"disabled",clear:"clear"},outputs:{moneyValueChange:"moneyValueChange"},decls:2,vars:0,consts:[["template",""],["type","text","inputmode","numeric",3,"placeholder","disabled","ngModel","ngModelChange","ionBlur","ionFocus","keyup.enter",4,"ngIf"],["inputmode","numeric","style","background-color: #efefef; border-radius: 5px; color: #000; margin-bottom: 5px;","type","text",3,"disabled","placeholder","ngModel","ngModelChange","ionBlur","ionFocus","keyup.enter",4,"ngIf"],[3,"hidden","ngModel","ngModelChange","ionChange"],["type","text","inputmode","numeric",3,"placeholder","disabled","ngModel","ngModelChange","ionBlur","ionFocus","keyup.enter"],["input1",""],["inputmode","numeric","type","text",2,"background-color","#efefef","border-radius","5px","color","#000","margin-bottom","5px",3,"disabled","placeholder","ngModel","ngModelChange","ionBlur","ionFocus","keyup.enter"],["input2",""]],template:function(n,r){1&n&&e.YNc(0,U,3,4,"ng-template",null,0,e.W1O)},dependencies:[t.O5,m.JJ,m.On,h.pK,h.j9],encapsulation:2}),p})()}}]);