"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4803],{4803:(O,p,a)=>{a.r(p),a.d(p,{ChangePasswordModule:()=>b});var d=a(3306),v=a(6895),h=a(4006),r=a(191),w=a(2216),g=a(3196),c=a(5861),e=a(6738),f=a(5851),C=a(7488),y=a(8606),Z=a(323),S=a(667);const P=[{path:"",component:(()=>{class t{constructor(n,s,o,l,u,m,J){this.navCtrl=n,this.translateService=s,this.userService=o,this.apiService=l,this.alertCtrl=u,this.analyticsService=m,this.staffService=J,this.oldPassword="",this.password="",this.confirm=""}ionViewWillEnter(){var n=this;return(0,c.Z)(function*(){yield n.analyticsService.setCurrentScreen("change-password")})()}changePassword(){var n=this;return(0,c.Z)(function*(){if(!n.oldPassword||""==n.oldPassword.trim())return void(yield(yield n.alertCtrl.create({header:n.translateService.instant("common.alert"),subHeader:n.translateService.instant("change-password.alert-old-password-required"),buttons:["OK"]})).present());if(!n.password||""==n.password)return void(yield(yield n.alertCtrl.create({header:n.translateService.instant("common.alert"),subHeader:n.translateService.instant("change-password.alert-new-password-required"),buttons:["OK"]})).present());if(!n.confirm||""==n.confirm)return void(yield(yield n.alertCtrl.create({header:n.translateService.instant("common.alert"),subHeader:n.translateService.instant("change-password.alert-confirm-new-password-required"),buttons:["OK"]})).present());if(n.confirm!==n.password)return void(yield(yield n.alertCtrl.create({header:n.translateService.instant("common.alert"),subHeader:n.translateService.instant("change-password.alert-confirm-notmatch"),buttons:["OK"]})).present());const s=yield n.navCtrl.loading();n.apiService.changePassword(n.password,n.oldPassword).then(function(){var o=(0,c.Z)(function*(l){if(yield s.dismiss(),!l)return void(yield(yield n.alertCtrl.create({header:n.translateService.instant("common.alert"),subHeader:n.translateService.instant("change-password.change-password-not-successfully"),buttons:["OK"]})).present());n.analyticsService.logEvent("change-password-successfully");const u=yield n.alertCtrl.create({header:n.translateService.instant("common.alert"),subHeader:n.translateService.instant("change-password.change-password-successfully"),buttons:["OK"]});yield u.present(),yield u.onDidDismiss(),n.navCtrl.pop(),n.logout()});return function(l){return o.apply(this,arguments)}}())})()}logout(){var n=this;this.userService.removeRefreshToken().then((0,c.Z)(function*(){n.analyticsService.logEvent("logout-successfully"),n.userService.setLoggedUser(null),n.staffService.hasChooseStaff=!1,n.staffService.selectedStaff=null,n.userService.getRefreshToken().then(s=>{}),n.navCtrl.navigateRoot("/login")}))}validate(n){return this.validateEmail(n)||this.validatePhonenumber(n)}validateEmail(n){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n)}validatePhonenumber(n){return!!n.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.G),e.Y36(d.sK),e.Y36(C.K),e.Y36(y.s),e.Y36(r.Br),e.Y36(Z.y),e.Y36(S.x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["change-password"]],decls:33,vars:29,consts:[["slot","start"],["menu","first"],["color","primary",3,"click"],["name","home"],["position","stacked"],["clearInput","","type","password",3,"placeholder","ngModel","ngModelChange"],["padding",""],["color","primary","expand","block",3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button",1),e.TgZ(4,"ion-button",2),e.NdJ("click",function(){return s.navCtrl.home()}),e._UZ(5,"ion-icon",3),e.qZA()(),e.TgZ(6,"ion-title"),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"ion-content")(10,"ion-list")(11,"ion-item")(12,"ion-label",4),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"ion-input",5),e.NdJ("ngModelChange",function(l){return s.oldPassword=l}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label",4),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"ion-input",5),e.NdJ("ngModelChange",function(l){return s.password=l}),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"ion-item")(24,"ion-label",4),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"ion-input",5),e.NdJ("ngModelChange",function(l){return s.confirm=l}),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"div",6)(30,"ion-button",7),e.NdJ("click",function(){return s.changePassword()}),e._uU(31),e.ALo(32,"translate"),e.qZA()()()),2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,13,"change-password.title")),e.xp6(2),e.Akn(s.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(4),e.Oqu(e.lcZ(14,15,"change-password.old-password")),e.xp6(2),e.s9C("placeholder",e.lcZ(16,17,"change-password.enter-old-password")),e.Q6J("ngModel",s.oldPassword),e.xp6(4),e.Oqu(e.lcZ(20,19,"change-password.new-password")),e.xp6(2),e.s9C("placeholder",e.lcZ(22,21,"change-password.enter-new-password")),e.Q6J("ngModel",s.password),e.xp6(4),e.Oqu(e.lcZ(26,23,"change-password.confirm-new-password")),e.xp6(2),e.s9C("placeholder",e.lcZ(28,25,"change-password.confirm-new-password")),e.Q6J("ngModel",s.confirm),e.xp6(4),e.Oqu(e.lcZ(32,27,"change-password.change-password")))},dependencies:[h.JJ,h.On,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.fG,r.wd,r.sr,r.j9,d.X$],encapsulation:2}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(P),g.Bz]}),t})();var T=a(529),M=a(3093);let b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.ez,h.u5,r.Pc,A,w.uH,d.aw.forChild({loader:{provide:d.Zw,useFactory:M.x,deps:[T.eN]}})]}),t})()}}]);