"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6064],{6064:(D,_,l)=>{l.r(_),l.d(_,{LevelConfigModule:()=>d});var g=l(6895),r=l(4006),c=l(191),C=l(2216),t=l(529),v=l(3306),b=l(3093),y=l(3196),e=l(6738),L=l(2402);let T=(()=>{class o{constructor(){this.itemTemplateForLevelConfig={h2:{field:"title"},pList:[{short:"point"},{short:"buy-count"}]},this.searchFieldsForLevelConfig=["title"]}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["level-config"]],decls:1,vars:5,consts:[["table","level_config",3,"itemTemplate","searchFields","canEditItem","canDeleteItem","noDetail"]],template:function(n,a){1&n&&e._UZ(0,"list",0),2&n&&e.Q6J("itemTemplate",a.itemTemplateForLevelConfig)("searchFields",a.searchFieldsForLevelConfig)("canEditItem",!0)("canDeleteItem",!0)("noDetail",!0)},dependencies:[L.n],encapsulation:2}),o})();var p=l(5861),M=l(6723),Z=l(5851),O=l(7720),I=l(7488),E=l(323);const m=[{path:"",component:T},{path:"add",component:(()=>{class o{constructor(n,a,f,h,S){this.navCtrl=n,this.translateService=a,this.pointService=f,this.userService=h,this.analyticsService=S,this.params=null,this.config={buyCount:0},this.fromSearch=!1,this.saveDisabled=!1,this.onKeyPress=A=>{!A.target||"body"!==A.target.localName||("s"===A.key||"S"===A.key)&&this.save()}}ionViewDidEnter(){this.navCtrl.addEventListener("keyup",this.onKeyPress)}ionViewWillLeave(){this.navCtrl.removeEventListener("keyup",this.onKeyPress)}ionViewWillEnter(){var n=this;return(0,p.Z)(function*(){yield n.analyticsService.setCurrentScreen("level-add")})()}ngOnInit(){var n=this;return(0,p.Z)(function*(){n.currency=yield n.userService.getAttr("current-currency"),n.config={buyCount:0};let a=0;n.params=n.navCtrl.getParams(n.params),n.fromSearch=n.params&&n.params.fromSearch,n.params&&n.params.id&&(a=n.params.id),a&&a>0&&n.pointService.getLevelConfig(a).then(f=>{n.config=f})})()}validate(){return this.config.title?!!this.config.point||(alert(this.translateService.instant("point-add.no-level-point")),!1):(alert(this.translateService.instant("point-add.no-level-title")),!1)}save(){var n=this;return(0,p.Z)(function*(){if(!n.validate())return;n.saveDisabled=!0;const a=yield n.navCtrl.loading();n.pointService.saveLevelConfig(n.config).then((0,p.Z)(function*(){n.analyticsService.logEvent("level-config-save-successfully"),n.saveDisabled=!1,yield a.dismiss(),n.exitPage()})).catch((0,p.Z)(function*(){n.saveDisabled=!1,yield a.dismiss()}))})()}dismiss(){var n=this;return(0,p.Z)(function*(){n.fromSearch?yield n.navCtrl.pop():yield n.navCtrl.popOnly()})()}exitPage(){var n=this;return(0,p.Z)(function*(){n.fromSearch?yield n.navCtrl.pop():yield n.navCtrl.popOnly(),n.navCtrl.publish("reloadLevelConfigList",null),n.navCtrl.publish("reloadPointConfigList",null),n.navCtrl.publish("reloadPointConfig",n.config)})()}isNotCordova(){return this.navCtrl.isNotCordova()}contactImageOrPlaceholder(n){return M.W.contactImageOrPlaceholder(n.iconUrl)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(Z.G),e.Y36(v.sK),e.Y36(O.H),e.Y36(I.K),e.Y36(E.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["level-config-add"]],decls:34,vars:29,consts:[["slot","start"],["ion-button","",3,"click"],["name","close"],["slot","end"],["color","primary",3,"click"],["name","checkmark"],["position","stacked","color","primary"],["clearInput","","type","text",3,"ngModel","placeholder","ngModelChange"],["clearInput","","type","number",3,"ngModel","placeholder","ngModelChange"],["clearInput","","type","number",3,"ngModel","ngModelChange"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return a.dismiss()}),e._UZ(4,"ion-icon",2),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"ion-title"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ion-buttons",3)(11,"ion-button",4),e.NdJ("click",function(){return a.save()}),e._UZ(12,"ion-icon",5),e._uU(13),e.ALo(14,"translate"),e.qZA()()()(),e.TgZ(15,"ion-content")(16,"ion-list")(17,"ion-item")(18,"ion-label",6),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"ion-input",7),e.NdJ("ngModelChange",function(h){return a.config.title=h}),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"ion-item")(24,"ion-label",6),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"ion-input",8),e.NdJ("ngModelChange",function(h){return a.config.point=h}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"ion-item")(30,"ion-label",6),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"ion-input",9),e.NdJ("ngModelChange",function(h){return a.config.buyCount=h}),e.qZA()()()()),2&n&&(e.xp6(5),e.hij(" \xa0",e.lcZ(6,13,"common.cancel")," "),e.xp6(3),e.Oqu(e.lcZ(9,15,"point-add.title-level")),e.xp6(5),e.hij(" \xa0",e.lcZ(14,17,"action.save")," "),e.xp6(2),e.Akn(a.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(4),e.hij(" ",e.lcZ(20,19,"point-add.level-title")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(22,21,"point-add.enter-level-title")),e.Q6J("ngModel",a.config.title),e.xp6(4),e.Oqu(e.lcZ(26,23,"point-add.level-point")),e.xp6(2),e.s9C("placeholder",e.lcZ(28,25,"point-add.enter-level-point")),e.Q6J("ngModel",a.config.point),e.xp6(4),e.Oqu(e.lcZ(32,27,"point-add.level-buy-count")),e.xp6(2),e.Q6J("ngModel",a.config.buyCount))},dependencies:[r.JJ,r.On,c.YG,c.Sm,c.W2,c.Gu,c.gu,c.pK,c.Ie,c.Q$,c.q_,c.wd,c.sr,c.as,c.j9,v.X$],encapsulation:2}),o})()}];let i=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(m),y.Bz]}),o})(),d=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,r.u5,c.Pc,i,C.uH,b.m,v.aw.forChild({loader:{provide:v.Zw,useFactory:b.x,deps:[t.eN]}})]}),o})()},2402:(D,_,l)=>{l.d(_,{n:()=>E});var g=l(5861),r=l(191),c=l(9854),C=l(971),t=l(6738),v=l(5851),b=l(667),y=l(323),e=l(6895),L=l(3306);const T=["template"];function p(s,m){1&s&&t._UZ(0,"ion-back-button",11)}function M(s,m){if(1&s){const i=t.EpF();t.TgZ(0,"ion-button",12),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.dismiss())}),t._UZ(1,"ion-icon",13),t.qZA()}}function Z(s,m){1&s&&t._UZ(0,"ion-menu-button",14)}function O(s,m){if(1&s){const i=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.navCtrl.home())}),t._UZ(1,"ion-icon",15),t.qZA()}}function I(s,m){if(1&s){const i=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),t.YNc(3,p,1,0,"ion-back-button",2),t.YNc(4,M,2,0,"ion-button",3),t.YNc(5,Z,1,0,"ion-menu-button",4),t.YNc(6,O,2,0,"ion-button",5),t.qZA(),t.TgZ(7,"ion-title"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"ion-buttons",6)(11,"ion-button",7),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.openAdd())}),t._UZ(12,"ion-icon",8),t.qZA()()()(),t.TgZ(13,"ion-content")(14,"div",9,10),t.NdJ("scrollToTop",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.scrollToTop())}),t.qZA()()}if(2&s){const i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.backOnly&&!i.searchMode),t.xp6(1),t.Q6J("ngIf",i.searchMode),t.xp6(1),t.Q6J("ngIf",!i.searchMode&&!i.backOnly),t.xp6(1),t.Q6J("ngIf",!i.searchMode&&!i.backOnly),t.xp6(2),t.Oqu(t.lcZ(9,25,i.tableKebab+".title")),t.xp6(4),t.Q6J("name",i.iconAdd),t.xp6(1),t.Akn(i.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("presentItemActions",i.presentItemActions)("orderBy",i.orderBy)("table",i.table)("iconAdd",i.iconAdd)("isQuickAdd",i.isQuickAdd)("callable",i.callable)("segmentValues",i.segmentValues)("itemTemplate",i.itemTemplate)("searchFields",i.searchFields)("defaultSegmentValue",i.defaultSegmentValue)("canEditItem",i.canEditItem)("filterObjects",i.filterObjects)("actions",i.actions)("canDeleteItem",i.canDeleteItem)("noDetail",i.noDetail)("deleteRelated",i.deleteRelated)("fetchObjectsFunc",i.fetchObjectsFunc)}}let E=(()=>{class s{constructor(i,d,o,u,n){this.navCtrl=i,this.staffService=d,this.viewContainerRef=o,this.analyticsService=u,this.viewCtrl=n,this.presentItemActions={},this.table="",this.orderBy="",this.orderOrient="asc",this.iconAdd="add",this.isQuickAdd=!1,this.callable=!1,this.segmentValues=[],this.itemTemplate={},this.searchFields=[],this.defaultSegmentValue="",this.canEditItem=!1,this.filterObjects={},this.actions=[],this.canDeleteItem=!1,this.noDetail=!1,this.backOnly=!1,this.tableKebab="",this.searchMode=!1}ionViewWillEnter(){var i=this;return(0,g.Z)(function*(){yield i.analyticsService.setCurrentScreen(i.table)})()}ngOnInit(){this.tableKebab=(0,c.ST)(this.table),this.params=this.navCtrl.getParams(this.params),this.params&&this.params.searchMode&&(this.searchMode=this.params.searchMode),this.params&&this.params.callback&&(this.callback=this.params.callback),this.viewContainerRef.createEmbeddedView(this.template)}openAdd(){this.navCtrl.navigateForward("/"+this.tableKebab+"/"+(this.isQuickAdd?"quick-add":"add"),{fromSearch:this.searchMode})}scrollToTop(){this.content.scrollToTop()}dismiss(){var i=this;return(0,g.Z)(function*(){if(i.callback)return i.callback(null),void(yield i.navCtrl.back());i.viewCtrl.dismiss()})()}callReload(){var i=this;return(0,g.Z)(function*(){yield i.listOnlyComponent.reloadObjects()})()}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(v.G),t.Y36(b.x),t.Y36(t.s_b),t.Y36(y.y),t.Y36(r.IN))},s.\u0275cmp=t.Xpm({type:s,selectors:[["list"],["","list",""]],viewQuery:function(i,d){if(1&i&&(t.Gf(T,7),t.Gf(r.W2,5),t.Gf(C.s,5)),2&i){let o;t.iGM(o=t.CRH())&&(d.template=o.first),t.iGM(o=t.CRH())&&(d.content=o.first),t.iGM(o=t.CRH())&&(d.listOnlyComponent=o.first)}},inputs:{presentItemActions:"presentItemActions",table:"table",orderBy:"orderBy",orderOrient:"orderOrient",iconAdd:"iconAdd",isQuickAdd:"isQuickAdd",callable:"callable",segmentValues:"segmentValues",itemTemplate:"itemTemplate",searchFields:"searchFields",defaultSegmentValue:"defaultSegmentValue",canEditItem:"canEditItem",filterObjects:"filterObjects",actions:"actions",canDeleteItem:"canDeleteItem",noDetail:"noDetail",deleteRelated:"deleteRelated",backOnly:"backOnly",fetchObjectsFunc:"fetchObjectsFunc"},decls:2,vars:0,consts:[["template",""],["slot","start"],["defaultHref","/home",4,"ngIf"],[3,"click",4,"ngIf"],["menu","first",4,"ngIf"],["color","primary",3,"click",4,"ngIf"],["slot","end"],["color","primary",3,"click"],[3,"name"],["list-only","",3,"presentItemActions","orderBy","table","iconAdd","isQuickAdd","callable","segmentValues","itemTemplate","searchFields","defaultSegmentValue","canEditItem","filterObjects","actions","canDeleteItem","noDetail","deleteRelated","fetchObjectsFunc","scrollToTop"],["listOnlyComponent",""],["defaultHref","/home"],[3,"click"],["name","close"],["menu","first"],["name","home"]],template:function(i,d){1&i&&t.YNc(0,I,16,27,"ng-template",null,0,t.W1O)},dependencies:[e.O5,r.oU,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.fG,r.wd,r.sr,r.cs,C.s,L.X$],encapsulation:2}),s})()}}]);