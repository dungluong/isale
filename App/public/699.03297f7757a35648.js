"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[699],{8257:(D,b,c)=>{c.d(b,{r:()=>p});var r=c(6900);class p{constructor(g=0,S="",v="",M="",d=!1){this.id=0,this.code="",this.staffId=0,this.businessTypeId=0,this.salesLineId=0,this.avatarUrl="",this.fullName="",this.mobile="",this.isImportant=!1,this.gender="",this.email="",this.address="",this.dateOfBirth="",this.lastActive="",this.lastAction="",this.onlineId=0,this.staff=new r.O,this.businessType=null,this.salesLine=null,this.point=0,this.levelId=0,this.level=null,this.buyCount=0,this.fbUserId=null,this.source=null,this.id=g,this.avatarUrl=S,this.fullName=v,this.mobile=M,this.isImportant=d}}},6900:(D,b,c)=>{c.d(b,{O:()=>r});class r{constructor(a=0,g="",S="",v=""){this.hourLimit=1,this.storeId=0,this.store=null,this.isCollaborator=!1,this.shiftId=0,this.shift=null,this.blockViewingQuantity=!1,this.id=0,this.avatarUrl="",this.name="",this.userName="",this.shopName="",this.createdAt="",this.hasFullAccess=!1,this.canCreateOrder=!1,this.canUpdateDeleteOrder=!1,this.canCreateNewTransaction=!1,this.canUpdateDeleteTransaction=!1,this.canCreateUpdateNote=!1,this.canCreateUpdateDebt=!1,this.canUpdateDeleteProduct=!1,this.canViewProductCostPrice=!1,this.canUpdateProductCostPrice=!1,this.canViewAllContacts=!1,this.canManageContacts=!1,this.updateStatusExceptDone=!1,this.blockEditingOrderPrice=!1,this.id=a,this.avatarUrl=g,this.name=S,this.userName=v}}},699:(D,b,c)=>{c.r(b),c.d(b,{CalendarModule:()=>Ze});var r=c(6895),p=c(4006),a=c(191),g=c(3306),S=c(529),v=c(3093),M=c(3196),d=c(5861),f=c(5439),h=c(1914),_=c(6723),A=c(6026),C=c(8257),e=c(6738),u=c(5851),x=c(8837),Z=c(323),L=c(6961),j=c(9645),P=c(3876),Y=c(667),K=c(7696),q=c(360),Q=c(8851);function B(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-text",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSearchContact())}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.contactSelected.fullName," ")}}function G(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-text",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSearchContact())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"calendar-add.select-contact")," "))}function F(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeContact())}),e._UZ(1,"ion-icon",36),e.qZA()}}function H(o,s){if(1&o&&(e.TgZ(0,"ion-select-option",18),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t<10?"0"+t:t," ")}}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"date-picker",37),e.NdJ("dateChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.calendar.day=i)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("date",t.calendar.day)}}function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-text",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showDatePopup())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"common.select-date")," "))}function R(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-button",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeDate())}),e._UZ(1,"ion-icon",40),e.qZA()}}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-text",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSearchProduct())}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.productName(t.productSelected.code,t.productSelected.title)," ")}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-text",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSearchProduct())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"calendar-add.select-product")," "))}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeProduct())}),e._UZ(1,"ion-icon",36),e.qZA()}}const ee=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]};let te=(()=>{class o{constructor(t,n,i,l,T,k,J,U,E,m,O){this.navCtrl=t,this.calendarService=n,this.analyticsService=i,this.platform=l,this.productService=T,this.translateService=k,this.barcodeScanner=J,this.modalCtrl=U,this.storeService=E,this.staffService=m,this.contactService=O,this.params=null,this.calendar={},this.onKeyPress=y=>{!y.target||"body"!==y.target.localName||("s"===y.key||"S"===y.key)&&this.save()},this.doEnteredBarcode=y=>{!y||this.productService.searchByBarcode(y).then(I=>{I&&(this.productSelected=I,this.calendar.productId=I.id)})}}ionViewDidEnter(){this.navCtrl.addEventListener("keyup",this.onKeyPress)}ionViewWillLeave(){this.navCtrl.removeEventListener("keyup",this.onKeyPress)}ionViewWillEnter(){var t=this;return(0,d.Z)(function*(){yield t.analyticsService.setCurrentScreen("calendar-add")})()}ngOnInit(){this.calendar={status:0};let t=0;const n=this.params?this.params:this.navCtrl.getParams();this.params=n,n&&n.id&&(t=n.id),t&&t>0&&this.calendarService.getCalendar(t).then(i=>{this.calendar=i,this.productSelected=this.calendar.product,this.contactSelected=this.calendar.contact})}scan(){var t=this;return(0,d.Z)(function*(){if(t.navCtrl.isNotCordova()){const n=yield t.modalCtrl.create({component:A.k});yield n.present();const{data:i}=yield n.onDidDismiss();i&&i.barcode&&(t.analyticsService.logEvent("calendar-add-scanned-web"),t.doEnteredBarcode(i.barcode))}else t.barcodeScanner.scan().then(n=>{!n||!n.text||t.doEnteredBarcode(n.text)})})()}validate(){return this.calendar.fullname?this.calendar.email||this.calendar.phone?this.calendar.hour?!!this.calendar.day||(alert(this.translateService.instant("calendar-add.missing-day")),!1):(alert(this.translateService.instant("calendar-add.missing-hour")),!1):(alert(this.translateService.instant("calendar-add.missing-email-phone")),!1):(alert(this.translateService.instant("calendar-add.missing-fullname")),!1)}save(){var t=this;return(0,d.Z)(function*(){if(!t.validate())return;if(t.staffService.isStaff()&&(t.calendar.staffId=t.staffService.selectedStaff.id),!t.contactSelected&&t.calendar&&t.calendar.fullname&&(t.calendar.phone||t.calendar.email)){t.analyticsService.logEvent("calendar-add-new-contact");const i=new C.r;i.fullName=t.calendar.fullname,i.mobile=t.calendar.phone,i.staffId=t.calendar.staffId,i.email=t.calendar.email;const l=yield t.contactService.saveContact(i);t.contactSelected=i,t.calendar.contactId=l}const n=yield t.storeService.getCurrentStore();t.calendar.storeId=n?n.id:0,t.calendarService.saveCalendar(t.calendar).then((0,d.Z)(function*(){t.contactSelected&&(yield t.saveLastActive()),t.analyticsService.logEvent("calendar-add-save-success"),t.exitPage()}))})()}saveLastActive(){return this.contactSelected.lastActive=h.C.toDbString(),this.contactSelected.lastAction="calendar",this.contactService.saveContact(this.contactSelected).then(n=>(this.navCtrl.publish("reloadContactList"),this.navCtrl.publish("reloadContact",this.contactSelected),this.navCtrl.publish("reloadContactCalendar",this.contactSelected.id),n))}exitPage(){var t=this;return(0,d.Z)(function*(){yield t.navCtrl.popOnly(),t.navCtrl.publish("reloadCalendarList",null),t.navCtrl.publish("reloadCalendar",t.calendar)})()}showSearchProduct(){var t=this;return(0,d.Z)(function*(){t.navCtrl.push("/product",{callback:i=>{const l=i;l&&(t.productSelected=l,t.calendar.productId=l.id)},searchMode:!0})})()}removeProduct(){this.productSelected=null,this.calendar.productId=0}showDatePopup(){this.calendar.day=f().startOf("day").format("YYYY-MM-DD")}dateFormat(t){return h.C.toUiLocalDateString(t)}removeDate(){this.calendar.day=""}productName(t,n){return _.W.productName(t,n)}showSearchContact(){var t=this;return(0,d.Z)(function*(){t.navCtrl.push("/contact",{callback:i=>{const l=i;l&&(t.contactSelected=l,t.calendar.contactId=l.id,t.calendar.fullname=t.contactSelected.fullName,t.calendar.phone=t.contactSelected.mobile,t.calendar.email=t.contactSelected.email)},searchMode:!0})})()}removeContact(){this.contactSelected=null,this.calendar.contactId=0,this.calendar.fullname="",this.calendar.phone="",this.calendar.email=""}dateChanged(){this.calendar.day=this.toUtcTime(this.dateSelected)}toUtcTime(t){const n=f(t).format("DD"),i=f(t).format("MM"),l=f(t).format("YYYY");return f.utc(l+"-"+i+"-"+n,"YYYY-MM-DD").toDate()}changePhone(){var t=this;return(0,d.Z)(function*(){if(t.contactSelected||!t.calendar.phone)return;const n=yield t.contactService.searchContactByPhone(t.calendar.phone);if(n){const i=t.translateService.instant("order-add.found-phone",{contact:n.fullName,mobile:n.mobile});confirm(i)&&(t.contactSelected=n,t.calendar.contactId=n.id,t.calendar.fullname=n?n.fullName:null,t.calendar.phone=n?n.mobile:null,t.calendar.email=n?n.email:null)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.G),e.Y36(x.o),e.Y36(Z.y),e.Y36(a.t4),e.Y36(L.M),e.Y36(g.sK),e.Y36(j.m),e.Y36(a.IN),e.Y36(P.d),e.Y36(Y.x),e.Y36(K.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["calendar-add"]],decls:114,vars:95,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["color","primary",3,"click"],["name","checkmark"],[2,"margin","0","padding","0"],[2,"border-bottom","1px solid #ccc"],["lines","none",2,"min-height","0 !important","--min-height","0 !important","padding-top","10px","padding-bottom","5px"],["color","primary",2,"margin","0 !important"],["lines","none"],["color","dark",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["fill","clear",3,"click",4,"ngIf"],[2,"border-bottom","1px solid #ccc","border-right","1px solid #ccc"],["lines","none",2,"padding","0","margin","0"],["position","stacked","color","primary"],["clearInput","","type","text",3,"placeholder","ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value"],["size","6",2,"border-bottom","1px solid #ccc","border-right","1px solid #ccc"],["clearInput","","type","tel",3,"placeholder","ngModel","ngModelChange"],["size","6",2,"border-bottom","1px solid #ccc"],["clearInput","","type","email",3,"placeholder","ngModel","ngModelChange"],["size-sm","12","size-xs","12","size-md","6","size-lg","6",2,"border-bottom","1px solid #ccc","border-right","1px solid #ccc"],["value",""],[3,"value",4,"ngFor","ngForOf"],["size-sm","12","size-xs","12","size-md","6","size-lg","6",2,"border-bottom","1px solid #ccc"],["color","primary"],["pickerId","calendarPicker","min","2020-01-01","max","2022-12-31","slot","end",3,"date","dateChange",4,"ngIf"],["slot","end",3,"click",4,"ngIf"],["ion-button","","fill","clear","slot","end",3,"click",4,"ngIf"],["fill","clear",3,"click"],["name","barcode"],[1,"ion-padding",2,"padding-top","0 !important"],["color","dark",3,"click"],[3,"click"],["name","close","slot","icon-only"],["pickerId","calendarPicker","min","2020-01-01","max","2022-12-31","slot","end",3,"date","dateChange"],["slot","end",3,"click"],["ion-button","","fill","clear","slot","end",3,"click"],["slot","icon-only","name","close"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",3),e.NdJ("click",function(){return n.save()}),e._UZ(9,"ion-icon",4),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"ion-content")(13,"ion-grid",5)(14,"ion-row")(15,"ion-col",6)(16,"ion-item",7)(17,"ion-label",8),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"ion-item",9),e.YNc(21,B,2,1,"ion-text",10),e.YNc(22,G,3,3,"ion-text",11),e.TgZ(23,"ion-buttons",2),e.YNc(24,F,2,0,"ion-button",12),e.qZA()()()(),e.TgZ(25,"ion-row")(26,"ion-col",13)(27,"ion-item",14)(28,"ion-label",15),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"ion-input",16),e.NdJ("ngModelChange",function(l){return n.calendar.fullname=l}),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"ion-col",13)(34,"ion-item",9)(35,"ion-label",15),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"ion-select",17),e.NdJ("ngModelChange",function(l){return n.calendar.status=l}),e.TgZ(39,"ion-select-option",18),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"ion-select-option",18),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"ion-select-option",18),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"ion-select-option",18),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"ion-select-option",18),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"ion-select-option",18),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"ion-select-option",18),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"ion-select-option",18),e._uU(61),e.ALo(62,"translate"),e.qZA()()()()(),e.TgZ(63,"ion-row")(64,"ion-col",19)(65,"ion-item",9)(66,"ion-label",15),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"ion-input",20),e.NdJ("ngModelChange",function(l){return n.calendar.phone=l})("ngModelChange",function(){return n.changePhone()}),e.ALo(70,"translate"),e.qZA()()(),e.TgZ(71,"ion-col",21)(72,"ion-item",9)(73,"ion-label",15),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"ion-input",22),e.NdJ("ngModelChange",function(l){return n.calendar.email=l}),e.ALo(77,"translate"),e.qZA()()()(),e.TgZ(78,"ion-row")(79,"ion-col",23)(80,"ion-item",9)(81,"ion-label",15),e._uU(82),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"ion-select",17),e.NdJ("ngModelChange",function(l){return n.calendar.hour=l}),e.TgZ(85,"ion-select-option",24),e._uU(86),e.ALo(87,"translate"),e.qZA(),e.YNc(88,H,2,2,"ion-select-option",25),e.qZA()()(),e.TgZ(89,"ion-col",26)(90,"ion-item",9)(91,"ion-text",27),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.YNc(94,W,1,1,"date-picker",28),e.YNc(95,z,3,3,"ion-text",29),e.YNc(96,R,2,0,"ion-button",30),e.qZA()()(),e.TgZ(97,"ion-row")(98,"ion-col",6)(99,"ion-item",7)(100,"ion-label",8),e._uU(101),e.ALo(102,"translate"),e.qZA()(),e.TgZ(103,"ion-item",9),e.YNc(104,$,2,1,"ion-text",10),e.YNc(105,X,3,3,"ion-text",11),e.TgZ(106,"ion-buttons",2),e.YNc(107,V,2,0,"ion-button",12),e.TgZ(108,"ion-button",31),e.NdJ("click",function(){return n.scan()}),e._UZ(109,"ion-icon",32),e._uU(110),e.ALo(111,"translate"),e.qZA()()()()()(),e.TgZ(112,"div",33),e._UZ(113,"support"),e.qZA()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,48,"calendar-add.title")),e.xp6(5),e.hij(" \xa0",e.lcZ(11,50,"action.save")," "),e.xp6(2),e.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(6),e.Oqu(e.lcZ(19,52,"calendar-add.contact")),e.xp6(3),e.Q6J("ngIf",n.contactSelected&&n.contactSelected.id>0),e.xp6(1),e.Q6J("ngIf",!n.contactSelected||0===n.contactSelected.id),e.xp6(2),e.Q6J("ngIf",n.contactSelected&&n.contactSelected.id>0),e.xp6(5),e.Oqu(e.lcZ(30,54,"calendar-add.fullname")),e.xp6(2),e.s9C("placeholder",e.lcZ(32,56,"calendar-add.enter-name")),e.Q6J("ngModel",n.calendar.fullname),e.xp6(5),e.hij("",e.lcZ(37,58,"order-detail.status")," "),e.xp6(2),e.Q6J("ngModel",n.calendar.status),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.hij("",e.lcZ(41,60,"order-detail.status-draft")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.hij("",e.lcZ(44,62,"order-detail.status-inprogress")," "),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij("",e.lcZ(47,64,"order-detail.status-shipping")," "),e.xp6(2),e.Q6J("value",3),e.xp6(1),e.hij("",e.lcZ(50,66,"order-detail.status-done")," "),e.xp6(2),e.Q6J("value",4),e.xp6(1),e.hij("",e.lcZ(53,68,"order-detail.status-cancel")," "),e.xp6(2),e.Q6J("value",5),e.xp6(1),e.hij("",e.lcZ(56,70,"order-detail.status-has-debt")," "),e.xp6(2),e.Q6J("value",6),e.xp6(1),e.hij("",e.lcZ(59,72,"order-detail.status-shipping-has-debt")," "),e.xp6(2),e.Q6J("value",7),e.xp6(1),e.hij("",e.lcZ(62,74,"order-detail.status-deposit")," "),e.xp6(6),e.Oqu(e.lcZ(68,76,"calendar-add.phone")),e.xp6(2),e.s9C("placeholder",e.lcZ(70,78,"calendar-add.enter-phone")),e.Q6J("ngModel",n.calendar.phone),e.xp6(5),e.Oqu(e.lcZ(75,80,"calendar-add.email")),e.xp6(2),e.s9C("placeholder",e.lcZ(77,82,"calendar-add.enter-email")),e.Q6J("ngModel",n.calendar.email),e.xp6(6),e.Oqu(e.lcZ(83,84,"calendar-add.hour")),e.xp6(2),e.Q6J("ngModel",n.calendar.hour),e.xp6(2),e.Oqu(e.lcZ(87,86,"calendar-add.select-hour")),e.xp6(2),e.Q6J("ngForOf",e.DdM(94,ee)),e.xp6(4),e.Oqu(e.lcZ(93,88,"calendar-add.day")),e.xp6(2),e.Q6J("ngIf",n.calendar.day),e.xp6(1),e.Q6J("ngIf",!n.calendar.day),e.xp6(1),e.Q6J("ngIf",n.calendar.day),e.xp6(5),e.Oqu(e.lcZ(102,90,"calendar-add.product")),e.xp6(3),e.Q6J("ngIf",n.productSelected&&n.productSelected.id>0),e.xp6(1),e.Q6J("ngIf",!n.productSelected||0===n.productSelected.id),e.xp6(2),e.Q6J("ngIf",n.productSelected&&n.productSelected.id>0),e.xp6(3),e.hij(" ",e.lcZ(111,92,"product.scan-barcode")," "))},dependencies:[r.sg,r.O5,p.JJ,p.On,a.oU,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.Nd,a.t9,a.n0,a.yW,a.wd,a.sr,a.QI,a.j9,a.cs,q.Y,Q.L,g.X$],encapsulation:2}),o})();var w=c(7488);function ne(o,s){if(1&o&&(e.TgZ(0,"ion-text",27),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.calendar.phone)}}function ae(o,s){if(1&o&&(e.TgZ(0,"ion-text",27),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.calendar.email)}}function oe(o,s){if(1&o&&(e.TgZ(0,"ion-text",28),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.dateFormat(t.calendar.day)," ")}}function ie(o,s){1&o&&(e.TgZ(0,"ion-text",2),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"calendar-detail.no-product")," "))}function re(o,s){if(1&o&&(e.TgZ(0,"ion-text",2),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.productName(t.calendar.product.code,t.calendar.product.title)," ")}}function le(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-grid",7)(1,"ion-row")(2,"ion-col")(3,"ion-item",8)(4,"ion-label"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()(),e.TgZ(7,"ion-row")(8,"ion-col",9)(9,"ion-item",8)(10,"ion-label",10),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"ion-input",11),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.calendar.fullname=i)}),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"ion-col",9)(16,"ion-item",12)(17,"ion-label",10),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"ion-select",13),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.calendar.status=i)}),e.TgZ(21,"ion-select-option",14),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"ion-select-option",14),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"ion-select-option",14),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"ion-select-option",14),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"ion-select-option",14),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"ion-select-option",14),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"ion-select-option",14),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"ion-select-option",14),e._uU(43),e.ALo(44,"translate"),e.qZA()()()()(),e.TgZ(45,"ion-row")(46,"ion-col",15)(47,"ion-item",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.callPhone(i.calendar.phone))}),e.TgZ(48,"ion-label",10),e._UZ(49,"ion-icon",17),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.YNc(52,ne,2,1,"ion-text",18),e.qZA()(),e.TgZ(53,"ion-col",19)(54,"ion-item",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sendEmail(i.calendar.email))}),e.TgZ(55,"ion-label",10),e._UZ(56,"ion-icon",20),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.YNc(59,ae,2,1,"ion-text",18),e.qZA()()(),e.TgZ(60,"ion-row")(61,"ion-col",21)(62,"ion-item",12)(63,"ion-label",10),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"ion-text"),e._uU(67),e.qZA()()(),e.TgZ(68,"ion-col",22)(69,"ion-item",12)(70,"ion-text",23),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.YNc(73,oe,2,1,"ion-text",24),e.qZA()()(),e.TgZ(74,"ion-row")(75,"ion-col",25)(76,"ion-item",12)(77,"ion-text",23),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.YNc(80,ie,3,3,"ion-text",26),e.YNc(81,re,2,1,"ion-text",26),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.AsE(" ",e.lcZ(6,35,"calendar-detail.code"),": #",t.calendar.id," "),e.xp6(6),e.Oqu(e.lcZ(12,37,"calendar-add.fullname")),e.xp6(2),e.s9C("placeholder",e.lcZ(14,39,"calendar-add.enter-name")),e.Q6J("ngModel",t.calendar.fullname),e.xp6(5),e.hij("",e.lcZ(19,41,"order-detail.status")," "),e.xp6(2),e.Q6J("disabled",!0)("ngModel",t.calendar.status),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.hij("",e.lcZ(23,43,"order-detail.status-draft")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.hij("",e.lcZ(26,45,"order-detail.status-inprogress")," "),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij("",e.lcZ(29,47,"order-detail.status-shipping")," "),e.xp6(2),e.Q6J("value",3),e.xp6(1),e.hij("",e.lcZ(32,49,"order-detail.status-done")," "),e.xp6(2),e.Q6J("value",4),e.xp6(1),e.hij("",e.lcZ(35,51,"order-detail.status-cancel")," "),e.xp6(2),e.Q6J("value",5),e.xp6(1),e.hij("",e.lcZ(38,53,"order-detail.status-has-debt")," "),e.xp6(2),e.Q6J("value",6),e.xp6(1),e.hij("",e.lcZ(41,55,"order-detail.status-shipping-has-debt")," "),e.xp6(2),e.Q6J("value",7),e.xp6(1),e.hij("",e.lcZ(44,57,"order-detail.status-deposit")," "),e.xp6(7),e.hij(" ",e.lcZ(51,59,"calendar-add.phone"),""),e.xp6(2),e.Q6J("ngIf",t.calendar.phone),e.xp6(5),e.hij(" ",e.lcZ(58,61,"calendar-add.email"),""),e.xp6(2),e.Q6J("ngIf",t.calendar.email),e.xp6(5),e.Oqu(e.lcZ(65,63,"calendar-add.hour")),e.xp6(3),e.hij("",t.calendar.hour<10?"0"+t.calendar.hour:t.calendar.hour,"H"),e.xp6(4),e.Oqu(e.lcZ(72,65,"calendar-add.day")),e.xp6(2),e.Q6J("ngIf",t.calendar.day),e.xp6(5),e.Oqu(e.lcZ(79,67,"calendar-add.product")),e.xp6(2),e.Q6J("ngIf",0==t.calendar.productId),e.xp6(1),e.Q6J("ngIf",t.calendar.productId>0&&t.calendar.product)}}let ce=(()=>{class o{constructor(t,n,i,l,T,k,J){this.navCtrl=t,this.translateService=n,this.userService=i,this.calendarService=l,this.actionSheetCtrl=T,this.alertCtrl=k,this.analyticsService=J,this.params=null;const U=E=>{this.calendar&&E.detail.id===this.calendar.id&&this.reload()};this.navCtrl.unsubscribe("reloadCalendar",U),this.navCtrl.subscribe("reloadCalendar",U)}ionViewWillEnter(){var t=this;return(0,d.Z)(function*(){yield t.analyticsService.setCurrentScreen("calendar-detail")})()}ngOnInit(){this.reload()}reload(){var t=this;return(0,d.Z)(function*(){const n=yield t.navCtrl.loading();if(t.currency=yield t.userService.getAttr("current-currency"),t.params=t.navCtrl.getParams(t.params),t.params&&t.params.id&&t.params.id>0){const i=t.params.id;t.calendar=yield t.calendarService.getCalendar(i)}yield n.dismiss()})()}edit(){this.navCtrl.push("/calendar/add",{id:this.calendar.id})}presentActionSheet(){var t=this;return(0,d.Z)(function*(){yield(yield t.actionSheetCtrl.create({header:t.translateService.instant("action.action"),buttons:[{text:t.translateService.instant("calendar.delete"),role:"destructive",handler:()=>{t.deleteCalendar()}},{text:t.translateService.instant("common.cancel"),role:"cancel",handler:()=>{}}]})).present()})()}deleteCalendar(){var t=this;return(0,d.Z)(function*(){(yield t.alertCtrl.create({header:t.translateService.instant("common.confirm"),message:t.translateService.instant("calendar.delete-alert"),buttons:[{text:t.translateService.instant("common.cancel"),handler:()=>{}},{text:t.translateService.instant("common.agree"),handler:()=>{t.calendarService.deleteCalendar(t.calendar).then((0,d.Z)(function*(){t.analyticsService.logEvent("calendar-detail-delete-success"),t.navCtrl.publish("reloadCalendarList",null),t.navCtrl.pop()}))}}]})).present()})()}selectCalendar(t){this.navCtrl.push("/calendar/detail",{id:t})}dateFormat(t){return h.C.toUiLocalDateString(t)}productName(t,n){return _.W.productName(t,n)}callPhone(t){!t||_.W.callPhone(t)}sendEmail(t){!t||_.W.sendEmail(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.G),e.Y36(g.sK),e.Y36(w.K),e.Y36(x.o),e.Y36(a.BX),e.Y36(a.Br),e.Y36(Z.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["calendar-detail"]],decls:14,vars:6,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["color","primary",3,"click"],["name","create"],["name","ellipsis-vertical"],["style","margin: 0; padding: 0;",4,"ngIf"],[2,"margin","0","padding","0"],["lines","none",2,"padding","0","margin","0"],[2,"border-bottom","1px solid #ccc","border-right","1px solid #ccc"],["position","stacked","color","primary"],["clearInput","","type","text","readonly","",3,"placeholder","ngModel","ngModelChange"],["lines","none"],["readonly","",3,"disabled","ngModel","ngModelChange"],[3,"value"],["size","6",2,"border-bottom","1px solid #ccc","border-right","1px solid #ccc"],["lines","none",1,"ion-text-wrap",3,"click"],["name","call"],["color","secondary","style","cursor: pointer;",4,"ngIf"],["size","6",2,"border-bottom","1px solid #ccc"],["name","mail"],["size-sm","12","size-xs","12","size-md","6","size-lg","6",2,"border-bottom","1px solid #ccc","border-right","1px solid #ccc"],["size-sm","12","size-xs","12","size-md","6","size-lg","6",2,"border-bottom","1px solid #ccc"],["color","primary"],["color","dark","slot","end",4,"ngIf"],[2,"border-bottom","1px solid #ccc"],["slot","end",4,"ngIf"],["color","secondary",2,"cursor","pointer"],["color","dark","slot","end"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",3),e.NdJ("click",function(){return n.edit()}),e._UZ(9,"ion-icon",4),e.qZA(),e.TgZ(10,"ion-button",3),e.NdJ("click",function(){return n.presentActionSheet()}),e._UZ(11,"ion-icon",5),e.qZA()()()(),e.TgZ(12,"ion-content"),e.YNc(13,le,82,69,"ion-grid",6),e.qZA()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,4,"calendar-detail.title")),e.xp6(7),e.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(1),e.Q6J("ngIf",n.calendar))},dependencies:[r.O5,p.JJ,p.On,a.oU,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.Nd,a.t9,a.n0,a.yW,a.wd,a.sr,a.QI,a.j9,a.cs,g.X$],encapsulation:2}),o})();var se=c(7489);function de(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item",16)(1,"ion-label",17),e._uU(2),e.qZA(),e.TgZ(3,"ion-buttons")(4,"ion-button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.exitStore())}),e._UZ(5,"ion-icon",19),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.checkStore),e.xp6(4),e.hij(" ",e.lcZ(7,2,"store.exit-store")," ")}}function pe(o,s){if(1&o&&(e.TgZ(0,"p",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"calendar-add.product"),": ",n.productName(t.product.code,t.product.title)," ")}}function ue(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.callPhone(i.phone))}),e._UZ(1,"ion-icon",33),e.TgZ(2,"ion-label",34),e._uU(3),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.Udp("background-color","#f4f5f8"),e.xp6(3),e.hij(" ",t.phone," ")}}function _e(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.sendEmail(i.email))}),e._UZ(1,"ion-icon",36),e.TgZ(2,"ion-label",34),e._uU(3),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.Udp("background-color","#f4f5f8"),e.xp6(3),e.hij(" ",t.email," ")}}function me(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",24)(1,"ion-list",25),e.NdJ("press",function(){const l=e.CHM(t).$implicit,T=e.oxw(2);return e.KtG(T.presentActionSheet(l))}),e.TgZ(2,"ion-item",26),e.NdJ("click",function(){const l=e.CHM(t).$implicit,T=e.oxw(2);return e.KtG(T.selectCalendar(l.id))}),e.TgZ(3,"ion-label",17)(4,"ion-text",27),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,pe,3,4,"p",28),e.qZA()(),e.YNc(8,ue,4,3,"ion-item",29),e.YNc(9,_e,4,3,"ion-item",30),e.qZA()()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Udp("background-color","#f4f5f8"),e.xp6(4),e.HOy(" #",t.id," - ",t.hour<10?"0"+t.hour:t.hour,"H - ",e.lcZ(6,9,"calendar.customer"),": ",n.limitText(t.fullname)," "),e.xp6(2),e.Q6J("ngIf",t.product),e.xp6(1),e.Q6J("ngIf",t.phone),e.xp6(1),e.Q6J("ngIf",t.email)}}function he(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"ion-item",20)(2,"ion-label",21),e._UZ(3,"ion-icon",22),e.TgZ(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-grid")(7,"ion-row"),e.YNc(8,me,10,11,"ion-col",23),e.qZA()(),e.BQk()),2&o){const t=s.$implicit,n=e.oxw();e.xp6(5),e.hij(" ",t," "),e.xp6(3),e.Q6J("ngForOf",n.calendarsGroupDate[t])}}function ge(o,s){1&o&&(e.TgZ(0,"ion-item",37),e._UZ(1,"div",38),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,"calendar.no-calendar"),e.oJD))}const fe=[{path:"",component:(()=>{class o{constructor(t,n,i,l,T,k,J,U,E){var m=this;this.calendarService=t,this.translateService=n,this.staffService=i,this.storeService=l,this.navCtrl=T,this.actionSheetCtrl=k,this.alertCtrl=J,this.analyticsService=U,this.userService=E,this.calendarsGroupDate={},this.searchKey="",this.reload=(0,d.Z)(function*(){const O=yield m.navCtrl.loading();m.currency=yield m.userService.getAttr("current-currency"),m.store=yield m.storeService.getCurrentStore();let y=yield m.calendarService.getCalendars(m.store?m.store.id:0);y=m.sortByDayAndHour(y),yield O.dismiss(),m.originalCalendars=JSON.parse(JSON.stringify(y)),m.calendars=y,m.calendarsGroupDate={},m.checkStore=m.store?m.translateService.instant("store.check-store",{shop:m.store.name}):null,m.selectedStaff=m.staffService.selectedStaff;for(const I of y){const N=I.dayOnly;m.calendarsGroupDate[N]||(m.calendarsGroupDate[N]=[]),m.calendarsGroupDate[N].push(I)}m.days=Object.keys(m.calendarsGroupDate)}),this.navCtrl.unsubscribe("reloadCalendarList",this.reload),this.navCtrl.subscribe("reloadCalendarList",this.reload)}ionViewWillEnter(){var t=this;return(0,d.Z)(function*(){yield t.analyticsService.setCurrentScreen("calendar")})()}ngOnInit(){this.reload()}dateFormat(t){return f(t,h.C.getDateDbFormat()).format(h.C.getUiDateFormat())}openCalendarAdd(){this.navCtrl.push("/calendar/add",null)}search(){var t=this;return(0,d.Z)(function*(){t.analyticsService.logEvent("calendar-search");let n=JSON.parse(JSON.stringify(t.originalCalendars));if(null!==t.searchKey&&""!==t.searchKey){const i=t.searchKey.toLowerCase();n=n.filter(l=>l.fullname&&-1!==l.fullname.toLowerCase().indexOf(i)||l.email&&-1!==l.email.toLowerCase().indexOf(i)||l.phone&&-1!==l.phone.toLowerCase().indexOf(i))}n=t.sortByDayAndHour(n),t.calendarsGroupDate={};for(const i of n){const l=i.dayOnly;t.calendarsGroupDate[l]||(t.calendarsGroupDate[l]=[]),t.calendarsGroupDate[l].push(i)}t.days=Object.keys(t.calendarsGroupDate),t.calendars=n})()}clearSearch(){this.searchKey=null,this.reload()}sortByDayAndHour(t){if(t){for(const i of t)i.dayOnly=h.C.toUiLocalDateString(i.day);return se.orderBy(t,["day","hour"],["asc","asc"])}return null}limitText(t,n=200){return _.W.limitText(t,n)}selectCalendar(t){this.navCtrl.push("/calendar/detail",{id:t})}deleteCalendar(t){var n=this;return(0,d.Z)(function*(){yield(yield n.alertCtrl.create({header:n.translateService.instant("common.confirm"),message:n.translateService.instant("calendar.delete-alert"),buttons:[{text:n.translateService.instant("common.agree"),handler:()=>{n.calendarService.deleteCalendar(t).then((0,d.Z)(function*(){n.analyticsService.logEvent("calendar-delete-success");let l=n.calendars.findIndex(T=>T.id==t.id);l>=0&&n.calendars.splice(l,1),l=n.originalCalendars.findIndex(T=>T.id==t.id),l>=0&&n.originalCalendars.splice(l,1)}))}},{text:n.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}presentActionSheet(t){var n=this;return(0,d.Z)(function*(){yield(yield n.actionSheetCtrl.create({header:n.translateService.instant("action.action"),buttons:[{text:n.translateService.instant("calendar.delete"),role:"destructive",handler:()=>{n.deleteCalendar(t)}},{text:n.translateService.instant("calendar.view-detail"),handler:()=>{n.selectCalendar(t.id)}},{text:n.translateService.instant("common.cancel"),role:"cancel",handler:()=>{}}]})).present()})()}goHelpPage(t){this.navCtrl.push("/help/"+t)}productName(t,n){return _.W.productName(t,n)}callPhone(t){!t||_.W.callPhone(t)}sendEmail(t){!t||_.W.sendEmail(t)}exitStore(){var t=this;return(0,d.Z)(function*(){var i;yield(yield t.alertCtrl.create({header:t.translateService.instant("common.confirm"),message:t.translateService.instant("store.exit-store-alert",{shop:t.store.name}),buttons:[{text:t.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(){yield t.storeService.exitStore(),yield t.reload()}),function(){return i.apply(this,arguments)})},{text:t.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.o),e.Y36(g.sK),e.Y36(Y.x),e.Y36(P.d),e.Y36(u.G),e.Y36(a.BX),e.Y36(a.Br),e.Y36(Z.y),e.Y36(w.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["calendar"]],decls:26,vars:15,consts:[["slot","start"],["menu","first"],["color","primary",3,"click"],["name","home"],["slot","end"],[3,"click"],["name","refresh"],[3,"hidden","click"],["name","add-circle"],["lines","none","color","success",4,"ngIf"],["debounce","700",3,"placeholder","ngModel","ionClear","ionChange","ngModelChange"],[4,"ngFor","ngForOf"],["class","ion-text-wrap","lines","none",4,"ngIf"],[1,"ion-padding",2,"padding-top","0 !important"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add"],["lines","none","color","success"],[1,"ion-text-wrap"],["size","small",3,"click"],["name","exit","slot","start","size","small"],["lines","none"],["color","dark"],["name","calendar","slot","start","color","dark","size","small"],["size-xs","12","size-sm","12","size-md","4","size-lg","4",4,"ngFor","ngForOf"],["size-xs","12","size-sm","12","size-md","4","size-lg","4"],["color","light",2,"border-radius","10px","border-width","1px !important","border-color","#000 !important","height","100%",3,"press"],["color","light","lines","full","detail","",3,"click"],["color","primary",2,"font-size","1.2em"],["style","margin-top: 5px;",4,"ngIf"],["lines","none","color","light","style","min-height: 0 !important; --min-height: 0 !important; padding-top: 10px; padding-bottom: 5px;",3,"backgroundColor","click",4,"ngIf"],["lines","none","color","light","style","min-height: 0 !important; --min-height: 0 !important; padding-top: 5px; padding-bottom: 10px;",3,"backgroundColor","click",4,"ngIf"],[2,"margin-top","5px"],["lines","none","color","light",2,"min-height","0 !important","--min-height","0 !important","padding-top","10px","padding-bottom","5px",3,"click"],["name","call","slot","start","color","medium","size","small",2,"margin","0 10px 0 0 !important"],[1,"ion-text-wrap",2,"margin","0 !important"],["lines","none","color","light",2,"min-height","0 !important","--min-height","0 !important","padding-top","5px","padding-bottom","10px",3,"click"],["name","mail","slot","start","color","medium","size","small",2,"margin","0 10px 0 0 !important"],["lines","none",1,"ion-text-wrap"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button",1),e.TgZ(4,"ion-button",2),e.NdJ("click",function(){return n.navCtrl.home()}),e._UZ(5,"ion-icon",3),e.qZA()(),e.TgZ(6,"ion-title"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"ion-buttons",4)(10,"ion-button",5),e.NdJ("click",function(){return n.reload()}),e._UZ(11,"ion-icon",6),e.qZA(),e.TgZ(12,"ion-button",7),e.NdJ("click",function(){return n.openCalendarAdd()}),e._UZ(13,"ion-icon",8),e.qZA()()(),e.YNc(14,de,8,4,"ion-item",9),e.TgZ(15,"ion-searchbar",10),e.NdJ("ionClear",function(){return n.clearSearch()})("ionChange",function(){return n.search()})("ngModelChange",function(l){return n.searchKey=l}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"ion-content"),e.YNc(18,he,9,2,"ng-container",11),e.YNc(19,ge,3,3,"ion-item",12),e.TgZ(20,"div",13),e._UZ(21,"support"),e.qZA(),e.TgZ(22,"ion-fab",14)(23,"ion-fab-button",5),e.NdJ("click",function(){return n.openCalendarAdd()}),e._UZ(24,"ion-icon",15),e.qZA(),e._uU(25,"\xa0 "),e.qZA()()),2&t&&(e.xp6(7),e.Oqu(e.lcZ(8,11,"calendar.title")),e.xp6(5),e.Q6J("hidden",n.staffService.isStaff()),e.xp6(2),e.Q6J("ngIf",n.checkStore&&(null==n.selectedStaff||n.selectedStaff.hasFullAccess&&!n.selectedStaff.storeId)),e.xp6(1),e.s9C("placeholder",e.lcZ(16,13,"calendar.search")),e.Q6J("ngModel",n.searchKey),e.xp6(2),e.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(1),e.Q6J("ngForOf",n.days),e.xp6(1),e.Q6J("ngIf",!n.originalCalendars||0===n.originalCalendars.length),e.xp6(3),e.Akn(n.navCtrl.hasAds()?"margin-bottom: 60px":""))},dependencies:[r.sg,r.O5,p.JJ,p.On,a.YG,a.Sm,a.wI,a.W2,a.IJ,a.W4,a.jY,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.fG,a.Nd,a.VI,a.yW,a.wd,a.sr,a.j9,q.Y,g.X$],encapsulation:2}),o})()},{path:"add",component:te},{path:"detail",component:ce}];let Ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[M.Bz.forChild(fe),M.Bz]}),o})(),Ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[r.ez,p.u5,a.Pc,Ce,v.m,g.aw.forChild({loader:{provide:g.Zw,useFactory:v.x,deps:[S.eN]}})]}),o})()},6026:(D,b,c)=>{c.d(b,{k:()=>M});var r=c(6738),p=c(191),a=c(6961),g=c(4006),S=c(3306);const v=["barcodeInput"];let M=(()=>{class d{constructor(h,_){this.viewCtrl=h,this.productService=_}ngOnInit(){this.barcodeFocus()}ionViewLoaded(){this.barcodeFocus()}barcodeFocus(){setTimeout(()=>{this.barcodeInput.setFocus()},600)}barcodeChanged(){!this.barcode||this.barcode.length<5||this.productService.searchByBarcode(this.barcode).then(h=>{!h||this.ok()})}dismiss(){this.viewCtrl.dismiss()}ok(){this.viewCtrl.dismiss({barcode:this.barcode})}}return d.\u0275fac=function(h){return new(h||d)(r.Y36(p.IN),r.Y36(a.M))},d.\u0275cmp=r.Xpm({type:d,selectors:[["barcode-input"]],viewQuery:function(h,_){if(1&h&&r.Gf(v,7),2&h){let A;r.iGM(A=r.CRH())&&(_.barcodeInput=A.first)}},decls:22,vars:13,consts:[["slot","start"],[3,"click"],["name","close"],[1,"ion-padding"],["clearInput","","autofocus","true","type","text",3,"placeholder","ngModel","ngModelChange"],["barcodeInput",""],["color","primary","expand","block",3,"click"],["color","secondary","expand","block",3,"click"]],template:function(h,_){1&h&&(r.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),r.NdJ("click",function(){return _.dismiss()}),r._UZ(4,"ion-icon",2),r.qZA()(),r.TgZ(5,"ion-title"),r._uU(6),r.ALo(7,"translate"),r.qZA()()(),r.TgZ(8,"ion-content",3)(9,"ion-input",4,5),r.NdJ("ngModelChange",function(C){return _.barcode=C})("ngModelChange",function(){return _.barcodeChanged()}),r.ALo(11,"translate"),r.qZA(),r.TgZ(12,"ion-grid")(13,"ion-row")(14,"ion-col")(15,"ion-button",6),r.NdJ("click",function(){return _.ok()}),r._uU(16),r.ALo(17,"translate"),r.qZA()(),r.TgZ(18,"ion-col")(19,"ion-button",7),r.NdJ("click",function(){return _.dismiss()}),r._uU(20),r.ALo(21,"translate"),r.qZA()()()()()),2&h&&(r.xp6(6),r.hij(" ",r.lcZ(7,5,"order-add.enter-barcode")," "),r.xp6(3),r.s9C("placeholder",r.lcZ(11,7,"order-add.enter-barcode-placeholder")),r.Q6J("ngModel",_.barcode),r.xp6(7),r.Oqu(r.lcZ(17,9,"common.agree")),r.xp6(4),r.hij("",r.lcZ(21,11,"common.cancel")," "))},dependencies:[g.JJ,g.On,p.YG,p.Sm,p.wI,p.W2,p.jY,p.Gu,p.gu,p.pK,p.Nd,p.wd,p.sr,p.j9,S.X$],encapsulation:2}),d})()},8851:(D,b,c)=>{c.d(b,{L:()=>M});var r=c(6738),p=c(5439),g=c(1914),S=c(4006),v=c(191);let M=(()=>{class d{constructor(){this.min=null,this.max=null,this.pickerId=null,this.date="",this.type="date",this.dateChange=new r.vpe}ionViewWillEnter(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?p(this.date.split(":00Z").join("")).format(g.C.getDateTimeDbFormat()):p(this.date.split(":00Z").join("")).format(g.C.getDateDbFormat()):this.date,this.min||(this.min="1900-01-01"),this.max||(this.max="2100-01-01")}ngOnInit(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?p(this.date.split(":00Z").join("")).format(g.C.getDateTimeDbFormat()):p(this.date.split(":00Z").join("")).format(g.C.getDateDbFormat()):this.date,this.min||(this.min="1900-01-01"),this.max||(this.max="2100-01-01")}change(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?p(this.date.split(":00Z").join("")).format(g.C.getDateTimeDbFormat()):p(this.date.split(":00Z").join("")).format(g.C.getDateDbFormat()):this.date,this.dateChange.emit(this.date)}}return d.\u0275fac=function(h){return new(h||d)},d.\u0275cmp=r.Xpm({type:d,selectors:[["date-picker"]],inputs:{min:"min",max:"max",pickerId:"pickerId",date:"date",type:"type"},outputs:{dateChange:"dateChange"},decls:1,vars:4,consts:[["color","primary",1,"ion-button",2,"font-size","0.8em",3,"type","ngModel","min","max","ngModelChange","ionChange"]],template:function(h,_){1&h&&(r.TgZ(0,"ion-input",0),r.NdJ("ngModelChange",function(C){return _.date=C})("ionChange",function(){return _.change()}),r.qZA()),2&h&&r.Q6J("type",_.type)("ngModel",_.date)("min",_.min)("max",_.max)},dependencies:[S.JJ,S.On,v.pK,v.j9],encapsulation:2}),d})()},360:(D,b,c)=>{c.d(b,{Y:()=>A});var r=c(5861),p=c(6723),a=c(6738),g=c(5851),S=c(323),v=c(7852),M=c(3306),d=c(6895),f=c(191);function h(C,e){if(1&C){const u=a.EpF();a.TgZ(0,"ion-button",13),a.NdJ("click",function(){a.CHM(u);const Z=a.oxw(2);return a.KtG(Z.hideSupport())}),a._UZ(1,"ion-icon",14),a.qZA()}}function _(C,e){if(1&C){const u=a.EpF();a.TgZ(0,"div",1)(1,"ion-item",2),a.NdJ("click",function(){a.CHM(u);const Z=a.oxw();return a.KtG(Z.callPhone("+84869366606"))}),a.TgZ(2,"ion-label",3)(3,"h2")(4,"strong"),a._uU(5),a.ALo(6,"translate"),a.qZA()()(),a.YNc(7,h,2,0,"ion-button",4),a.qZA(),a.TgZ(8,"p")(9,"i"),a._uU(10),a.ALo(11,"translate"),a.qZA()(),a.TgZ(12,"ion-button",5),a.NdJ("click",function(){a.CHM(u);const Z=a.oxw();return a.KtG(Z.sendTicket())}),a._UZ(13,"ion-icon",6),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.TgZ(16,"ion-grid")(17,"ion-row")(18,"ion-col",7)(19,"ion-item",8),a.NdJ("click",function(){a.CHM(u);const Z=a.oxw();return a.KtG(Z.callPhone("+84869366606"))}),a._UZ(20,"ion-icon",9),a.TgZ(21,"ion-label",10),a._uU(22),a.ALo(23,"translate"),a.qZA()()(),a.TgZ(24,"ion-col",7)(25,"ion-item",8),a.NdJ("click",function(){a.CHM(u);const Z=a.oxw();return a.KtG(Z.sendEmail("dlv.isale.app@gmail.com"))}),a._UZ(26,"ion-icon",11),a.TgZ(27,"ion-label",12),a._uU(28),a.ALo(29,"translate"),a.qZA()()()()()()}if(2&C){const u=a.oxw();a.xp6(5),a.hij("",a.lcZ(6,6,"common.contact"),":"),a.xp6(2),a.Q6J("ngIf",!u.neverHide),a.xp6(3),a.Oqu(a.lcZ(11,8,"ticket-add.send-ticket-note")),a.xp6(4),a.hij("\xa0 ",a.lcZ(15,10,"ticket-add.title")," "),a.xp6(8),a.hij(" ",a.lcZ(23,12,"common.hotline"),": (+84) 0383.838.394 "),a.xp6(6),a.hij(" ",a.lcZ(29,14,"common.email"),": dlv.isale.app@gmail.com ")}}let A=(()=>{class C{constructor(u,x,Z,L){this.navCtrl=u,this.analyticsService=x,this.storage=Z,this.translate=L,this.neverHide=!1,this.isHide=!1}ngOnInit(){var u=this;return(0,r.Z)(function*(){u.isHide=!!(yield u.storage.get("hide-support"))})()}callPhone(u){!u||(this.analyticsService.logEvent("support-call-hotline"),p.W.callPhone(u))}sendEmail(u){!u||(this.analyticsService.logEvent("support-email"),p.W.sendEmail(u))}sendTicket(){this.navCtrl.push("/ticket/add",null)}hideSupport(){var u=this;return(0,r.Z)(function*(){u.analyticsService.logEvent("support-hide"),u.isHide=!0,alert(u.translate.instant("support.alert")),yield u.storage.set("hide-support","1")})()}}return C.\u0275fac=function(u){return new(u||C)(a.Y36(g.G),a.Y36(S.y),a.Y36(v.V),a.Y36(M.sK))},C.\u0275cmp=a.Xpm({type:C,selectors:[["support"]],inputs:{neverHide:"neverHide"},decls:1,vars:1,consts:[["style","padding: 5px; border: 1px solid #D3679D; border-radius: 10px; margin-top: 10px;",4,"ngIf"],[2,"padding","5px","border","1px solid #D3679D","border-radius","10px","margin-top","10px"],["lines","none",1,"ion-no-padding",2,"padding-top","10px !important","min-height","0 !important","--min-height","0 !important",3,"click"],[2,"margin","0 !important","padding","0 !important"],["slot","end","size","small","fill","clear",3,"click",4,"ngIf"],["color","danger",3,"click"],["name","mail"],[2,"padding","0 !important","margin","0 !important"],[1,"ion-no-padding",2,"padding-top","0px !important","cursor","pointer",3,"click"],["name","call","slot","start","color","tertiary"],[1,"ion-text-wrap"],["name","mail","slot","start","color","danger"],["color","danger",1,"ion-text-wrap"],["slot","end","size","small","fill","clear",3,"click"],["name","close","slot","icon-only"]],template:function(u,x){1&u&&a.YNc(0,_,30,16,"div",0),2&u&&a.Q6J("ngIf",!x.isHide||x.neverHide)},dependencies:[d.O5,f.YG,f.wI,f.jY,f.gu,f.Ie,f.Q$,f.Nd,M.X$],encapsulation:2}),C})()}}]);