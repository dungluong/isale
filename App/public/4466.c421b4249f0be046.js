"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4466],{8851:(L,b,a)=>{a.d(b,{L:()=>A});var h=a(6738),o=a(5439),m=a(1914),e=a(4006),y=a(191);let A=(()=>{class g{constructor(){this.min=null,this.max=null,this.pickerId=null,this.date="",this.type="date",this.dateChange=new h.vpe}ionViewWillEnter(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?o(this.date.split(":00Z").join("")).format(m.C.getDateTimeDbFormat()):o(this.date.split(":00Z").join("")).format(m.C.getDateDbFormat()):this.date,this.min||(this.min="1900-01-01"),this.max||(this.max="2100-01-01")}ngOnInit(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?o(this.date.split(":00Z").join("")).format(m.C.getDateTimeDbFormat()):o(this.date.split(":00Z").join("")).format(m.C.getDateDbFormat()):this.date,this.min||(this.min="1900-01-01"),this.max||(this.max="2100-01-01")}change(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?o(this.date.split(":00Z").join("")).format(m.C.getDateTimeDbFormat()):o(this.date.split(":00Z").join("")).format(m.C.getDateDbFormat()):this.date,this.dateChange.emit(this.date)}}return g.\u0275fac=function(T){return new(T||g)},g.\u0275cmp=h.Xpm({type:g,selectors:[["date-picker"]],inputs:{min:"min",max:"max",pickerId:"pickerId",date:"date",type:"type"},outputs:{dateChange:"dateChange"},decls:1,vars:4,consts:[["color","primary",1,"ion-button",2,"font-size","0.8em",3,"type","ngModel","min","max","ngModelChange","ionChange"]],template:function(T,t){1&T&&(h.TgZ(0,"ion-input",0),h.NdJ("ngModelChange",function(E){return t.date=E})("ionChange",function(){return t.change()}),h.qZA()),2&T&&h.Q6J("type",t.type)("ngModel",t.date)("min",t.min)("max",t.max)},dependencies:[e.JJ,e.On,y.pK,y.j9],encapsulation:2}),g})()},2402:(L,b,a)=>{a.d(b,{n:()=>I});var h=a(5861),o=a(191),r=a(9854),m=a(971),e=a(6738),y=a(5851),A=a(667),g=a(323),p=a(6895),T=a(3306);const t=["template"];function O(c,C){1&c&&e._UZ(0,"ion-back-button",11)}function E(c,C){if(1&c){const i=e.EpF();e.TgZ(0,"ion-button",12),e.NdJ("click",function(){e.CHM(i);const d=e.oxw(2);return e.KtG(d.dismiss())}),e._UZ(1,"ion-icon",13),e.qZA()}}function D(c,C){1&c&&e._UZ(0,"ion-menu-button",14)}function S(c,C){if(1&c){const i=e.EpF();e.TgZ(0,"ion-button",7),e.NdJ("click",function(){e.CHM(i);const d=e.oxw(2);return e.KtG(d.navCtrl.home())}),e._UZ(1,"ion-icon",15),e.qZA()}}function x(c,C){if(1&c){const i=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e.YNc(3,O,1,0,"ion-back-button",2),e.YNc(4,E,2,0,"ion-button",3),e.YNc(5,D,1,0,"ion-menu-button",4),e.YNc(6,S,2,0,"ion-button",5),e.qZA(),e.TgZ(7,"ion-title"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ion-buttons",6)(11,"ion-button",7),e.NdJ("click",function(){e.CHM(i);const d=e.oxw();return e.KtG(d.openAdd())}),e._UZ(12,"ion-icon",8),e.qZA()()()(),e.TgZ(13,"ion-content")(14,"div",9,10),e.NdJ("scrollToTop",function(){e.CHM(i);const d=e.oxw();return e.KtG(d.scrollToTop())}),e.qZA()()}if(2&c){const i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.backOnly&&!i.searchMode),e.xp6(1),e.Q6J("ngIf",i.searchMode),e.xp6(1),e.Q6J("ngIf",!i.searchMode&&!i.backOnly),e.xp6(1),e.Q6J("ngIf",!i.searchMode&&!i.backOnly),e.xp6(2),e.Oqu(e.lcZ(9,25,i.tableKebab+".title")),e.xp6(4),e.Q6J("name",i.iconAdd),e.xp6(1),e.Akn(i.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(1),e.Q6J("presentItemActions",i.presentItemActions)("orderBy",i.orderBy)("table",i.table)("iconAdd",i.iconAdd)("isQuickAdd",i.isQuickAdd)("callable",i.callable)("segmentValues",i.segmentValues)("itemTemplate",i.itemTemplate)("searchFields",i.searchFields)("defaultSegmentValue",i.defaultSegmentValue)("canEditItem",i.canEditItem)("filterObjects",i.filterObjects)("actions",i.actions)("canDeleteItem",i.canDeleteItem)("noDetail",i.noDetail)("deleteRelated",i.deleteRelated)("fetchObjectsFunc",i.fetchObjectsFunc)}}let I=(()=>{class c{constructor(i,f,d,P,s){this.navCtrl=i,this.staffService=f,this.viewContainerRef=d,this.analyticsService=P,this.viewCtrl=s,this.presentItemActions={},this.table="",this.orderBy="",this.orderOrient="asc",this.iconAdd="add",this.isQuickAdd=!1,this.callable=!1,this.segmentValues=[],this.itemTemplate={},this.searchFields=[],this.defaultSegmentValue="",this.canEditItem=!1,this.filterObjects={},this.actions=[],this.canDeleteItem=!1,this.noDetail=!1,this.backOnly=!1,this.tableKebab="",this.searchMode=!1}ionViewWillEnter(){var i=this;return(0,h.Z)(function*(){yield i.analyticsService.setCurrentScreen(i.table)})()}ngOnInit(){this.tableKebab=(0,r.ST)(this.table),this.params=this.navCtrl.getParams(this.params),this.params&&this.params.searchMode&&(this.searchMode=this.params.searchMode),this.params&&this.params.callback&&(this.callback=this.params.callback),this.viewContainerRef.createEmbeddedView(this.template)}openAdd(){this.navCtrl.navigateForward("/"+this.tableKebab+"/"+(this.isQuickAdd?"quick-add":"add"),{fromSearch:this.searchMode})}scrollToTop(){this.content.scrollToTop()}dismiss(){var i=this;return(0,h.Z)(function*(){if(i.callback)return i.callback(null),void(yield i.navCtrl.back());i.viewCtrl.dismiss()})()}callReload(){var i=this;return(0,h.Z)(function*(){yield i.listOnlyComponent.reloadObjects()})()}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(y.G),e.Y36(A.x),e.Y36(e.s_b),e.Y36(g.y),e.Y36(o.IN))},c.\u0275cmp=e.Xpm({type:c,selectors:[["list"],["","list",""]],viewQuery:function(i,f){if(1&i&&(e.Gf(t,7),e.Gf(o.W2,5),e.Gf(m.s,5)),2&i){let d;e.iGM(d=e.CRH())&&(f.template=d.first),e.iGM(d=e.CRH())&&(f.content=d.first),e.iGM(d=e.CRH())&&(f.listOnlyComponent=d.first)}},inputs:{presentItemActions:"presentItemActions",table:"table",orderBy:"orderBy",orderOrient:"orderOrient",iconAdd:"iconAdd",isQuickAdd:"isQuickAdd",callable:"callable",segmentValues:"segmentValues",itemTemplate:"itemTemplate",searchFields:"searchFields",defaultSegmentValue:"defaultSegmentValue",canEditItem:"canEditItem",filterObjects:"filterObjects",actions:"actions",canDeleteItem:"canDeleteItem",noDetail:"noDetail",deleteRelated:"deleteRelated",backOnly:"backOnly",fetchObjectsFunc:"fetchObjectsFunc"},decls:2,vars:0,consts:[["template",""],["slot","start"],["defaultHref","/home",4,"ngIf"],[3,"click",4,"ngIf"],["menu","first",4,"ngIf"],["color","primary",3,"click",4,"ngIf"],["slot","end"],["color","primary",3,"click"],[3,"name"],["list-only","",3,"presentItemActions","orderBy","table","iconAdd","isQuickAdd","callable","segmentValues","itemTemplate","searchFields","defaultSegmentValue","canEditItem","filterObjects","actions","canDeleteItem","noDetail","deleteRelated","fetchObjectsFunc","scrollToTop"],["listOnlyComponent",""],["defaultHref","/home"],[3,"click"],["name","close"],["menu","first"],["name","home"]],template:function(i,f){1&i&&e.YNc(0,x,16,27,"ng-template",null,0,e.W1O)},dependencies:[p.O5,o.oU,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.fG,o.wd,o.sr,o.cs,m.s,T.X$],encapsulation:2}),c})()},4466:(L,b,a)=>{a.r(b),a.d(b,{ShiftModule:()=>P});var h=a(6895),o=a(4006),r=a(191),m=a(3306),e=a(529),y=a(3093),A=a(2216),g=a(3196),p=a(5861),T=a(1914),t=a(6738),O=a(5851),E=a(2077),D=a(323),S=a(8851);function x(s,_){if(1&s){const n=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.delete())}),t._UZ(1,"ion-icon",8),t.qZA()}}function I(s,_){if(1&s){const n=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label",9),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-input",10),t.NdJ("ngModelChange",function(u){t.CHM(n);const v=t.oxw();return t.KtG(v.shift.name=u)}),t.qZA()(),t.TgZ(6,"ion-item")(7,"ion-label",9),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"date-picker",11),t.NdJ("dateChange",function(u){t.CHM(n);const v=t.oxw();return t.KtG(v.shift.startTime=u)}),t.qZA()(),t.TgZ(11,"ion-item")(12,"ion-label",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"date-picker",11),t.NdJ("dateChange",function(u){t.CHM(n);const v=t.oxw();return t.KtG(v.shift.endTime=u)}),t.qZA()()()}if(2&s){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,6,"shift-add.name")),t.xp6(2),t.Q6J("ngModel",n.shift.name),t.xp6(3),t.Oqu(t.lcZ(9,8,"shift-add.start-time")),t.xp6(2),t.Q6J("date",n.shift.startTime),t.xp6(3),t.Oqu(t.lcZ(14,10,"shift-add.end-time")),t.xp6(2),t.Q6J("date",n.shift.endTime)}}let c=(()=>{class s{constructor(n,l,u,v,Z){this.navCtrl=n,this.alertController=l,this.shiftService=u,this.translateService=v,this.analyticsService=Z,this.params=null,this.isNew=!0,this.fromSearch=!1,this.onKeyPress=M=>{!M.target||"body"!==M.target.localName||("s"===M.key||"S"===M.key)&&this.save()}}ionViewDidEnter(){this.navCtrl.addEventListener("keyup",this.onKeyPress)}ionViewWillLeave(){this.navCtrl.removeEventListener("keyup",this.onKeyPress)}ionViewWillEnter(){var n=this;return(0,p.Z)(function*(){yield n.analyticsService.setCurrentScreen("shift-add")})()}ngOnInit(){var n=this;return(0,p.Z)(function*(){const l=yield n.navCtrl.loading();if(n.shift={},n.params=n.navCtrl.getParams(n.params),n.fromSearch=n.params&&n.params.fromSearch,n.params&&n.params.id&&n.params.id>0){const u=n.params.id;return n.isNew=!1,void n.shiftService.get(u).then(function(){var v=(0,p.Z)(function*(Z){n.shift=Z,yield l.dismiss()});return function(Z){return v.apply(this,arguments)}}())}yield l.dismiss()})()}validate(){return this.shift.name?this.shift.startTime?!!this.shift.endTime||(alert(this.translateService.instant("shift-add.no-end-time-alert")),!1):(alert(this.translateService.instant("shift-add.no-start-time-alert")),!1):(alert(this.translateService.instant("shift-add.no-name-alert")),!1)}save(){var n=this;return(0,p.Z)(function*(){if(!n.validate())return;const l=yield n.navCtrl.loading();n.shiftService.save(n.shift).then((0,p.Z)(function*(){n.analyticsService.logEvent("shift-add-save-success"),yield l.dismiss(),n.exitPage()}))})()}exitPage(){var n=this;return(0,p.Z)(function*(){n.fromSearch?yield n.navCtrl.pop():yield n.navCtrl.popOnly(),n.navCtrl.publish("reloadShiftList"),n.navCtrl.publish("reloadShift",n.shift)})()}dateFormat(n){return T.C.toUiDateString(n)}delete(){var n=this;return(0,p.Z)(function*(){yield(yield n.alertController.create({header:n.translateService.instant("common.confirm"),message:n.translateService.instant("shift-add.delete-alert"),buttons:[{text:n.translateService.instant("common.agree"),handler:()=>{n.shiftService.delete(n.shift).then((0,p.Z)(function*(){n.analyticsService.logEvent("shift-detail-delete-success"),n.navCtrl.pop(),n.navCtrl.publish("reloadShiftList")}))}},{text:n.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(O.G),t.Y36(r.Br),t.Y36(E.D),t.Y36(m.sK),t.Y36(D.y))},s.\u0275cmp=t.Xpm({type:s,selectors:[["shift-add"]],decls:15,vars:10,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["color","danger",3,"click",4,"ngIf"],["color","primary",3,"click"],["name","checkmark"],[4,"ngIf"],["color","danger",3,"click"],["name","trash"],["position","stacked","color","primary"],["clearInput","","type","text","placeholder","Vd: Ca 1",3,"ngModel","ngModelChange"],["type","time","min","00:00","max","23:59",3,"date","dateChange"]],template:function(n,l){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",2),t.YNc(8,x,2,0,"ion-button",3),t.TgZ(9,"ion-button",4),t.NdJ("click",function(){return l.save()}),t._UZ(10,"ion-icon",5),t._uU(11),t.ALo(12,"translate"),t.qZA()()()(),t.TgZ(13,"ion-content"),t.YNc(14,I,16,12,"ion-list",6),t.qZA()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,6,"shift-add.title")),t.xp6(3),t.Q6J("ngIf",l.shift&&l.shift.id),t.xp6(3),t.hij(" ",t.lcZ(12,8,"action.save")," "),t.xp6(2),t.Akn(l.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("ngIf",l.shift))},dependencies:[h.O5,o.JJ,o.On,r.oU,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.wd,r.sr,r.j9,r.cs,S.L,m.X$],encapsulation:2}),s})();var C=a(2402);const f=[{path:"",component:(()=>{class s{constructor(){this.itemTemplate={h2:{field:"name"},pList:[{field:"time",valueFunc:n=>n.startTime+" - "+n.endTime}]},this.searchFields=["name"]}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["shift"]],decls:1,vars:5,consts:[["table","shift",3,"itemTemplate","searchFields","canEditItem","noDetail","backOnly"]],template:function(n,l){1&n&&t._UZ(0,"list",0),2&n&&t.Q6J("itemTemplate",l.itemTemplate)("searchFields",l.searchFields)("canEditItem",!0)("noDetail",!0)("backOnly",!0)},dependencies:[C.n],encapsulation:2}),s})()},{path:"add",component:c}];let d=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.Bz.forChild(f),g.Bz]}),s})(),P=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[h.ez,o.u5,r.Pc,d,y.m,A.uH,m.aw.forChild({loader:{provide:m.Zw,useFactory:y.x,deps:[e.eN]}})]}),s})()}}]);