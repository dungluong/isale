"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5510],{5510:(Z,g,a)=>{a.r(g),a.d(g,{SalesLineModule:()=>n});var h=a(6895),r=a(529),_=a(4006),C=a(2216),e=a(191),f=a(3306),b=a(3093),y=a(3196),m=a(5861),t=a(6738),A=a(5851),L=a(7696),T=a(667),O=a(323);let S=(()=>{class s{constructor(i,c,p,v){this.navCtrl=i,this.contactService=c,this.staffService=p,this.analyticsService=v,this.params=null,this.storageDirectory="",this.isNew=!0,this.fromSearch=!1,this.saveDisabled=!1,this.onKeyPress=u=>{!u.target||"body"!==u.target.localName||("s"===u.key||"S"===u.key)&&this.save()}}ionViewDidEnter(){this.navCtrl.addEventListener("keyup",this.onKeyPress)}ionViewWillLeave(){this.navCtrl.removeEventListener("keyup",this.onKeyPress)}ionViewWillEnter(){var i=this;return(0,m.Z)(function*(){yield i.analyticsService.setCurrentScreen("sales-line-add")})()}ngOnInit(){var i=this;return(0,m.Z)(function*(){if(i.salesLine={},i.params=i.navCtrl.getParams(i.params),i.fromSearch=i.params&&i.params.fromSearch,i.params&&i.params.id&&i.params.id>0){const c=i.params.id;i.isNew=!1;const p=yield i.navCtrl.loading();i.contactService.getSalesLine(c).then(function(){var v=(0,m.Z)(function*(u){yield p.dismiss(),i.salesLine=u});return function(u){return v.apply(this,arguments)}}())}})()}save(){var i=this;return(0,m.Z)(function*(){const c=yield i.navCtrl.loading();i.saveDisabled=!0,i.contactService.saveSalesLine(i.salesLine).then((0,m.Z)(function*(){i.analyticsService.logEvent("save-sales-line-success"),yield c.dismiss(),i.exitPage()}))})()}dismiss(){var i=this;return(0,m.Z)(function*(){i.fromSearch?yield i.navCtrl.pop():yield i.navCtrl.popOnly()})()}exitPage(){var i=this;return(0,m.Z)(function*(){i.fromSearch?yield i.navCtrl.pop():yield i.navCtrl.popOnly(),i.navCtrl.publish("reloadSalesLineList"),i.navCtrl.publish("reloadSalesLine",i.salesLine)})()}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(A.G),t.Y36(L.y),t.Y36(T.x),t.Y36(O.y))},s.\u0275cmp=t.Xpm({type:s,selectors:[["sales-line-add"]],decls:22,vars:16,consts:[["slot","start"],["ion-button","",3,"click"],["name","close"],["slot","end"],["color","primary",3,"disabled","click"],["name","checkmark"],["position","stacked","color","primary"],["clearInput","","type","text",3,"ngModel","ngModelChange"]],template:function(i,c){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return c.dismiss()}),t._UZ(4,"ion-icon",2),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"ion-title"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"ion-buttons",3)(11,"ion-button",4),t.NdJ("click",function(){return c.save()}),t._UZ(12,"ion-icon",5),t._uU(13),t.ALo(14,"translate"),t.qZA()()()(),t.TgZ(15,"ion-content")(16,"ion-list")(17,"ion-item")(18,"ion-label",6),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"ion-input",7),t.NdJ("ngModelChange",function(v){return c.salesLine.title=v}),t.qZA()()()()),2&i&&(t.xp6(5),t.hij(" \xa0",t.lcZ(6,8,"common.cancel")," "),t.xp6(3),t.Oqu(t.lcZ(9,10,"contact-add.sales-line")),t.xp6(3),t.Q6J("disabled",c.saveDisabled),t.xp6(2),t.hij(" ",t.lcZ(14,12,"action.save")," "),t.xp6(2),t.Akn(c.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(4),t.Oqu(t.lcZ(20,14,"contact-add.sales-line-title")),t.xp6(2),t.Q6J("ngModel",c.salesLine.title))},dependencies:[_.JJ,_.On,e.YG,e.Sm,e.W2,e.Gu,e.gu,e.pK,e.Ie,e.Q$,e.q_,e.wd,e.sr,e.j9,f.X$],encapsulation:2}),s})();var E=a(2402);const o=[{path:"",component:(()=>{class s{constructor(){this.itemTemplate={h2:{field:"title"}},this.searchFields=["title"]}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["sales-line"]],decls:1,vars:3,consts:[["table","sales_line",3,"itemTemplate","searchFields","canEditItem"]],template:function(i,c){1&i&&t._UZ(0,"list",0),2&i&&t.Q6J("itemTemplate",c.itemTemplate)("searchFields",c.searchFields)("canEditItem",!0)},dependencies:[E.n],encapsulation:2}),s})()},{path:"add",component:S}];let d=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[y.Bz.forChild(o),y.Bz]}),s})(),n=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[h.ez,_.u5,e.Pc,b.m,C.uH,d,f.aw.forChild({loader:{provide:f.Zw,useFactory:b.x,deps:[r.eN]}})]}),s})()},2402:(Z,g,a)=>{a.d(g,{n:()=>M});var h=a(5861),r=a(191),_=a(9854),C=a(971),e=a(6738),f=a(5851),b=a(667),y=a(323),m=a(6895),t=a(3306);const A=["template"];function L(o,d){1&o&&e._UZ(0,"ion-back-button",11)}function T(o,d){if(1&o){const n=e.EpF();e.TgZ(0,"ion-button",12),e.NdJ("click",function(){e.CHM(n);const l=e.oxw(2);return e.KtG(l.dismiss())}),e._UZ(1,"ion-icon",13),e.qZA()}}function O(o,d){1&o&&e._UZ(0,"ion-menu-button",14)}function S(o,d){if(1&o){const n=e.EpF();e.TgZ(0,"ion-button",7),e.NdJ("click",function(){e.CHM(n);const l=e.oxw(2);return e.KtG(l.navCtrl.home())}),e._UZ(1,"ion-icon",15),e.qZA()}}function E(o,d){if(1&o){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e.YNc(3,L,1,0,"ion-back-button",2),e.YNc(4,T,2,0,"ion-button",3),e.YNc(5,O,1,0,"ion-menu-button",4),e.YNc(6,S,2,0,"ion-button",5),e.qZA(),e.TgZ(7,"ion-title"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ion-buttons",6)(11,"ion-button",7),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.openAdd())}),e._UZ(12,"ion-icon",8),e.qZA()()()(),e.TgZ(13,"ion-content")(14,"div",9,10),e.NdJ("scrollToTop",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.scrollToTop())}),e.qZA()()}if(2&o){const n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.backOnly&&!n.searchMode),e.xp6(1),e.Q6J("ngIf",n.searchMode),e.xp6(1),e.Q6J("ngIf",!n.searchMode&&!n.backOnly),e.xp6(1),e.Q6J("ngIf",!n.searchMode&&!n.backOnly),e.xp6(2),e.Oqu(e.lcZ(9,25,n.tableKebab+".title")),e.xp6(4),e.Q6J("name",n.iconAdd),e.xp6(1),e.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),e.xp6(1),e.Q6J("presentItemActions",n.presentItemActions)("orderBy",n.orderBy)("table",n.table)("iconAdd",n.iconAdd)("isQuickAdd",n.isQuickAdd)("callable",n.callable)("segmentValues",n.segmentValues)("itemTemplate",n.itemTemplate)("searchFields",n.searchFields)("defaultSegmentValue",n.defaultSegmentValue)("canEditItem",n.canEditItem)("filterObjects",n.filterObjects)("actions",n.actions)("canDeleteItem",n.canDeleteItem)("noDetail",n.noDetail)("deleteRelated",n.deleteRelated)("fetchObjectsFunc",n.fetchObjectsFunc)}}let M=(()=>{class o{constructor(n,s,l,i,c){this.navCtrl=n,this.staffService=s,this.viewContainerRef=l,this.analyticsService=i,this.viewCtrl=c,this.presentItemActions={},this.table="",this.orderBy="",this.orderOrient="asc",this.iconAdd="add",this.isQuickAdd=!1,this.callable=!1,this.segmentValues=[],this.itemTemplate={},this.searchFields=[],this.defaultSegmentValue="",this.canEditItem=!1,this.filterObjects={},this.actions=[],this.canDeleteItem=!1,this.noDetail=!1,this.backOnly=!1,this.tableKebab="",this.searchMode=!1}ionViewWillEnter(){var n=this;return(0,h.Z)(function*(){yield n.analyticsService.setCurrentScreen(n.table)})()}ngOnInit(){this.tableKebab=(0,_.ST)(this.table),this.params=this.navCtrl.getParams(this.params),this.params&&this.params.searchMode&&(this.searchMode=this.params.searchMode),this.params&&this.params.callback&&(this.callback=this.params.callback),this.viewContainerRef.createEmbeddedView(this.template)}openAdd(){this.navCtrl.navigateForward("/"+this.tableKebab+"/"+(this.isQuickAdd?"quick-add":"add"),{fromSearch:this.searchMode})}scrollToTop(){this.content.scrollToTop()}dismiss(){var n=this;return(0,h.Z)(function*(){if(n.callback)return n.callback(null),void(yield n.navCtrl.back());n.viewCtrl.dismiss()})()}callReload(){var n=this;return(0,h.Z)(function*(){yield n.listOnlyComponent.reloadObjects()})()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(f.G),e.Y36(b.x),e.Y36(e.s_b),e.Y36(y.y),e.Y36(r.IN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["list"],["","list",""]],viewQuery:function(n,s){if(1&n&&(e.Gf(A,7),e.Gf(r.W2,5),e.Gf(C.s,5)),2&n){let l;e.iGM(l=e.CRH())&&(s.template=l.first),e.iGM(l=e.CRH())&&(s.content=l.first),e.iGM(l=e.CRH())&&(s.listOnlyComponent=l.first)}},inputs:{presentItemActions:"presentItemActions",table:"table",orderBy:"orderBy",orderOrient:"orderOrient",iconAdd:"iconAdd",isQuickAdd:"isQuickAdd",callable:"callable",segmentValues:"segmentValues",itemTemplate:"itemTemplate",searchFields:"searchFields",defaultSegmentValue:"defaultSegmentValue",canEditItem:"canEditItem",filterObjects:"filterObjects",actions:"actions",canDeleteItem:"canDeleteItem",noDetail:"noDetail",deleteRelated:"deleteRelated",backOnly:"backOnly",fetchObjectsFunc:"fetchObjectsFunc"},decls:2,vars:0,consts:[["template",""],["slot","start"],["defaultHref","/home",4,"ngIf"],[3,"click",4,"ngIf"],["menu","first",4,"ngIf"],["color","primary",3,"click",4,"ngIf"],["slot","end"],["color","primary",3,"click"],[3,"name"],["list-only","",3,"presentItemActions","orderBy","table","iconAdd","isQuickAdd","callable","segmentValues","itemTemplate","searchFields","defaultSegmentValue","canEditItem","filterObjects","actions","canDeleteItem","noDetail","deleteRelated","fetchObjectsFunc","scrollToTop"],["listOnlyComponent",""],["defaultHref","/home"],[3,"click"],["name","close"],["menu","first"],["name","home"]],template:function(n,s){1&n&&e.YNc(0,E,16,27,"ng-template",null,0,e.W1O)},dependencies:[m.O5,r.oU,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.fG,r.wd,r.sr,r.cs,C.s,t.X$],encapsulation:2}),o})()}}]);