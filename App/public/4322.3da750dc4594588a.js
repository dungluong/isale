"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4322],{4322:(Ls,lt,h)=>{h.r(lt),h.d(lt,{OrderModule:()=>ws});var y=h(6895),w=h(4006),s=h(191),b=h(3306),At=h(529),dt=h(3196),_t=h(6841),d=h(5861),L=h(5439),C=h(7489),F=h(9297);class pt{constructor(){this.productId=0,this.productCode="",this.productName="",this.productAvatar="",this.isCombo=!1,this.price=0,this.costPrice=null,this.initPrice=null,this.unit="",this.basicUnit=null,this.unitExchange=null,this.count=0,this.quantity=null,this.total=0,this.totalCostPrice=null,this.discount=0,this.discountPercent=0,this.discountType=0,this.isExpand=!0,this.onlineId=0,this.staff=null,this.options=null,this.attributes=null,this.items=null,this.typeAttributes=null,this.types=null,this.typeOptions=null,this.note=null,this.materials=null,this.discountInfo=null,this.priceInfo=null,this.shopPrice=0,this.categories=null}}var Tt=h(8947),x=h(6723),A=h(1914),z=h(6026),Ct=h(8257),t=h(6738),R=h(9645),ot=h(7696),X=h(6961),yt=h(580),vt=h(2077),j=h(667),St=h(7720),bt=h(7604),tt=h(5583),ut=h(7833),D=h(7488),rt=h(2126),k=h(5851),it=h(7852),K=h(3876),I=h(323),gt=h(360),mt=h(7613),qt=h(8851),W=h(2216);const Ot=["selectTax"],wt=["barcodeInput"];function Ut(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showSearchStaff())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.staffSelected.name," ")}}function Lt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showSearchStaff())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.select-collaborator")," "))}function Nt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.removeStaff())}),t._UZ(1,"ion-icon",44),t.qZA()}}function Jt(o,c){if(1&o&&(t.TgZ(0,"ion-col")(1,"ion-label",39),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ut,2,1,"ion-button",40),t.YNc(5,Lt,3,3,"ion-button",41),t.YNc(6,Nt,2,0,"ion-button",41),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,4,"order-add.collaborator-info")," "),t.xp6(2),t.Q6J("ngIf",e.staffSelected&&e.staffSelected.id>0),t.xp6(1),t.Q6J("ngIf",!e.staffSelected||0===e.staffSelected.id),t.xp6(1),t.Q6J("ngIf",e.staffSelected&&e.staffSelected.id>0)}}function kt(o,c){if(1&o&&(t.TgZ(0,"span",48),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" - ",e.table.position,"")}}function It(o,c){if(1&o&&(t.TgZ(0,"ion-label",47)(1,"span",48),t._uU(2),t.qZA(),t.YNc(3,kt,2,1,"span",49),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.table.name),t.xp6(1),t.Q6J("ngIf",e.table.position)}}function Qt(o,c){1&o&&(t.TgZ(0,"ion-label",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.select-table")," "))}function Pt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col")(1,"ion-item",45),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.selectTable())}),t.YNc(2,It,4,2,"ion-label",46),t.YNc(3,Qt,3,3,"ion-label",46),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.table),t.xp6(1),t.Q6J("ngIf",!e.table)}}const Q=function(o,c,e){return[o,c,"symbol","1.0-2",e]};function Et(o,c){if(1&o&&(t.TgZ(0,"p",72),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(4);t.xp6(1),t.HOy(" ",n.productName(e.productCode,e.productName)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,4,t.kEZ(10,Q,e.price,n.currency.code,n.translateService.currentLang))," ")}}function Mt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",72)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Et,3,14,"p",73),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.items)}}function Yt(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.hij(" - ",t.G7q(2,1,t.kEZ(7,Q,e.discount,n.currency.code,n.translateService.currentLang)),"")}}function Ft(o,c){1&o&&(t.TgZ(0,"ion-text",74),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"order-add.promotion"),")"))}function jt(o,c){if(1&o&&(t.TgZ(0,"p",78)(1,"ion-text"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getTypeAttributesString(e)," ")}}function Dt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",78)(2,"ion-text"),t._uU(3),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getAttributesString(e)," ")}}function Gt(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.kEZ(8,Q,e.price,n.currency.code,n.translateService.currentLang)),"")}}function Ht(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Kt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",78)(2,"ion-text"),t._uU(3),t.YNc(4,Gt,3,12,"span",13),t._uU(5," | "),t.YNc(6,Ht,2,0,"span",13),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.kEZ(12,Q,e.total,n.currency.code,n.translateService.currentLang))," ")}}function Bt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",78)(2,"ion-text")(3,"strong"),t._uU(4),t.qZA()()(),t.YNc(5,Kt,9,16,"ng-container",50),t.BQk()),2&o){const e=c.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(1),t.Q6J("ngForOf",e.values)}}function $t(o,c){if(1&o&&(t.TgZ(0,"p",78),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(1),t.xDo(" ",n.productName(e.code,e.title)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,5,t.kEZ(17,Q,e.price,n.currency.code,n.translateService.currentLang))," | +",t.G7q(3,11,t.kEZ(21,Q,e.total,n.currency.code,n.translateService.currentLang))," ")}}function zt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",78)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,$t,4,25,"p",79),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.added-products")),t.xp6(2),t.Q6J("ngForOf",e.options)}}function Vt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-item",75)(2,"ion-text",76),t.YNc(3,jt,3,3,"p",77),t.YNc(4,Dt,4,3,"ng-container",13),t.YNc(5,Bt,6,2,"ng-container",50),t.YNc(6,zt,6,4,"ng-container",13),t.qZA()(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.Q6J("ngIf",e.typeAttributes&&e.typeAttributes.length),t.xp6(1),t.Q6J("ngIf",e.attributes&&e.attributes.length),t.xp6(1),t.Q6J("ngForOf",e.typeOptions),t.xp6(1),t.Q6J("ngIf",e.options&&e.options.length)}}function Wt(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",51)(2,"ion-buttons")(3,"ion-button",17),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.expand(i))}),t._UZ(4,"fa-icon",52),t.qZA()(),t.TgZ(5,"ion-text",53),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.expand(i))}),t._uU(6),t.YNc(7,Mt,6,4,"ng-container",13),t.qZA(),t.TgZ(8,"ion-buttons",54)(9,"ion-button",55),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.decrease(i))}),t._UZ(10,"ion-icon",56),t.qZA(),t.TgZ(11,"ion-button",57),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.increase(i))}),t._UZ(12,"ion-icon",58),t.qZA(),t.TgZ(13,"ion-button",59),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.showTypes(i))}),t._UZ(14,"ion-icon",60),t.qZA(),t.TgZ(15,"ion-button",59),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.showOptions(i))}),t._UZ(16,"ion-icon",61),t.qZA()()(),t.TgZ(17,"ion-item",62)(18,"ion-text",53),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.expand(i))}),t._uU(19),t.ALo(20,"currency"),t.YNc(21,Yt,3,11,"span",13),t._uU(22),t.ALo(23,"currency"),t.YNc(24,Ft,3,3,"ion-text",63),t.qZA(),t.TgZ(25,"ion-buttons",64)(26,"ion-button",65),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.removeProduct(i))}),t._UZ(27,"ion-icon",66),t.qZA()()(),t.YNc(28,Vt,7,6,"ng-container",13),t.TgZ(29,"ion-grid",67)(30,"ion-row")(31,"ion-col")(32,"ion-label",11),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"money-input",68),t.NdJ("moneyValueChange",function(r){const a=t.CHM(e).$implicit;return t.KtG(a.price=r)})("moneyValueChange",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.reCalc(i))}),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"ion-col")(38,"ion-label",11),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"ion-input",69),t.NdJ("ngModelChange",function(r){const a=t.CHM(e).$implicit;return t.KtG(a.count=r)})("ngModelChange",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.changeCount(i))})("focus",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.selectAll(r))}),t.ALo(42,"translate"),t.qZA()(),t.TgZ(43,"ion-col")(44,"ion-label",11),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"money-input",70),t.NdJ("moneyValueChange",function(r){const a=t.CHM(e).$implicit;return t.KtG(a.discount=r)})("moneyValueChange",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.reCalc(i))}),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"ion-text",71),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.openProductDiscountPercent(i))}),t._uU(50),t.qZA()(),t.TgZ(51,"ion-col")(52,"ion-label",11),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"money-input",70),t.NdJ("moneyValueChange",function(r){const a=t.CHM(e).$implicit;return t.KtG(a.total=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.applyItemTotal())}),t.ALo(56,"translate"),t.qZA()()()(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(4),t.s9C("icon",e.isExpand?"compress-arrows-alt":"edit"),t.xp6(1),t.Udp("font-weight",e.isExpand?"bold":"normal"),t.xp6(1),t.hij(" ",n.productName(e.productCode,e.productName)," "),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length),t.xp6(10),t.Q6J("lines",n.hasOptionsOrAttributes(e)?"none":"inset"),t.xp6(1),t.Udp("font-weight",e.isExpand?"bold":"normal"),t.xp6(1),t.lnq(" ",e.count," ",e.unit," \xd7 ",t.G7q(20,35,t.kEZ(63,Q,e.price+n.getOptionPrices(e),n.currency.code,n.translateService.currentLang)),""),t.xp6(2),t.Q6J("ngIf",e.discount),t.xp6(1),t.hij(" | ",t.G7q(23,41,t.kEZ(67,Q,e.total,n.currency.code,n.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.promotion),t.xp6(4),t.Q6J("ngIf",n.hasOptionsOrAttributes(e)),t.xp6(1),t.Q6J("hidden",!e.isExpand),t.xp6(4),t.hij(" ",t.lcZ(34,47,"order-add.product-price")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(36,49,"order-add.enter-product-price")),t.Q6J("disabled",n.blockEditingOrderPrice)("clear",!0)("moneyValue",e.price),t.xp6(4),t.hij(" ",t.lcZ(40,51,"order-add.product-count")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(42,53,"order-add.enter-product-count")),t.Q6J("ngModel",e.count),t.xp6(4),t.hij(" ",t.lcZ(46,55,"order-add.product-discount"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(48,57,"order-add.enter-product-discount")),t.Q6J("clear",!0)("moneyValue",e.discount),t.xp6(2),t.Udp("background-color",e.discountPercent?"#3880ff":"#ccc"),t.xp6(1),t.hij(" ",e.discountPercent?e.discountPercent.toFixed(0)+"%":"%"," "),t.xp6(3),t.hij(" ",t.lcZ(54,59,"order-add.product-total")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(56,61,"order-add.enter-product-total")),t.Q6J("clear",!0)("moneyValue",e.total)}}function Rt(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Wt,57,71,"ng-container",50),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.order.items)}}function Xt(o,c){1&o&&(t._UZ(0,"div",80),t.ALo(1,"translate")),2&o&&t.Q6J("innerHTML",t.lcZ(1,1,"order-add.no-product"),t.oJD)}function te(o,c){1&o&&(t._UZ(0,"div",80),t.ALo(1,"translate")),2&o&&t.Q6J("innerHTML",t.lcZ(1,1,"order-add.no-product-short"),t.oJD)}function ee(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",81),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.hideNoProductDescription())}),t._UZ(1,"ion-icon",44),t.qZA()}}function ne(o,c){if(1&o&&(t.TgZ(0,"p",89),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-text",9),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.promotion-discount"),": "),t.xp6(3),t.hij("-",t.G7q(5,4,t.kEZ(10,Q,e.discountValue,n.currency.code,n.translateService.currentLang)),"")}}const oe=function(o){return{quantity:o}};function re(o,c){if(1&o&&(t.TgZ(0,"ion-label",86),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,"order-add.promotion-products-selected",t.VKq(4,oe,e.totalQuantity))," ")}}function ie(o,c){1&o&&(t.TgZ(0,"ion-label",86),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.select-promotion-products")," "))}function ce(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",85),t.YNc(1,re,3,6,"ion-label",90),t.YNc(2,ie,3,3,"ion-label",90),t.TgZ(3,"ion-buttons",64)(4,"ion-button",91),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,i=t.oxw(3);return t.KtG(i.addPromotionProducts(r))}),t._UZ(5,"ion-icon",92),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.totalQuantity),t.xp6(1),t.Q6J("ngIf",!e.totalQuantity),t.xp6(4),t.hij(" ",t.lcZ(7,3,"order-add.add-promotion-product")," ")}}function ae(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",85)(2,"ion-label",86)(3,"b"),t._uU(4),t.qZA(),t.YNc(5,ne,6,14,"p",87),t.qZA(),t.TgZ(6,"ion-buttons",64)(7,"ion-button",65),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.removePromotion(i))}),t._UZ(8,"ion-icon",66),t.qZA()()(),t.YNc(9,ce,8,5,"ion-item",88),t.BQk()}if(2&o){const e=c.$implicit,n=c.index,r=t.oxw(3);t.xp6(4),t.AsE("",n+1,". ",r.productName(e.code,e.name),""),t.xp6(1),t.Q6J("ngIf",e.discountValue),t.xp6(4),t.Q6J("ngIf",e.promotionProduct||e.promotionCategory)}}function se(o,c){if(1&o&&(t.ynx(0),t.YNc(1,ae,10,4,"ng-container",50),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.promotions)}}function le(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list",82)(1,"ion-item-divider",14)(2,"ion-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-buttons")(6,"ion-button",83),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.turnoffPromotions())}),t._UZ(7,"ion-icon",44),t.qZA()()(),t.TgZ(8,"ion-item",16)(9,"ion-buttons")(10,"ion-button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showPromotionSelector())}),t._UZ(11,"ion-icon",18),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ion-button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.scanQr())}),t._UZ(15,"ion-icon",84),t._uU(16),t.ALo(17,"translate"),t.qZA()()(),t.TgZ(18,"ion-item",16)(19,"ion-input",21,22),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.promotionCode=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.promotionCodeChanged())}),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,se,2,1,"ng-container",13),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,6,"order-add.add-promotion")," "),t.xp6(9),t.hij(" \xa0",t.lcZ(13,8,"order-add.add-manual")," "),t.xp6(4),t.hij(" \xa0",t.lcZ(17,10,"order-add.qr-scan")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(21,12,"order-add.enter-promotion-code")),t.Q6J("ngModel",e.promotionCode),t.xp6(3),t.Q6J("ngIf",e.promotions&&e.promotions.length)}}function de(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",99),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showSearchContact())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.contactSelected.fullName," ")}}function _e(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",100),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.scanContact())}),t._UZ(1,"ion-icon",19),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.hij(" \xa0",t.lcZ(3,1,"order-add.mobile-scan")," "))}function pe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",101),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showSearchContact())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"trade-add.select-contact")," "))}function ue(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",102),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.removeContact())}),t._UZ(1,"ion-icon",44),t.qZA()}}function ge(o,c){if(1&o&&(t.TgZ(0,"ion-item",103)(1,"ion-text",104),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,2,"order-add.contact-points"),": ",e.totalPoints," ")}}function me(o,c){if(1&o&&(t.TgZ(0,"ion-list",93)(1,"ion-item",35)(2,"ion-text",9),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,de,2,1,"ion-button",94),t.YNc(6,_e,4,3,"ion-button",95),t.YNc(7,pe,3,3,"ion-button",96),t.YNc(8,ue,2,0,"ion-button",97),t.qZA(),t.YNc(9,ge,4,4,"ion-item",98),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,6,"order-add.contact-info")),t.xp6(2),t.Q6J("ngIf",e.contactSelected&&e.contactSelected.id>0),t.xp6(1),t.Q6J("ngIf",!e.contactSelected||0===e.contactSelected.id),t.xp6(1),t.Q6J("ngIf",!e.contactSelected||0===e.contactSelected.id),t.xp6(1),t.Q6J("ngIf",e.contactSelected&&e.contactSelected.id>0),t.xp6(1),t.Q6J("ngIf",e.contactSelected&&e.totalPoints)}}function fe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-grid",105)(1,"ion-row")(2,"ion-col")(3,"ion-label",11),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"ion-input",106),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.contactName=r)}),t.qZA()(),t.TgZ(7,"ion-col")(8,"ion-label",11),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ion-input",107),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.contactPhone=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.changePhone())}),t.qZA()()(),t.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-label",11),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-input",108),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.contactAddress=r)}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.hij("",t.lcZ(5,6,"contact-add.full-name")," "),t.xp6(2),t.Q6J("ngModel",e.order.contactName),t.xp6(3),t.hij("",t.lcZ(10,8,"contact-add.phone")," "),t.xp6(2),t.Q6J("ngModel",e.order.contactPhone),t.xp6(4),t.hij("",t.lcZ(16,10,"contact-add.address")," "),t.xp6(2),t.Q6J("ngModel",e.order.contactAddress)}}function xe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list",35)(1,"ion-grid",109)(2,"ion-row")(3,"ion-col")(4,"ion-textarea",110),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.note=r)}),t.ALo(5,"translate"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.s9C("placeholder",t.lcZ(5,2,"order-add.enter-note")),t.Q6J("ngModel",e.order.note)}}function he(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.showSearchMoneyAccount())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.moneyAccountSelected.accountName," ")}}function Ze(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.showSearchMoneyAccount())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"trade-add.select-money-account")," "))}function Ae(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.removeMoneyAccount())}),t._UZ(1,"ion-icon",44),t.qZA()}}function Te(o,c){if(1&o&&(t.TgZ(0,"ion-col")(1,"ion-label",39),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t.YNc(5,he,2,1,"ion-button",40),t.YNc(6,Ze,3,3,"ion-button",41),t.YNc(7,Ae,2,0,"ion-button",41),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,4,"trade-add.money-account")," "),t.xp6(3),t.Q6J("ngIf",e.moneyAccountSelected&&e.moneyAccountSelected.id>0),t.xp6(1),t.Q6J("ngIf",!e.moneyAccountSelected||0===e.moneyAccountSelected.id),t.xp6(1),t.Q6J("ngIf",e.moneyAccountSelected&&e.moneyAccountSelected.id>0)}}function Ce(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",116)(2,"ion-label",117),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"money-input",118),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.totalProductAmount=r)}),t.qZA()(),t.TgZ(6,"ion-col",116)(7,"ion-label",11),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.shippingFee=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.reCalcTotal())}),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"ion-col",116)(13,"ion-label",119),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"ion-toggle",120),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.shipCostOnCustomer=r)})("ionChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.reCalcTotal(!0))}),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,8,"order-add.total-product-amount")," "),t.xp6(2),t.Q6J("moneyValue",e.totalProductAmount)("disabled",!0),t.xp6(3),t.hij("",t.lcZ(9,10,"order-add.shipping-fee")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(11,12,"order-add.enter-shipping-fee")),t.Q6J("moneyValue",e.order.shippingFee),t.xp6(4),t.hij("",t.lcZ(15,14,"order-add.shipping-fee-for-customer")," "),t.xp6(3),t.Q6J("ngModel",e.order.shipCostOnCustomer)}}function ye(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",121)(2,"ion-label",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.totalPromotionDiscount=r)}),t.ALo(6,"translate"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"order-add.total-promotion-discount")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(6,5,"order-add.total-promotion-discount")),t.Q6J("moneyValue",e.order.totalPromotionDiscount)}}function ve(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col")(1,"ion-label",11),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-grid",122)(5,"ion-row")(6,"ion-col",123)(7,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(3);return t.KtG(i.order.tax=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.reCalcTotal())}),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"ion-col",124)(10,"ion-text",71),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.openTaxType())}),t._uU(11),t.qZA(),t.TgZ(12,"ion-select",126,127),t.NdJ("ionChange",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.taxTypeChanged(!0))})("ngModelChange",function(r){t.CHM(e);const i=t.oxw(3);return t.KtG(i.order.taxType=r)}),t.TgZ(14,"ion-select-option",112),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-select-option",112),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ion-select-option",112),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"ion-select-option",112),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ion-select-option",112),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"ion-select-option",112),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ion-select-option",112),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"ion-select-option",112),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"ion-select-option",112),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"ion-select-option",112),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"ion-select-option",112),t._uU(45),t.ALo(46,"translate"),t.qZA()()()()()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.hij("",t.lcZ(3,28,"order-add.tax")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(8,30,"order-add.enter-tax")),t.Q6J("moneyValue",e.order.tax),t.xp6(4),t.hij(" ",(100*e.taxTypeToRate()).toFixed(0)+"%"," "),t.xp6(1),t.Q6J("hidden",!0)("ngModel",e.order.taxType),t.xp6(2),t.Q6J("value",0),t.xp6(1),t.hij("",t.lcZ(16,32,"order-add.no-tax")," "),t.xp6(2),t.Q6J("value",10),t.xp6(1),t.hij("",t.lcZ(19,34,"order-add.tax-8")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(22,36,"order-add.tax-10")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij("",t.lcZ(25,38,"order-add.tax-15")," "),t.xp6(2),t.Q6J("value",3),t.xp6(1),t.hij("",t.lcZ(28,40,"order-add.tax-20")," "),t.xp6(2),t.Q6J("value",4),t.xp6(1),t.hij("",t.lcZ(31,42,"order-add.tax-25")," "),t.xp6(2),t.Q6J("value",5),t.xp6(1),t.hij("",t.lcZ(34,44,"order-add.tax-30")," "),t.xp6(2),t.Q6J("value",6),t.xp6(1),t.hij("",t.lcZ(37,46,"order-add.tax-35")," "),t.xp6(2),t.Q6J("value",7),t.xp6(1),t.hij("",t.lcZ(40,48,"order-add.tax-40")," "),t.xp6(2),t.Q6J("value",8),t.xp6(1),t.hij("",t.lcZ(43,50,"order-add.tax-45")," "),t.xp6(2),t.Q6J("value",9),t.xp6(1),t.hij("",t.lcZ(46,52,"order-add.tax-50")," ")}}function Se(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-grid",122)(6,"ion-row")(7,"ion-col",123)(8,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.discountOnTotal=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeDiscountOnTotal())}),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col",124)(11,"ion-text",71),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openDiscountPercent())}),t._uU(12),t.qZA()()()()(),t.TgZ(13,"ion-col")(14,"ion-label",125),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.netValue=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.reCalcTotal(!0))}),t.ALo(18,"translate"),t.qZA()(),t.YNc(19,ve,47,54,"ion-col",13),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,10,"order-add.discount")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(9,12,"order-add.enter-discount")),t.Q6J("moneyValue",e.order.discountOnTotal),t.xp6(3),t.Udp("background-color",e.discountPercent?"#3880ff":"#ccc"),t.xp6(1),t.hij(" ",e.discountPercent?e.discountPercent.toFixed(0)+"%":"%"," "),t.xp6(3),t.hij("",t.lcZ(16,14,"order-add.net-value")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(18,16,"order-add.enter-net-value")),t.Q6J("moneyValue",e.order.netValue),t.xp6(2),t.Q6J("ngIf",!e.hideTax)}}function be(o,c){if(1&o&&(t.TgZ(0,"p",134),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"currency"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(" 1 ",t.lcZ(2,2,"point-add.point")," = ",t.G7q(3,4,t.kEZ(10,Q,e.pointPaymentConfig.pointPaymentExchange,e.currency.code,e.translateService.currentLang))," ")}}function qe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-label",128),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,be,4,14,"p",129),t._UZ(6,"br"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"ion-col")(11,"ion-label",128),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"money-input",130),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.amountFromPoint=r)}),t.qZA(),t.TgZ(15,"p",131)(16,"ion-button",43),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.spendAll())}),t._uU(17," + Ti\xeau h\u1ebft "),t.qZA()()(),t.TgZ(18,"ion-col")(19,"ion-label",128),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"ion-input",132),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.order.pointAmount=r)})("ionChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.reCalcTotal())}),t.qZA(),t.TgZ(23,"p",131)(24,"ion-button",133),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.clearAll())}),t._uU(25," - B\u1ecf "),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,10,"order-add.pay-by-point")," "),t.xp6(2),t.Q6J("ngIf",e.pointPaymentConfig.pointPaymentExchange),t.xp6(2),t.lnq(" ",t.lcZ(8,12,"order-add.max-point-amount"),": ",e.contactSelected.point," ",t.lcZ(9,14,"point-add.point")," "),t.xp6(5),t.hij("",t.lcZ(13,16,"order-add.amount-point-converted")," "),t.xp6(2),t.Q6J("disabled",!0)("moneyValue",e.order.amountFromPoint),t.xp6(6),t.Oqu(t.lcZ(21,18,"order-add.point-amount")),t.xp6(2),t.Q6J("ngModel",e.order.pointAmount)}}function Oe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list",35)(1,"ion-grid")(2,"ion-row"),t.YNc(3,Te,8,6,"ion-col",13),t.TgZ(4,"ion-col")(5,"ion-label",11),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select",111),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.status=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.changeOrderStatus())}),t.TgZ(9,"ion-select-option",112),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"ion-select-option",112),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"ion-select-option",112),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"ion-select-option",112),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"ion-select-option",112),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"ion-select-option",112),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ion-select-option",112),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"ion-select-option",112),t._uU(31),t.ALo(32,"translate"),t.qZA()()()()(),t.TgZ(33,"ion-grid",109),t.YNc(34,Ce,18,16,"ion-row",13),t.YNc(35,ye,7,7,"ion-row",13),t.YNc(36,Se,20,18,"ion-row",13),t.YNc(37,qe,26,20,"ion-row",13),t.TgZ(38,"ion-row")(39,"ion-col")(40,"ion-label",113),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.total=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.reCalcTotal())}),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"ion-col")(46,"ion-label",11),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.paid=r)})("moneyValueChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.reCalcChange())}),t.ALo(50,"translate"),t.qZA()(),t.TgZ(51,"ion-col")(52,"ion-label",11),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"money-input",114),t.NdJ("moneyValueChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.change=r)}),t.ALo(56,"translate"),t.qZA()()(),t.TgZ(57,"ion-row")(58,"ion-text",115),t._uU(59),t.ALo(60,"translate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.staffService.isStaff()),t.xp6(3),t.hij("",t.lcZ(7,35,"order-detail.status")," "),t.xp6(2),t.Q6J("disabled",e.saveDisabled)("ngModel",e.order.status),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.hij("",t.lcZ(11,37,"order-detail.status-draft")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(14,39,"order-detail.status-inprogress")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij("",t.lcZ(17,41,"order-detail.status-shipping")," "),t.xp6(2),t.Q6J("value",3),t.xp6(1),t.hij("",t.lcZ(20,43,"order-detail.status-done")," "),t.xp6(2),t.Q6J("value",4),t.xp6(1),t.hij("",t.lcZ(23,45,"order-detail.status-cancel")," "),t.xp6(2),t.Q6J("value",5),t.xp6(1),t.hij("",t.lcZ(26,47,"order-detail.status-has-debt")," "),t.xp6(2),t.Q6J("value",6),t.xp6(1),t.hij("",t.lcZ(29,49,"order-detail.status-shipping-has-debt")," "),t.xp6(2),t.Q6J("value",7),t.xp6(1),t.hij("",t.lcZ(32,51,"order-detail.status-deposit")," "),t.xp6(3),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngIf",!e.hidePromotionFunction),t.xp6(1),t.Q6J("ngIf",!e.isCollapsed),t.xp6(1),t.Q6J("ngIf",e.contactSelected&&e.contactSelected.point&&e.pointPaymentConfig&&e.pointPaymentConfig.allowPointPayment&&e.contactSelected.buyCount&&e.contactSelected.buyCount>=e.pointPaymentConfig.pointPaymentAfterBuyCount),t.xp6(4),t.hij(" ",t.lcZ(42,53,"order-add.total")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(44,55,"order-add.enter-total")),t.Q6J("moneyValue",e.order.total),t.xp6(4),t.hij("",t.lcZ(48,57,"order-add.paid")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(50,59,"order-add.enter-paid")),t.Q6J("moneyValue",e.order.paid),t.xp6(4),t.hij("",t.lcZ(54,61,"order-add.change")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(56,63,"order-add.enter-change")),t.Q6J("moneyValue",e.order.change),t.xp6(4),t.AsE("* ",t.lcZ(60,65,"config.money"),": ",e.currency?e.currency.code:"","")}}function we(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list",35)(1,"ion-grid",109)(2,"ion-row")(3,"ion-col")(4,"ion-label",11),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-input",135),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.billOfLadingCode=r)}),t.qZA()(),t.TgZ(8,"ion-col")(9,"ion-label",11),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"ion-input",136),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.shippingPartner=r)}),t.qZA()()(),t.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-label",11),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"ion-input",137),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.shipperName=r)}),t.qZA()(),t.TgZ(19,"ion-col")(20,"ion-label",11),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"ion-input",138),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.shipperPhone=r)}),t.qZA()()(),t.TgZ(24,"ion-row")(25,"ion-col")(26,"ion-label",11),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"ion-input",139),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.order.deliveryAddress=r)}),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.hij("",t.lcZ(6,10,"order-add.bill-of-lading-code")," "),t.xp6(2),t.Q6J("ngModel",e.order.billOfLadingCode),t.xp6(3),t.hij("",t.lcZ(11,12,"order-add.shipping-partner")," "),t.xp6(2),t.Q6J("ngModel",e.order.shippingPartner),t.xp6(4),t.hij("",t.lcZ(17,14,"order-add.shipper-name")," "),t.xp6(2),t.Q6J("ngModel",e.order.shipperName),t.xp6(3),t.hij("",t.lcZ(22,16,"order-add.shipper-phone")," "),t.xp6(2),t.Q6J("ngModel",e.order.shipperPhone),t.xp6(4),t.hij("",t.lcZ(28,18,"order-add.delivery-address")," "),t.xp6(2),t.Q6J("ngModel",e.order.deliveryAddress)}}let Ue=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f,S,U,M,Z,J,P,E,Y,p,v){this.barcodeScanner=e,this.contactService=n,this.productService=r,this.promotionService=i,this.shiftService=a,this.staffService=l,this.pointService=u,this.moneyAccountTransactionService=g,this.orderService=_,this.debtService=f,this.translateService=S,this.userService=U,this.toastCtrl=M,this.tradeService=Z,this.alertCtrl=J,this.modalCtrl=P,this.navCtrl=E,this.storage=Y,this.storeService=p,this.analyticsService=v,this.tab="payment",this.params=null,this.promotions=[],this.discounts=[],this.prices=[],this.order=new F.K,this.oldOrder=null,this.currency={code:"vnd"},this.isNew=!0,this.hideTax=!1,this.hidePromotionFunction=!1,this.barcode="",this.promotionCode="",this.saveDisabled=!1,this.outStock=!1,this.isCollapsed=!1,this.noPrompt=!0,this.discountPercent=0,this.totalProductAmount=0,this.totalPoints=0,this.isHideNoProductDescription=!0,this.tradeToCategories=[],this.shifts=[],this.hideTablesFunction=!1,this.blockEditingOrderPrice=!1,this.onKeyPress=O=>{if(O.target&&"body"===O.target.localName)("s"===O.key||"S"===O.key)&&this.save();else{if(!O.target||"input"!==O.target.localName)return;("Escape"===O.key||"Esc"===O.key)&&(this.barcode="")}}}ionViewDidEnter(){var e=this;return(0,d.Z)(function*(){e.shifts=yield e.shiftService.getAll(),e.navCtrl.addEventListener("keyup",e.onKeyPress)})()}ionViewWillLeave(){this.navCtrl.removeEventListener("keyup",this.onKeyPress)}expandCollapse(){var e=this;return(0,d.Z)(function*(){e.isCollapsed||alert(e.translateService.instant("order-add.order-form-collapsed-alert")),e.isCollapsed=!e.isCollapsed,yield e.userService.setOrderFormCollapsed(e.isCollapsed)})()}ngOnInit(){var e=this;return(0,d.Z)(function*(){const n=yield e.userService.getAttr("current-currency");e.hideTax=yield e.userService.getAttr("hide-tax"),e.hidePromotionFunction=yield e.userService.getAttr("hide-promotion-function"),e.currency=x.W.getCurrencyByCode(n);const r=yield e.orderService.getNewOrderData();e.isCollapsed=yield e.userService.getOrderFormCollapsed(),e.outStock=yield e.userService.getAttr("out-stock"),e.pointPaymentConfig=e.pointService.getPointPaymentConfigByInput(r.shopConfigs),e.hideTablesFunction=yield e.userService.getAttr("hide-tables-function"),e.pointConfigs=r.pointConfigs,e.order=new F.K,e.order.status=3,e.pointPaymentConfig&&e.pointPaymentConfig.pointPaymentExchange&&(e.order.pointPaymentExchange=e.pointPaymentConfig.pointPaymentExchange),e.blockEditingOrderPrice=e.staffService.permissionValue("block-editing-order-price"),e.order.orderCode=e.orderService.getOrderCode(),e.order.createdAt=e.getCurrent(),e.params=e.navCtrl.getParams(e.params);const i=yield e.storage.get("hide-no-product");e.isHideNoProductDescription=i&&"1"===i;let a=0,l=0,u=0;if(e.store=yield e.storeService.getCurrentStore(),e.noPrompt=!0,e.params){if(e.params&&e.params.id?(a=e.params.id,e.isNew=!1):e.params&&e.params.contact?l=+e.params.contact:e.params&&e.params.product&&(u=+e.params.product,e.params&&e.params.fromUnit&&(e.fromUnit=e.params.fromUnit)),e.params.table&&(e.table=e.params.table,e.order.status=0,e.order.tableId=e.table.id),e.params&&e.params.convert&&(x.W.copyFields(e.order,e.params.convert,["contactAddress","contactName","contactPhone","itemsJson","orderCode"],null,{items:JSON.parse(e.order.itemsJson)}),x.W.setZero(e.order,["total","netValue","paid","change","discountOnTotal","tax","shippingFee"]),e.order.items&&e.order.items.length))for(const g of e.order.items)e.reCalc(g);if(e.params&&e.params.order&&"copy"===e.params.mode){const g=JSON.parse(JSON.stringify(e.params.order));g.id=0,g.orderCode=e.orderService.getOrderCode(),g.createdAt=e.getCurrent(),e.contactSelected=g.contact,e.staffSelected=g.staff,e.contactSelected=g.contact,e.moneyAccountSelected=g.moneyAccount,e.order=g}if(e.params&&e.params.quote){const g=JSON.parse(JSON.stringify(e.params.quote));e.contactSelected=g.contact,e.staffSelected=g.staff,e.contactSelected=g.contact;const _=new F.K;x.W.copyObject(_,g,null,{orderCode:e.orderService.getOrderCode(),createdAt:e.getCurrent(),status:3,id:0}),e.totalProductAmount=_.items&&_.items.length?C.sumBy(_.items,f=>f.total):0,e.order=_}}if(e.prices=r.customerPrices,e.discounts=r.customerDiscounts,a&&a>0){const g=yield e.navCtrl.loading();e.orderService.get(a).then(function(){var _=(0,d.Z)(function*(f){if(yield g.dismiss(),e.contactSelected=f.contact&&0!==f.contact.id?f.contact:null,e.staffSelected=f.staff&&0!==f.staff.id?f.staff:null,e.moneyAccountSelected=f.moneyAccount&&0!==f.moneyAccount.id?f.moneyAccount:null,!e.moneyAccountSelected&&!e.staffService.isStaff())if(e.store&&e.store.moneyAccount)e.moneyAccountSelected=e.store.moneyAccount,e.order.moneyAccountId=e.moneyAccountSelected.id;else{const S=r.defaultAccount;S&&(e.moneyAccountSelected=S,e.order.moneyAccountId=S.id)}e.order=f,e.pointPaymentConfig&&e.pointPaymentConfig.pointPaymentExchange&&(e.order.pointPaymentExchange=e.pointPaymentConfig.pointPaymentExchange),e.table=e.order.table,e.oldOrder=JSON.parse(JSON.stringify(f)),e.order.items=JSON.parse(e.order.itemsJson),e.promotions=JSON.parse(e.order.promotionsJson),e.totalProductAmount=e.order.items&&e.order.items.length?C.sumBy(e.order.items,S=>S.total):0,e.moneyAccountTransactionService.getMoneyAccountTransactionByOrder(a).then(S=>{e.moneyAccountTransaction=S}),setTimeout(()=>{e.noPrompt=!1},2e3)});return function(f){return _.apply(this,arguments)}}())}else{const g=yield e.storage.get("tax-type");if(e.order.taxType=g?+g:0,e.staffService.isStaff())e.staffSelected=e.staffService.selectedStaff;else if(e.store&&e.store.moneyAccount)e.moneyAccountSelected=e.store.moneyAccount,e.order.moneyAccountId=e.moneyAccountSelected.id;else{const _=r.defaultAccount;_&&(e.moneyAccountSelected=_,e.order.moneyAccountId=_.id)}if(l&&l>0){const _=yield e.contactService.get(l);e.contactSelected=_,e.order.contactId=_.id}else if(u&&u>0){const _=yield e.productService.get(u,e.store?e.store.id:0);e.fromUnit&&(_.fromUnit=e.fromUnit),e.addProduct(_)}if(e.params&&e.params.flow&&e.params.flow.fromUserId){e.flow=e.params.flow;const _=yield e.contactService.searchContactByFbUserId(e.params.flow.fromUserId);_?(e.contactSelected=_,e.order.contactId=_.id):e.order.contactName=e.flow.fromUserName}if(e.params&&e.params.fbcomment&&e.params.fbcomment.fromUserId){const _=yield e.contactService.searchContactByFbUserId(e.params.fbcomment.fromUserId);_?(e.contactSelected=_,e.order.contactId=_.id):e.order.contactName=e.params.fbcomment.fromUserName}if(e.params&&e.params.products)for(const _ of e.params.products)yield e.addProduct(_);e.barcodeFocus(),setTimeout(()=>{e.noPrompt=!1},2e3)}e.params&&e.params.convert&&e.reCalcTotal()})()}getCurrent(){return L(new Date).format(A.C.getDateTimeDbFormat())}calculatePoints(){if(this.totalPoints=0,this.pointConfigs&&this.pointConfigs.length&&this.order.items&&this.order.items.length)for(const e of this.order.items){let n=null;for(const i of this.pointConfigs)if(i.forAllCustomer||i.contactId==this.order.contactId){if(i.productId==e.productId){n=i;break}if(0===i.productId){for(const a of this.tradeToCategories)if(a.tradeId==e.productId&&a.categoryId==i.categoryId){n=i;break}if(0==i.categoryId){if(i.contactId==this.order.contactId){n=i;break}0==i.contactId&&(n=i)}}}null!=n&&(this.totalPoints+=e.total/n.exchange)}}checkDiscountOnChangeCustomer(){if(!this.discounts||!this.discounts.length)return;let e=!1;for(const n of this.order.items)this.checkDiscount(n)&&(this.reCalc(n),e=!0);e&&this.reCalcTotal()}turnoffPromotions(){alert(this.translateService.instant("order-add.turn-off-promotions-alert"))}checkPriceOnChangeCustomer(){if(!this.prices||!this.prices.length)return;let e=!1;for(const n of this.order.items)this.checkPrice(n)&&(this.reCalc(n),e=!0);e&&this.reCalcTotal()}calcDiscount(e,n){return 0===n.type?n.discountValue:e.price*e.count*n.discountValue/100}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-add")})()}showPromotionSelector(){var e=this;this.analyticsService.logEvent("order-add-search-promotion");const n=function(){var a=(0,d.Z)(function*(l){!l||e.addPromotion(l)});return function(u){return a.apply(this,arguments)}}(),r=this.order.items&&this.order.items.length?C.sumBy(this.order.items,a=>a.total):0,i=this.order.items&&this.order.items.length?C.sumBy(this.order.items,a=>a.count):0;this.navCtrl.push("/promotion",{callback:n,searchMode:!0,orderItems:this.order.items,orderItemsTotalAmount:this.totalProductAmount,totalProductsAmount:r,totalProductsQuantity:i})}showSearchContact(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-contact");const n=function(){var r=(0,d.Z)(function*(i){const a=i;if(a)return e.contactSelected=a,e.order.contactId=a.id,e.order.contactName=a?a.fullName:null,e.order.contactPhone=a?a.mobile:null,e.order.contactAddress=a?a.address:null,e.checkDiscountOnChangeCustomer(),e.checkPriceOnChangeCustomer(),e.order.pointAmount=0,e.order.amountFromPoint&&(e.order.amountFromPoint=0,e.reCalcTotal()),void e.calculatePoints()});return function(a){return r.apply(this,arguments)}}();e.navCtrl.push("/contact",{callback:n,searchMode:!0})})()}showSearchStaff(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-staff");const n=function(){var i=(0,d.Z)(function*(a){const l=a;l&&(e.staffSelected=l,e.order.collaboratorId=l.id,e.checkPriceOnChangeCustomer(),e.checkDiscountOnChangeCustomer())});return function(l){return i.apply(this,arguments)}}();let r=-1;if(e.shifts&&e.shifts.length){const i=L(new Date).format("HH:mm:ss");for(const a of e.shifts)if(i>=a.startTime&&i<=a.endTime){r=a.id;break}}e.navCtrl.push("/staff",{callback:n,storeFilter:e.store?e.store.id:-1,shiftFilter:r,searchMode:!0})})()}ionViewLoaded(){this.barcodeFocus()}barcodeFocus(){!this.navCtrl.isNotCordova()||setTimeout(()=>{this.barcodeInput.setFocus()},600)}validate(){return this.contactSelected&&this.contactSelected.point&&this.pointPaymentConfig.allowPointPayment&&this.pointPaymentConfig.pointPaymentExchange&&this.contactSelected.buyCount>=this.pointPaymentConfig.pointPaymentAfterBuyCount&&this.order.pointAmount&&this.order.pointAmount>this.contactSelected.point?(alert(this.translateService.instant("order-add.poin-amount-limit-alert")),!1):!(!this.order.items||!this.order.items.length)||(alert(this.translateService.instant("order-add.no-items-alert")),!1)}save(){var e=this;return(0,d.Z)(function*(){if(e.saveDisabled||!e.validate())return;e.saveDisabled=!0;for(const r of e.order.items)delete r.quantity;e.order.itemsJson=JSON.stringify(e.order.items),e.order.promotionsJson=JSON.stringify(e.promotions),e.staffService.isStaff()&&(e.order.staffId=e.staffService.selectedStaff.id),e.order.paid&&e.order.paid<e.order.total&&(e.order.status=5);const n=yield e.navCtrl.loading();if(!e.contactSelected&&e.order&&e.order.contactName&&e.order.contactPhone){e.analyticsService.logEvent("order-add-new-contact");let r=null,i=null;const a=yield e.contactService.searchContactByPhone(e.order.contactPhone);a&&confirm(e.translateService.instant("order-add.contact-phone-duplicated",{name:a.fullName,phone:a.mobile}))?(r=a,i=a.id):(r=new Ct.r,x.W.copyFields(r,e.order,["staffId"],{fullName:"contactName",mobile:"contactPhone",address:"contactAddress"}),i=yield e.contactService.saveContact(r)),e.contactSelected=r,e.order.contactId=i}e.order.storeId=e.store?e.store.id:0,e.order.saveProductNotes=!0,e.order.lang=yield e.userService.getAttr("current-language"),e.orderService.saveOrder(e.order).then((0,d.Z)(function*(){e.analyticsService.logEvent("order-add-save-success");const r=[];if(e.contactSelected){const i=e.saveLastActive();r.push(i)}Promise.all(r).then((0,d.Z)(function*(){if(yield n.dismiss(),e.saveDisabled=!1,e.params&&e.params.convert){const i=e.params.convert;i.convertedOrderId=e.order.id,i.status=3,yield e.orderService.saveOnlineOrder(i),e.navCtrl.publish("reloadOnlineOrder",i),e.navCtrl.publish("reloadOnlineOrderList",null)}null!==e.order.paid&&e.order.paid<e.order.total&&e.isNew?yield e.confirmToCreateDebt():e.exitPage()}))})).catch(r=>{if(r&&r.error&&r.error.message){let i=r.error.message;r.error.note&&(i+="\n"+r.error.note.productName),alert(i)}})})()}confirmToCreateDebt(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("order-add.paid-is-smaller-than-total-warning"),buttons:[{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){const i=new Tt.T;x.W.copyFields(i,e.order,["contactId"],{orderId:"id"},{value:e.order.total-e.order.paid,note:e.translateService.instant("order-add.paid-is-smaller-note"),debtType:3}),yield e.debtService.saveDebt(i),e.exitPage()}),function(){return r.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{e.exitPage()}}]})).present()})()}saveLastActive(){return this.contactSelected.lastActive=A.C.toDbString(),this.contactSelected.lastAction="trade",this.contactService.saveContact(this.contactSelected).then(n=>(this.navCtrl.publish("reloadContactList"),this.navCtrl.publish("reloadContact",this.contactSelected),this.navCtrl.publish("reloadContactOrder",this.contactSelected.id),n))}showSearchMoneyAccount(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-money-account"),e.navCtrl.push("/money-account",{callback:r=>{const i=r;i&&(e.moneyAccountSelected=i,e.order.moneyAccountId=i.id)},searchMode:!0})})()}exitPage(){var e=this;return(0,d.Z)(function*(){yield e.navCtrl.popOnly(),e.navCtrl.publish("reloadOrderList"),e.navCtrl.publish("reloadOrder",e.order),e.order.contact&&e.contactSelected&&(e.navCtrl.publish("reloadContact",e.contactSelected),e.navCtrl.publish("reloadContactOrder",e.contactSelected.id)),e.order.tableId>0&&(e.navCtrl.publish("reloadTable",e.table),e.navCtrl.publish("reloadTableList")),e.isNew&&0===e.order.tableId&&(yield e.navCtrl.navigateForward("/order/detail",{id:e.order.id}))})()}removeStaff(){this.staffSelected=null,this.order.collaboratorId=0,this.order.staffId=0,this.checkDiscountOnChangeCustomer(),this.checkPriceOnChangeCustomer()}removeContact(){this.contactSelected=null,this.order.contactId=0,x.W.setNull(this.order,["contactName","contactPhone","contactAddress"]),this.checkDiscountOnChangeCustomer(),this.checkPriceOnChangeCustomer(),this.order.pointAmount=0,this.order.amountFromPoint&&(this.order.amountFromPoint=0,this.reCalcTotal())}dateFormat(e){return A.C.toUiLocalDateString(e)}productName(e,n){return x.W.productName(e,n)}selectAll(e){x.W.selectAll(e)}showQuoteSelector(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-quote");const n=function(){var r=(0,d.Z)(function*(i){if(i&&i.length){for(const a of i)e.order.items.unshift(a),e.reCalc(a);e.barcodeFocus()}});return function(a){return r.apply(this,arguments)}}();yield e.navCtrl.push("/order/quote-selector",{callback:n,contactId:e.contactSelected?e.contactSelected.id:null,staffId:e.staffSelected?e.staffSelected.id:null})})()}showProductSelector(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-product");const n=function(){var r=(0,d.Z)(function*(i){if(!i||!i.length)return;for(const l of e.order.items)l.isExpand=!1;const a=[];for(const l of i)a.push(l.id);e.tradeToCategories=yield e.tradeService.getCategoriesOfProducts(a);for(const l of i)e.addProductFromArr(l,e.tradeToCategories);e.applyItemTotal(),e.barcodeFocus()});return function(a){return r.apply(this,arguments)}}();yield e.navCtrl.push("/order/product-selector",{callback:n,contactId:e.contactSelected?e.contactSelected.id:null,staffId:e.staffSelected?e.staffSelected.id:null})})()}addProductFromArr(e,n){var r=this;return(0,d.Z)(function*(){if(!e)return;const i=new pt,a=[];if(n&&n.length)for(const u of n)u.tradeId==e.id&&a.push(u);x.W.copyObject(i,e,{productId:"id",productCode:"code",productName:"title",productAvatar:"avatarUrl"},{costPrice:e.costPrice?e.costPrice:null,discount:e.discount?e.discount:0,isExpand:!1,items:e.itemsJson?JSON.parse(e.itemsJson):[],materials:e.materials&&e.materials.length?e.materials:e.materialsJson?JSON.parse(e.materialsJson):e.materials,categories:a}),r.order.items.unshift(i),r.checkDiscountAndPrice(i);const l=r.translateService.instant("order-add.added-product",{product:x.W.productName(e.code,e.title)});r.presentToast(l)})()}checkPrice(e){let n=this.prices.find(r=>r.product&&r.product.id===e.productId&&this.contactSelected&&r.contact&&r.contact.id==this.contactSelected.id);return n||(n=this.prices.find(r=>r.product&&r.product.id===e.productId&&this.staffSelected&&r.staff&&r.staff.id==this.staffSelected.id&&!r.contact)),n||(n=this.prices.find(r=>r.product&&r.product.id===e.productId&&this.staffSelected&&r.isCollaboratorPrice&&!r.contact&&!r.staff)),n||(n=this.prices.find(r=>r.product&&r.product.id===e.productId&&!r.contact&&!r.staff&&!r.isCollaboratorPrice)),n?(n.orginalPrice=e.price,e.price=n.price,e.priceInfo=n,!0):!(!e.priceInfo||!(!this.contactSelected&&e.priceInfo.contact||!this.staffSelected&&e.priceInfo.staff||!this.staffSelected&&e.priceInfo.isCollaboratorPrice)||(e.price=e.priceInfo.orginalPrice,e.priceInfo=null,0))}checkDiscount(e){let n=this.discounts.find(r=>(r.product&&r.product.id===e.productId||r.category&&e.categories&&null!=e.categories.find(i=>i.categoryId==r.category.id))&&this.contactSelected&&r.contact&&r.contact.id==this.contactSelected.id);return n||(n=this.discounts.find(r=>(r.product&&r.product.id===e.productId||r.category&&e.categories&&null!=e.categories.find(i=>i.categoryId==r.category.id))&&this.staffSelected&&r.staff&&r.staff.id==this.staffSelected.id&&!r.contact)),n||(n=this.discounts.find(r=>(r.product&&r.product.id===e.productId||r.category&&e.categories&&null!=e.categories.find(i=>i.categoryId==r.category.id))&&this.staffSelected&&r.isCollaboratorPrice&&!r.contact&&!r.staff)),n||(n=this.discounts.find(r=>(r.product&&r.product.id===e.productId||r.category&&e.categories&&null!=e.categories.find(i=>i.categoryId==r.category.id))&&!r.contact&&!r.staff&&!r.isCollaboratorPrice)),n?!(n.conditionQuantity&&!(n.conditionQuantity&&e.count>=n.conditionQuantity)||(e.discount=this.calcDiscount(e,n),e.discountPercent=0!==n.type?n.discountValue:0,e.discountInfo=n,0)):!(!e.discountInfo||!(!this.contactSelected&&e.discountInfo.contact||!this.staffSelected&&e.discountInfo.staff||!this.staffSelected&&e.discountInfo.isCollaboratorPrice)||(e.discount=0,e.discountPercent=0,e.discountInfo=null,0))}checkDiscountAndPrice(e){this.checkDiscount(e),this.checkPrice(e),this.reCalc(e)}addPromotion(e){if(this.promotions.find(l=>l.id===e.id))return void alert(this.translateService.instant("order-add.promotion-added"));if(!e.isActive)return void alert(this.translateService.instant("order-add.promotion-is-not-activated"));const r=A.C.getMomentRefined(e.startDate).toDate(),i=A.C.getMomentRefined(e.endDate).toDate(),a=L().startOf("day").toDate();r>a||i<a?alert(this.translateService.instant("order-add.promotion-is-not-activated")):(this.promotions.unshift(e),this.applyItemTotal())}addProduct(e){var n=this;return(0,d.Z)(function*(){if(e){for(const _ of n.order.items)_.isExpand=!1;const r=n.order.items.findIndex(_=>!(_.productId!==e.id||_.attributes&&_.attributes.length||_.options&&_.options.length||_.typeOptions&&_.typeOptions.length||_.typeAttributes&&_.typeAttributes.length));if(r>=0){const _=n.order.items[r];_.isExpand=!0,_.count=1*_.count+1,n.checkDiscountAndPrice(_);const f=n.translateService.instant("order-add.qty-product",{product:_.productName,count:_.count+""}),S=e.count-_.count,U=n.translateService.instant("product-selector.quantity-left")+": "+S;return void n.presentToast(f+". "+U)}let i=null;if(e.fromUnit){const _=e.unitsJson?JSON.parse(e.unitsJson):null;if(_&&_.length)for(const f of _)if(f&&f.unit===e.fromUnit){i=f;break}}const a=new pt;n.tradeToCategories=yield n.tradeService.getCategoriesToTrade(e.id),x.W.copyFields(a,e,["isCombo","shopPrice"],{productId:"id",productCode:"code",productName:"title",productAvatar:"avatarUrl",promotion:"promotion"},{price:i?i.price:e.price,quantity:e.quantity?e.quantity:e.count,costPrice:e.costPrice?e.costPrice:null,discountPercent:0,basicUnit:i?e.unit:null,unitExchange:i?i.exchange:null,unit:i?i.unit:e.unit,count:1,isExpand:!1,items:e.itemsJson?JSON.parse(e.itemsJson):[],materials:e.materials&&e.materials.length?e.materials:e.materialsJson?JSON.parse(e.materialsJson):e.materials,categories:n.tradeToCategories}),n.order.items.unshift(a),n.checkDiscountAndPrice(a);const l=n.translateService.instant("order-add.added-product",{product:x.W.productName(e.code,e.title)});n.presentToast(l);const u=e.count-a.count,g=n.translateService.instant("product-selector.quantity-left")+": "+u;n.presentToast(l+". "+g),n.barcodeFocus()}})()}promotionCodeChanged(){var e=this;return(0,d.Z)(function*(){!e.promotionCode||e.promotionCode.length<5||(e.analyticsService.logEvent("order-add-barcode-entered"),e.promotionService.searchByQrCode(e.promotionCode).then(function(){var n=(0,d.Z)(function*(r){!r||(e.analyticsService.logEvent("order-add-barcode-entered-ok"),e.addPromotion(r),e.promotionCode="")});return function(r){return n.apply(this,arguments)}}()))})()}barcodeChanged(){var e=this;return(0,d.Z)(function*(){!e.barcode||e.barcode.length<5||(e.analyticsService.logEvent("order-add-barcode-entered"),e.productService.searchByBarcode(e.barcode).then(function(){var n=(0,d.Z)(function*(r){if(r){if(e.outStock&&r.count<=0)return e.analyticsService.logEvent("product-selector-outstock-alert"),void alert(e.translateService.instant("order-add.outstock-alert"));e.analyticsService.logEvent("order-add-barcode-entered-ok"),e.addProduct(r),e.barcode="",e.barcodeFocus()}});return function(r){return n.apply(this,arguments)}}()))})()}presentToast(e){var n=this;return(0,d.Z)(function*(){yield(yield n.toastCtrl.create({message:e,duration:3e3,position:"bottom",color:"danger"})).present()})()}removePromotion(e){var n=this;return(0,d.Z)(function*(){const r=n.promotions.findIndex(i=>i.id===e.id);r>=0&&n.promotions.splice(r,1),n.analyticsService.logEvent("order-add-remove-promotion"),n.applyItemTotal()})()}removeProduct(e){var n=this;return(0,d.Z)(function*(){if(e.promotion)return void n.removePromotionProduct(e.promotion,e);const r=n.order.items.findIndex(i=>i.productId===e.productId&&i.unit===e.unit);r>=0&&n.order.items.splice(r,1),n.analyticsService.logEvent("order-add-remove-item"),n.applyItemTotal()})()}getOptionPrices(e){return x.W.getOptionPrices(e)}reCalc(e){let n=0,r=0;if(e.options&&e.options.length)for(const g of e.options)n+=g.count*g.price,r+=g.costPrice?g.count*g.costPrice:0;const i=e.count*(e.price+n);e.total=i-(e.discount?0===e.discountType?1*e.discount:i*e.discount/100:0),e.totalCostPrice=e.count*((e.costPrice?e.costPrice:0)+r)||null,this.applyItemTotal()}changeCount(e){e.discountPercent&&(e.discount=e.price*e.count*e.discountPercent/100),this.reCalc(e)}applyItemTotal(){let e=0,n=0;for(const r of this.order.items)e+=1*r.total,n+=1*r.discount;this.totalProductAmount=e,this.order.totalPromotionDiscount=this.discountFromPromotions(),this.order.discount=1*n,this.discountPercent&&(this.order.discountOnTotal=e*this.discountPercent/100),this.order.discount+=this.order.discountOnTotal,e-=this.order.discountOnTotal,e-=this.order.totalPromotionDiscount,this.order.netValue=e,this.taxTypeChanged(),this.calculatePoints()}changeDiscountOnTotal(){this.applyItemTotal()}expand(e){var n=this;return(0,d.Z)(function*(){const r=!e.isExpand;for(const i of n.order.items)i.isExpand=!1;e.isExpand=r,r&&n.analyticsService.logEvent("order-add-expand")})()}discountFromPromotions(){if(!this.promotions||!this.promotions.length)return 0;let e=0;for(const n of this.promotions){let r=0;for(const a of this.order.items)n.category&&a.categories&&a.categories.length&&a.categories.findIndex(l=>l.categoryId===n.category.id),r+=a.total;let i=n.isPercent?n.promotionValue*r/100:n.promotionValue;i=i>=n.promotionMaxValue?n.promotionMaxValue:i,e+=i,n.discountValue=i,n.promotionProduct&&(n.promotionProduct.quantity=1,n.items=[n.promotionProduct],n.totalQuantity=1)}return e}reCalcTotal(e=!1){let n=0;this.contactSelected&&this.contactSelected.point&&this.pointPaymentConfig&&this.pointPaymentConfig.allowPointPayment&&this.order.pointAmount&&this.pointPaymentConfig.pointPaymentExchange&&(n=this.order.pointAmount*this.pointPaymentConfig.pointPaymentExchange,this.order.pointPaymentExchange=this.pointPaymentConfig.pointPaymentExchange);const r=1*this.order.netValue+1*this.order.tax+(this.order.shipCostOnCustomer?1*this.order.shippingFee:0)-n;this.order.amountFromPoint=n,this.order.total=r>=0?r:0,e&&(this.order.tax=0===this.order.taxType?0:this.taxTypeToRate()*(this.order.netValue-this.order.discountOnTotal)),this.order.paid=5===this.order.status?0:this.order.total,this.order.change=0}addPromotionProducts(e){var n=this;if(C.sum(this.order.items.filter(a=>a.promotion&&a.promotion.id===e.id).map(a=>a.count))>=e.maxPromotionQuantity)return void alert(this.translateService.instant("order-add.promotion-max-quantity-alert"));const i=function(){var a=(0,d.Z)(function*(l){const u=l;if(!u)return;if(e.promotionProduct&&e.promotionProduct.id!==u.id)return void alert(n.translateService.instant("order-add.product-not-match-promotion"));if(e.promotionCategory){const f=yield n.tradeService.getCategoriesToTrade(u.id);if(!f||!f.length)return void alert(n.translateService.instant("order-add.product-not-match-promotion"));if(!(f.findIndex(U=>U.categoryId===e.promotionCategory.id)>=0))return void alert(n.translateService.instant("order-add.product-not-match-promotion"))}if(n.order.items.find(f=>f.productId===u.id&&f.promotion&&f.promotion.id===e.id))return;const _=JSON.parse(JSON.stringify(u));_.quantity=_.count,_.price=0,_.promotion=e,yield n.addProduct(_),e.totalQuantity=C.sum(n.order.items.filter(f=>f.promotion&&f.promotion.id===e.id).map(f=>f.count))});return function(u){return a.apply(this,arguments)}}();this.navCtrl.push("/product",{callback:i,searchMode:!0,categorySelected:e.promotionCategory})}removePromotionProduct(e,n){const r=this.promotions.find(a=>a.id===e.id);if(!r)return;r.totalQuantity&&(r.totalQuantity=r.totalQuantity-n.count);const i=this.order.items.findIndex(a=>a.productId===n.productId&&a.unit===n.unit);i>=0&&this.order.items.splice(i,1)}reCalcChange(){const e=+this.order.paid-+this.order.total;this.order.change=e>0?e:0}scan(){var e=this;return(0,d.Z)(function*(){if(e.analyticsService.logEvent("order-add-scan-barcode"),e.navCtrl.isNotCordova()){const n=yield e.modalCtrl.create({component:z.k});yield n.present();const{data:r}=yield n.onDidDismiss();r&&r.barcode&&e.checkBarcodeScaned(r.barcode,!0)}else e.barcodeScanner.scan().then(n=>{!n||!n.text||e.checkBarcodeScaned(n.text,!1)})})()}scanQr(){var e=this;return(0,d.Z)(function*(){if(e.analyticsService.logEvent("order-add-scan-qr"),e.navCtrl.isNotCordova()){const n=yield e.modalCtrl.create({component:z.k});yield n.present();const{data:r}=yield n.onDidDismiss();r&&r.barcode&&e.checkQrCodeScaned(r.barcode,!0)}else e.barcodeScanner.scan().then(n=>{!n||!n.text||e.checkQrCodeScaned(n.text,!1)})})()}checkQrCodeScaned(e,n){var r=this;this.promotionService.searchByQrCode(e).then(function(){var i=(0,d.Z)(function*(a){!a||(r.analyticsService.logEvent("order-add-scan-qr-code-from-"+(n?"web":"mobile")+"-ok"),r.addPromotion(a))});return function(a){return i.apply(this,arguments)}}())}checkBarcodeScaned(e,n){var r=this;this.productService.searchByBarcode(e).then(function(){var i=(0,d.Z)(function*(a){if(a){if(r.outStock&&a.count<=0)return r.analyticsService.logEvent("order-add-outstock-alert"),void alert(r.translateService.instant("order-add.outstock-alert"));r.analyticsService.logEvent("order-add-scan-from-"+(n?"web":"mobile")+"-ok"),r.addProduct(a),r.barcodeFocus()}});return function(a){return i.apply(this,arguments)}}())}checkContactBarcodeScaned(e){var n=this;this.contactService.get(+e).then(function(){var r=(0,d.Z)(function*(i){!i||(n.analyticsService.logEvent("order-add-scan-contact-ok"),n.contactSelected=i)});return function(i){return r.apply(this,arguments)}}())}removeMoneyAccount(){this.moneyAccountSelected=null,this.order.moneyAccountId=0}increase(e){var n=this;return(0,d.Z)(function*(){if(!e.promotion)return n.outStock&&e.quantity-(e.basicUnit!==e.unit&&e.unitExchange?(e.count+1)*e.unitExchange:e.count+1)<=0&&!e.isService&&!e.isCombo?(n.analyticsService.logEvent("product-selector-outstock-alert"),void alert(n.translateService.instant("order-add.outstock-alert"))):(n.analyticsService.logEvent("order-add-increase"),e.count++,e.discountPercent&&(e.discount=e.price*e.count*e.discountPercent/100),n.reCalc(e),void n.barcodeFocus());n.increasePromotionProduct(e.promotion,e)})()}decrease(e){var n=this;return(0,d.Z)(function*(){e.promotion?n.decreasePromotionProduct(e.promotion,e):e&&0===e.count||(n.analyticsService.logEvent("order-add-decrease"),e.count--,e.discountPercent&&(e.discount=e.price*e.count*e.discountPercent/100),n.reCalc(e),n.barcodeFocus())})()}increasePromotionProduct(e,n){var r=this;return(0,d.Z)(function*(){if(C.sum(r.order.items.filter(l=>l.promotion&&l.promotion.id===e.id).map(l=>l.count))>=e.maxPromotionQuantity)return void alert(r.translateService.instant("order-add.promotion-max-quantity-alert"));const a=r.promotions.find(l=>l.id===e.id);!a||(a.totalQuantity++,n.count++)})()}decreasePromotionProduct(e,n){var r=this;return(0,d.Z)(function*(){const i=r.promotions.find(a=>a.id===e.id);!i||n&&0===n.count||(i.totalQuantity&&i.totalQuantity--,n.count--)})()}showOptions(e){var n=this;return(0,d.Z)(function*(){const r={};x.W.copyFields(r,e,["price","unit","count","options","total","attributes"],{id:"productId",code:"productCode",title:"productName",avatarUrl:"productAvatar"}),n.analyticsService.logEvent("order-add-show-options"),yield n.navCtrl.push("/order/option-selector",{callback:a=>{a&&(e.options=a.options,e.attributes=a.attributes,n.reCalc(e))},mainProduct:JSON.parse(JSON.stringify(r))})})()}getAttributesString(e){return x.W.getAttributesString(e)}hasOptionsOrAttributes(e){return x.W.hasOptionsOrAttributes(e)}goHelpPage(e){this.navCtrl.push("/help/"+e)}taxTypeToRate(){return 0===this.order.taxType?0:.05*((10!==this.order.taxType?this.order.taxType:.6)-1)+.1}taxTypeChanged(e=!1){var n=this;return(0,d.Z)(function*(){if(!n.noPrompt&&e&&(yield(yield n.alertCtrl.create({header:n.translateService.instant("common.confirm"),message:n.translateService.instant("order-add.save-tax-type-alert"),buttons:[{text:n.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(){yield n.storage.set("tax-type",n.order.taxType+"")}),function(){return i.apply(this,arguments)})},{text:n.translateService.instant("order-add.save-tax-type-only-one"),handler:()=>{}}]})).present(),n.analyticsService.logEvent("order-add-tax-type-changed")),0===n.order.taxType)return n.order.tax=0,void n.reCalcTotal();var i;n.order.tax=n.taxTypeToRate()*n.order.netValue,n.reCalcTotal()})()}openTaxType(){this.analyticsService.logEvent("order-add-tax-type-open"),this.selectTax.open()}changeOrderStatus(){this.order&&5===this.order.status&&(this.order.paid=0)}openProductDiscountPercent(e){var n=this;return(0,d.Z)(function*(){var i;yield(yield n.alertCtrl.create({message:n.translateService.instant("order-add.discount-percent-message"),inputs:[{name:"discountPercent",placeholder:n.translateService.instant("order-add.enter-discount-percent"),type:"number",min:0,max:100,value:e.discountPercent}],buttons:[{text:n.translateService.instant("order-add.remove-percent"),handler:()=>{e.discountPercent=0,e.discount=0,n.reCalc(e)}},{text:n.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(a){if(!a)return;const l=+a.discountPercent;l<0||l>100?alert(n.translateService.instant("order-add.discount-percent-not-valid")):(n.analyticsService.logEvent("order-add-change-discount-percent"),l&&(e.discountPercent=l,e.discount=e.price*e.count*l/100,n.reCalc(e)))}),function(l){return i.apply(this,arguments)})},{text:n.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}openDiscountPercent(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({message:e.translateService.instant("order-add.discount-percent-message"),inputs:[{name:"discountPercent",placeholder:e.translateService.instant("order-add.enter-discount-percent"),type:"number",min:0,max:100}],buttons:[{text:e.translateService.instant("order-add.remove-percent"),handler:()=>{e.discountPercent=0,e.applyItemTotal()}},{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(i){if(!i)return;const a=+i.discountPercent;a<0||a>100?alert(e.translateService.instant("order-add.discount-percent-not-valid")):(e.analyticsService.logEvent("order-add-change-discount-percent"),e.discountPercent=a,e.applyItemTotal())}),function(a){return r.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}getTypeAttributesString(e){return x.W.getTypeAttributesString(e)}showTypes(e){var n=this;return(0,d.Z)(function*(){n.analyticsService.logEvent("order-add-show-types");const r={};x.W.copyFields(r,e,["price","unit","count","options","total","types","typeOptions","typeAttributes","initPrice"],{id:"productId",code:"productCode",title:"productName",avatarUrl:"productAvatar"});const a=JSON.parse(JSON.stringify(r));a.price=r.initPrice?r.initPrice:r.price,a.changedPrice=0,yield n.navCtrl.push("/product/type-selector",{callback:l=>{l&&(x.W.copyFields(e,l,["types","initPrice"],null,{typeOptions:n.getTypeOptions(l.types),typeAttributes:n.getTypeAttributesString(e),price:l.price?l.price:e.initPrice}),n.reCalc(e))},mainProduct:a})})()}getTypeOptions(e){return x.W.getTypeOptions(e)}hideNoProductDescription(){var e=this;return(0,d.Z)(function*(){e.isHideNoProductDescription=!0,yield e.storage.set("hide-no-product","1")})()}changePhone(){var e=this;return(0,d.Z)(function*(){if(e.contactSelected||!e.order.contactPhone)return;const n=yield e.contactService.searchContactByPhone(e.order.contactPhone);if(n){const r=e.translateService.instant("order-add.found-phone",{contact:n.fullName,mobile:n.mobile});confirm(r)&&(e.contactSelected=n,e.order.contactId=n.id,e.order.contactName=n?n.fullName:null,e.order.contactPhone=n?n.mobile:null,e.order.contactAddress=n?n.address:null)}})()}spendAll(){!this.contactSelected||!this.contactSelected.point||(this.order.pointAmount=this.contactSelected.point)}clearAll(){this.order.pointAmount=null}changeUsePointPayment(){x.W.setZero(this.order,["amountFromPoint","pointPaymentExchange","pointAmount"]),this.reCalcTotal()}scanContact(){var e=this;return(0,d.Z)(function*(){if(e.analyticsService.logEvent("order-add-scan-contact-barcode"),e.navCtrl.isNotCordova()){const n=yield e.modalCtrl.create({component:z.k});yield n.present();const{data:r}=yield n.onDidDismiss();r&&r.barcode&&e.checkContactBarcodeScaned(r.barcode)}else e.barcodeScanner.scan().then(n=>{!n||!n.text||e.checkContactBarcodeScaned(n.text)})})()}selectTable(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-table");const n=function(){var r=(0,d.Z)(function*(i){!i||(e.table=i,e.order.tableId=i.id,e.order.status=0)});return function(a){return r.apply(this,arguments)}}();e.navCtrl.push("/table",{callback:n,searchMode:!0})})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(R.m),t.Y36(ot.y),t.Y36(X.M),t.Y36(yt.q),t.Y36(vt.D),t.Y36(j.x),t.Y36(St.H),t.Y36(bt.y),t.Y36(tt.p),t.Y36(ut.E),t.Y36(b.sK),t.Y36(D.K),t.Y36(s.yF),t.Y36(rt.X),t.Y36(s.Br),t.Y36(s.IN),t.Y36(k.G),t.Y36(it.V),t.Y36(K.d),t.Y36(I.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-add"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Ot,5),t.Gf(wt,7)),2&e){let r;t.iGM(r=t.CRH())&&(n.selectTax=r.first),t.iGM(r=t.CRH())&&(n.barcodeInput=r.first)}},decls:94,vars:70,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["color","primary",3,"click"],[3,"name"],["color","primary",3,"disabled","click"],["name","checkmark"],[2,"padding","0 !important","margin","0 !important"],["size","12","size-sm",""],["color","primary"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["position","stacked","color","primary"],["type","datetime-local","pickerId","orderAddPicker","min","2015-01-01","max","2025-12-31",3,"date","dateChange"],[4,"ngIf"],["color","light",1,"ion-no-padding",2,"padding","5px 5px 0 5px"],[2,"font-weight","normal","font-size","0.8em"],["color","light",1,"ion-no-padding"],["fill","clear","color","primary",3,"click"],["name","add"],["name","barcode"],["fill","clear","color","tertiary",3,"click"],["clearInput","","autofocus","true","type","text",2,"font-size","0.85em","--padding-start","5px",3,"placeholder","ngModel","ngModelChange"],["barcodeInput",""],["color","light",1,"ion-no-padding","ion-text-wrap",2,"--padding-start","5px",3,"hidden"],["style","padding-top: 5px; padding-bottom: 5px;",3,"innerHTML",4,"ngIf"],["size","small","fill","clear","slot","end",3,"click",4,"ngIf"],["style","margin-top: 10px;",4,"ngIf"],[1,"ion-text-wrap",3,"ngModel","scrollable","ngModelChange"],["value","payment",1,"ion-text-wrap",2,"font-size","1em","padding","3px"],["value","contact",1,"ion-text-wrap",2,"font-size","1em","padding","3px"],["value","note",1,"ion-text-wrap",2,"font-size","1em","padding","3px"],["value","ship",1,"ion-text-wrap",2,"font-size","1em","padding","3px"],["class","ion-no-padding","style","padding-top: 0px !important; padding-bottom: 0px !important; ",4,"ngIf"],["style","padding-top: 0px !important; padding-bottom: 0px !important; ",4,"ngIf"],["lines","none",4,"ngIf"],["lines","none"],["button","","detail","",3,"click"],["name","help","slot","start"],[1,"ion-padding",2,"padding-top","0 !important"],["position","stacked","color","primary",1,"ion-text-wrap"],["color","dark","size","small",3,"click",4,"ngIf"],["size","small",3,"click",4,"ngIf"],["color","dark","size","small",3,"click"],["size","small",3,"click"],["slot","icon-only","name","close"],["lines","none","color","light",2,"border-radius","10px","border-width","1px","border-color","#ccc","box-shadow","rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px",3,"click"],["class","ion-text-wrap","color","primary",4,"ngIf"],["color","primary",1,"ion-text-wrap"],[2,"white-space","pre-wrap"],["style","white-space: pre-wrap;",4,"ngIf"],[4,"ngFor","ngForOf"],["text-wrap","","lines","none","color","light",1,"ion-no-padding",2,"--min-height","0","--padding-start","5px"],["size","xs",3,"icon"],[2,"padding","0","margin","0",3,"click"],["slot","end",2,"padding","0","margin","0"],["fill","clear","size","large",2,"padding","0","margin","0",3,"click"],["slot","icon-only","size","large","name","remove"],["fill","clear","size","large",3,"click"],["slot","icon-only","size","large","name","add"],["fill","clear","size","small","color","medium",3,"click"],["slot","icon-only","size","small","name","options"],["slot","icon-only","size","small","name","cog"],["text-wrap","","color","light",2,"--min-height","0",3,"lines"],["color","danger",4,"ngIf"],["slot","end",2,"--padding-bottom","0","--padding-top","0","height","20px","--padding-start","0","--padding-end","0"],["color","danger","fill","clear","size","small",2,"--padding-bottom","0","--padding-top","0","height","20px","--padding-start","0","--padding-end","0",3,"click"],["slot","icon-only","size","small","name","close"],["color","light",2,"padding-left","15px","padding-right","15px","margin","0",3,"hidden"],[3,"disabled","clear","placeholder","moneyValue","moneyValueChange"],["clearInput","","type","number",3,"placeholder","ngModel","ngModelChange","focus"],[3,"clear","placeholder","moneyValue","moneyValueChange"],[1,"ion-text-nowrap",2,"margin-left","3px","margin-top","3px","font-size","0.7em","background-color","#3880ff","color","white","padding","3px","border-radius","5px","font-weight","bold",3,"click"],[2,"padding","0","margin","0","font-size","0.68em"],["style","padding: 0; margin: 0; font-size: 0.68em;",4,"ngFor","ngForOf"],["color","danger"],["lines","inset","color","light",2,"--min-height","0"],[1,"ion-text-wrap",2,"font-size","0.8em"],["style","padding: 0; margin: 0",4,"ngIf"],[2,"padding","0","margin","0"],["style","padding: 0; margin: 0",4,"ngFor","ngForOf"],[2,"padding-top","5px","padding-bottom","5px",3,"innerHTML"],["size","small","fill","clear","slot","end",3,"click"],[2,"margin-top","10px"],[3,"click"],["name","qr-code"],["color","light",1,"ion-no-padding",2,"--padding-start","5px"],[1,"ion-text-wrap",2,"font-size","1em"],["style","font-size: 1em",4,"ngIf"],["color","light","class","ion-no-padding","style","--padding-start: 5px;",4,"ngIf"],[2,"font-size","1em"],["class","ion-text-wrap","style","font-size: 1em",4,"ngIf"],["color","primary","fill","clear","size","small",2,"--padding-bottom","0","--padding-top","0","height","20px","--padding-start","0","--padding-end","0",3,"click"],["size","small","name","add"],[1,"ion-no-padding",2,"padding-top","0px !important","padding-bottom","0px !important"],["slot","end","ion-text","","color","dark",3,"click",4,"ngIf"],["slot","end","color","secondary",3,"click",4,"ngIf"],["slot","end",3,"click",4,"ngIf"],["slot","end","fill","clear",3,"click",4,"ngIf"],["lines","none","style","--padding-top: 5px; --min-height: 0;",4,"ngIf"],["slot","end","ion-text","","color","dark",3,"click"],["slot","end","color","secondary",3,"click"],["slot","end",3,"click"],["slot","end","fill","clear",3,"click"],["lines","none",2,"--padding-top","5px","--min-height","0"],["color","danger",2,"font-size","0.8em"],[2,"padding-top","0px !important","padding-bottom","0px !important"],["clearInput","","type","text","placeholder","Vd: John London",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],["debounce","700","clearInput","","type","tel","placeholder","Vd: 09123456789",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],["clearInput","","type","text","placeholder","Vd: London, UK",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],[2,"padding-top","0px !important"],["clearInput","",2,"background-color","#efefef","border-radius","5px","color","#000",3,"placeholder","ngModel","ngModelChange"],[3,"disabled","ngModel","ngModelChange"],[3,"value"],["position","stacked","color","danger"],[3,"placeholder","moneyValue","moneyValueChange"],[1,"ion-float-right",2,"font-style","italic","font-size","0.8em"],["size","4"],["position","stacked","color","dark",2,"font-weight","bold","font-size","0.8em"],[3,"moneyValue","disabled","moneyValueChange"],["position","stacked","color","primary",2,"font-weight","bold","font-size","0.8em"],[3,"ngModel","ngModelChange","ionChange"],["size","8"],[1,"ion-no-padding"],["size","9",1,"ion-no-padding"],["size","3",1,"ion-no-padding"],["position","stacked","color","secondary"],[2,"margin-left","3px","margin-top","3px","font-size","0.5em","background-color","#efefef","color","#886aea","padding","3px","border-radius","5px","font-weight","bold",3,"hidden","ngModel","ionChange","ngModelChange"],["selectTax",""],["position","stacked","color","warning"],["style","font-size: 0.65em; padding: 0; margin: 0",4,"ngIf"],[3,"disabled","moneyValue","moneyValueChange"],[2,"font-size","0.8em"],["clearInput","","type","number","type","text",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange","ionChange"],["color","secondary","size","small",3,"click"],[2,"font-size","0.65em","padding","0","margin","0"],["clearInput","","type","text","placeholder","Eg: SHIP0123",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],["clearInput","","type","text","placeholder","Eg: VN Post",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],["clearInput","","type","text","placeholder","Eg: John",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],["clearInput","","type","tel","placeholder","Eg: 0123456888",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"],["clearInput","","type","text","placeholder","Eg: London, UK",2,"background-color","#efefef","border-radius","5px","color","#000",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",2)(8,"ion-button",3),t.NdJ("click",function(){return n.expandCollapse()}),t._UZ(9,"ion-icon",4),t.qZA(),t.TgZ(10,"ion-button",5),t.NdJ("click",function(){return n.save()}),t._UZ(11,"ion-icon",6),t._uU(12),t.ALo(13,"translate"),t.qZA()()()(),t.TgZ(14,"ion-content")(15,"ion-grid",7)(16,"ion-row")(17,"ion-col",8)(18,"ion-grid")(19,"ion-row")(20,"ion-col")(21,"ion-label",9),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"ion-input",10),t.NdJ("ngModelChange",function(i){return n.order.orderCode=i}),t.qZA()(),t.TgZ(25,"ion-col")(26,"ion-label",11),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div")(30,"date-picker",12),t.NdJ("dateChange",function(i){return n.order.createdAt=i}),t.qZA()()()(),t.TgZ(31,"ion-row"),t.YNc(32,Jt,7,6,"ion-col",13),t.YNc(33,Pt,4,2,"ion-col",13),t.qZA()(),t.TgZ(34,"ion-list")(35,"ion-item-divider",14)(36,"ion-label"),t._uU(37),t.ALo(38,"translate"),t.TgZ(39,"p",15),t._uU(40),t.ALo(41,"translate"),t.qZA()()(),t.TgZ(42,"ion-item",16)(43,"ion-buttons")(44,"ion-button",17),t.NdJ("click",function(){return n.showProductSelector()}),t._UZ(45,"ion-icon",18),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"ion-button",17),t.NdJ("click",function(){return n.scan()}),t._UZ(49,"ion-icon",19),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"ion-button",20),t.NdJ("click",function(){return n.showQuoteSelector()}),t._UZ(53,"ion-icon",18),t._uU(54),t.ALo(55,"translate"),t.qZA()()(),t.TgZ(56,"ion-item",16)(57,"ion-input",21,22),t.NdJ("ngModelChange",function(i){return n.barcode=i})("ngModelChange",function(){return n.barcodeChanged()}),t.ALo(59,"translate"),t.ALo(60,"translate"),t.qZA()(),t.YNc(61,Rt,2,1,"ng-container",13),t.TgZ(62,"ion-item",23),t.YNc(63,Xt,2,3,"div",24),t.YNc(64,te,2,3,"div",24),t.YNc(65,ee,2,0,"ion-button",25),t.qZA()(),t.YNc(66,le,23,14,"ion-list",26),t.qZA(),t.TgZ(67,"ion-col",8)(68,"ion-segment",27),t.NdJ("ngModelChange",function(i){return n.tab=i}),t.TgZ(69,"ion-segment-button",28),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"ion-segment-button",29),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"ion-segment-button",30),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"ion-segment-button",31),t._uU(79),t.ALo(80,"translate"),t.qZA()(),t.YNc(81,me,10,8,"ion-list",32),t.YNc(82,fe,18,12,"ion-grid",33),t.YNc(83,xe,6,4,"ion-list",34),t.YNc(84,Oe,61,67,"ion-list",34),t.YNc(85,we,30,20,"ion-list",34),t.qZA()()(),t.TgZ(86,"ion-list",35)(87,"ion-item",36),t.NdJ("click",function(){return n.goHelpPage("order")}),t._UZ(88,"ion-icon",37),t.TgZ(89,"ion-label",9),t._uU(90),t.ALo(91,"translate"),t.qZA()()(),t.TgZ(92,"div",38),t._UZ(93,"support"),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,38,"order-add.title")),t.xp6(4),t.Q6J("name",n.isCollapsed?"expand":"contract-outline"),t.xp6(1),t.Q6J("disabled",n.saveDisabled),t.xp6(2),t.hij(" \xa0",t.lcZ(13,40,"action.save")," "),t.xp6(2),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(8),t.hij("",t.lcZ(23,42,"order-add.order-code")," "),t.xp6(2),t.Q6J("ngModel",n.order.orderCode),t.xp6(3),t.hij("",t.lcZ(28,44,"order-add.order-date")," "),t.xp6(3),t.Q6J("date",n.order.createdAt),t.xp6(2),t.Q6J("ngIf",null===n.staffService.selectedStaff||n.staffService.selectedStaff.hasFullAccess),t.xp6(1),t.Q6J("ngIf",!n.hideTablesFunction),t.xp6(4),t.hij(" ",t.lcZ(38,46,"order-add.product")," "),t.xp6(3),t.hij(" ",t.lcZ(41,48,"order-add.product-description")," "),t.xp6(6),t.hij(" \xa0",t.lcZ(47,50,"order-add.add-manual")," "),t.xp6(4),t.hij(" \xa0",t.lcZ(51,52,"order-add.mobile-scan")," "),t.xp6(4),t.hij(" \xa0",t.lcZ(55,54,"order-add.from-quotes")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(59,56,"order-add.enter-barcode"),": ",t.lcZ(60,58,"order-add.enter-barcode-placeholder"),""),t.Q6J("ngModel",n.barcode),t.xp6(4),t.Q6J("ngIf",n.order.items&&n.order.items.length),t.xp6(1),t.Q6J("hidden",n.order.items&&n.order.items.length>0),t.xp6(1),t.Q6J("ngIf",!n.isHideNoProductDescription),t.xp6(1),t.Q6J("ngIf",n.isHideNoProductDescription),t.xp6(1),t.Q6J("ngIf",!n.isHideNoProductDescription),t.xp6(1),t.Q6J("ngIf",!n.hidePromotionFunction),t.xp6(2),t.Q6J("ngModel",n.tab)("scrollable",!0),t.xp6(2),t.hij(" ",t.lcZ(71,60,"order-add.payment")," "),t.xp6(3),t.hij(" ",t.lcZ(74,62,"order-add.contact-info")," "),t.xp6(3),t.hij(" ",t.lcZ(77,64,"order-add.note")," "),t.xp6(3),t.hij(" ",t.lcZ(80,66,"order-add.ship-info")," "),t.xp6(2),t.Q6J("ngIf","contact"===n.tab),t.xp6(1),t.Q6J("ngIf",!n.isCollapsed&&"contact"===n.tab),t.xp6(1),t.Q6J("ngIf",!n.isCollapsed&&"note"===n.tab),t.xp6(1),t.Q6J("ngIf","payment"===n.tab),t.xp6(1),t.Q6J("ngIf","ship"===n.tab),t.xp6(5),t.hij(" ",t.lcZ(91,68,"help-order.title")," "))},dependencies:[y.sg,y.O5,w.JJ,w.On,s.oU,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.pK,s.Ie,s.rH,s.Q$,s.q_,s.Nd,s.cJ,s.GO,s.t9,s.n0,s.yW,s.g2,s.wd,s.ho,s.sr,s.w,s.as,s.QI,s.j9,s.cs,gt.Y,mt.F,qt.L,W.BN,y.H9,b.X$],encapsulation:2}),o})();var V=h(7060);function Le(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",7)(1,"ion-label",8),t._uU(2),t.qZA(),t.TgZ(3,"ion-buttons")(4,"ion-button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exitStore())}),t._UZ(5,"ion-icon",10),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.checkStore),t.xp6(4),t.hij(" ",t.lcZ(7,2,"store.exit-store")," ")}}function Ne(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",11),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.lnq("",t.lcZ(3,3,"order-export.order-selected"),": ",e.ordersInput.length," ",t.lcZ(4,5,"order.order(s)"),"")}}function Je(o,c){1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",11),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij("",t.lcZ(3,1,"order-export.select-date-range"),":"))}function ke(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"common.from")," ",e.dateFormat(e.dateFrom)," ",t.lcZ(3,6,"common.to")," ",e.dateFormat(e.dateTo),"")}}function Ie(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",8),t.YNc(2,ke,4,8,"span",3),t.qZA(),t.TgZ(3,"ion-button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectDateRange())}),t._UZ(4,"ion-icon",19),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",""!=e.dateFrom||""!=e.dateTo)}}function Qe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",20),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showSearchContact())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.contactSelected.fullName," ")}}function Pe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.scanContact())}),t._UZ(1,"ion-icon",22),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.hij(" \xa0",t.lcZ(3,1,"order-add.mobile-scan")," "))}function Ee(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showSearchContact())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"trade-add.select-contact")," "))}function Me(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.removeContact())}),t._UZ(1,"ion-icon",25),t.qZA()}}function Ye(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",20),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.showSearchStaff())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.selectedStaff.name," ")}}function Fe(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.showSearchStaff())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.select-collaborator")," "))}function je(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.removeStaff())}),t._UZ(1,"ion-icon",25),t.qZA()}}function De(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",11),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ye,2,1,"ion-button",14),t.YNc(5,Fe,3,3,"ion-button",16),t.YNc(6,je,2,0,"ion-button",17),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,"order-add.collaborator-info")),t.xp6(2),t.Q6J("ngIf",e.selectedStaff&&e.selectedStaff.id>0),t.xp6(1),t.Q6J("ngIf",!e.selectedStaff||0==e.selectedStaff.id),t.xp6(1),t.Q6J("ngIf",e.selectedStaff&&e.selectedStaff.id>0)}}function Ge(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list"),t.YNc(1,Ne,5,7,"ion-item",3),t.YNc(2,Je,4,3,"ion-item",3),t.YNc(3,Ie,5,1,"ion-item",3),t.TgZ(4,"ion-item")(5,"ion-label",11),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"ion-item")(9,"ion-select",12),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.reportType=r)}),t.TgZ(10,"ion-select-option",13),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"ion-select-option",13),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"ion-select-option",13),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"ion-select-option",13),t._uU(20),t.ALo(21,"translate"),t.qZA()()(),t.TgZ(22,"ion-item")(23,"ion-text",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.YNc(26,Qe,2,1,"ion-button",14),t.YNc(27,Pe,4,3,"ion-button",15),t.YNc(28,Ee,3,3,"ion-button",16),t.YNc(29,Me,2,0,"ion-button",17),t.qZA(),t.YNc(30,De,7,6,"ion-item",3),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.ordersInput&&e.ordersInput.length),t.xp6(1),t.Q6J("ngIf",!e.ordersInput||!e.ordersInput.length),t.xp6(1),t.Q6J("ngIf",!e.ordersInput||!e.ordersInput.length),t.xp6(3),t.hij("",t.lcZ(7,19,"order-export.select-report-type"),":"),t.xp6(3),t.Q6J("ngModel",e.reportType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(12,21,"order-export.report-type-by-order")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(15,23,"order-export.report-type-by-product")),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.Oqu(t.lcZ(18,25,"order-export.report-type-by-customer")),t.xp6(2),t.Q6J("value",3),t.xp6(1),t.Oqu(t.lcZ(21,27,"order-export.report-type-by-staff")),t.xp6(4),t.Oqu(t.lcZ(25,29,"order-add.contact-info")),t.xp6(2),t.Q6J("ngIf",e.contactSelected&&e.contactSelected.id>0),t.xp6(1),t.Q6J("ngIf",!e.contactSelected||0===e.contactSelected.id),t.xp6(1),t.Q6J("ngIf",!e.contactSelected||0===e.contactSelected.id),t.xp6(1),t.Q6J("ngIf",e.contactSelected&&e.contactSelected.id>0),t.xp6(1),t.Q6J("ngIf",(!e.staffService.isStaff()||e.staffService.selectedStaff.hasFullAccess)&&(!e.ordersInput||!e.ordersInput.length))}}function He(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-button",26),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.generate())}),t._UZ(4,"ion-icon",19),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"ion-col")(8,"ion-button",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.export())}),t._UZ(9,"fa-icon",28),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()}2&o&&(t.xp6(5),t.hij(" \xa0",t.lcZ(6,2,"order-export.generate")," "),t.xp6(5),t.hij(" \xa0",t.lcZ(11,4,"order-export.export")," "))}function Ke(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-button",26),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.resetReport())}),t._UZ(4,"ion-icon",29),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"ion-col")(8,"ion-button",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.export())}),t._UZ(9,"fa-icon",28),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()}2&o&&(t.xp6(5),t.hij(" \xa0",t.lcZ(6,2,"order-export.change")," "),t.xp6(5),t.hij(" \xa0",t.lcZ(11,4,"order-export.export")," "))}function Be(o,c){if(1&o&&(t.TgZ(0,"ion-col",31)(1,"ion-text"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,":"),t._UZ(5,"br"),t.TgZ(6,"ion-text",11),t._uU(7),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"common.from")),t.xp6(5),t.hij(" ",e.dateFormat(e.dateFrom)," ")}}function $e(o,c){if(1&o&&(t.TgZ(0,"ion-col",31)(1,"ion-text"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,":"),t._UZ(5,"br"),t.TgZ(6,"ion-text",11),t._uU(7),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"common.to")),t.xp6(5),t.hij(" ",e.dateFormat(e.dateTo)," ")}}function ze(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("/ ",e.report.totalProducts," ",t.lcZ(2,2,"chart.product(s)"),"")}}function Ve(o,c){if(1&o&&(t.TgZ(0,"ion-col",31),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.TgZ(4,"ion-text"),t._uU(5),t.YNc(6,ze,3,4,"span",3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,3,"order-export.total-quantity"),":"),t.xp6(4),t.hij(" ",e.report.totalQuantity," "),t.xp6(1),t.Q6J("ngIf",e.report.totalProducts)}}function We(o,c){if(1&o&&(t.TgZ(0,"ion-col",31),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.TgZ(4,"ion-text"),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.collaborator-info"),":"),t.xp6(4),t.Oqu(e.selectedStaff.name)}}const m=function(o,c,e){return[o,c,"symbol","1.0-2",e]};function Re(o,c){if(1&o&&(t.TgZ(0,"ion-item",8)(1,"ion-grid")(2,"ion-row"),t.YNc(3,Be,8,4,"ion-col",30),t.YNc(4,$e,8,4,"ion-col",30),t.TgZ(5,"ion-col")(6,"ion-text"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,":"),t._UZ(10,"br"),t.TgZ(11,"ion-text",11),t._uU(12),t.qZA()()(),t.TgZ(13,"ion-row")(14,"ion-col",31)(15,"ion-text",32),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._uU(18,":"),t._UZ(19,"br"),t.TgZ(20,"ion-text",33),t._uU(21),t.ALo(22,"currency"),t.qZA()(),t.TgZ(23,"ion-col",31),t._uU(24),t.ALo(25,"translate"),t._UZ(26,"br"),t.TgZ(27,"ion-text",33),t._uU(28),t.ALo(29,"currency"),t.qZA()(),t.TgZ(30,"ion-col",31),t._uU(31),t.ALo(32,"translate"),t._UZ(33,"br"),t.TgZ(34,"ion-text",33),t._uU(35),t.ALo(36,"currency"),t.qZA()(),t.YNc(37,Ve,7,5,"ion-col",30),t.TgZ(38,"ion-col",31),t._uU(39),t.ALo(40,"translate"),t._UZ(41,"br"),t.TgZ(42,"ion-text",33),t._uU(43),t.ALo(44,"currency"),t.qZA()(),t.TgZ(45,"ion-col",31),t._uU(46),t.ALo(47,"translate"),t._UZ(48,"br"),t.TgZ(49,"ion-text",33),t._uU(50),t.ALo(51,"currency"),t.qZA()(),t.TgZ(52,"ion-col",31),t._uU(53),t.ALo(54,"translate"),t._UZ(55,"br"),t.TgZ(56,"ion-text",33),t._uU(57),t.ALo(58,"currency"),t.qZA()(),t.TgZ(59,"ion-col",31),t._uU(60),t.ALo(61,"translate"),t._UZ(62,"br"),t.TgZ(63,"ion-text",33),t._uU(64),t.ALo(65,"currency"),t.qZA()(),t.YNc(66,We,6,4,"ion-col",30),t.qZA()()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.ordersInput||!e.ordersInput.length),t.xp6(1),t.Q6J("ngIf",!e.ordersInput||!e.ordersInput.length),t.xp6(3),t.Oqu(t.lcZ(8,27,"order-export.report-type")),t.xp6(5),t.hij(" ",e.reportName(),""),t.xp6(4),t.Oqu(t.lcZ(17,29,"common.total")),t.xp6(4),t.s9C("color",e.report.total>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(22,31,t.kEZ(85,m,e.report.total,e.currency,e.translateService.currentLang))," "),t.xp6(3),t.hij(" ",t.lcZ(25,37,"order-export.total-no-vat"),":"),t.xp6(3),t.s9C("color",e.report.totalNoVAT>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(29,39,t.kEZ(89,m,e.report.totalNoVAT,e.currency,e.translateService.currentLang))," "),t.xp6(3),t.hij(" ",t.lcZ(32,45,"order-export.total-vat"),":"),t.xp6(3),t.s9C("color",e.report.totalVAT>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(36,47,t.kEZ(93,m,e.report.totalVAT,e.currency,e.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.report.totalQuantity),t.xp6(2),t.hij(" ",t.lcZ(40,53,"order-export.total-shipping"),":"),t.xp6(3),t.s9C("color",e.report.totalShip>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(44,55,t.kEZ(97,m,e.report.totalShip,e.currency,e.translateService.currentLang))," "),t.xp6(3),t.hij(" ",t.lcZ(47,61,"order-export.total-discount"),":"),t.xp6(3),t.s9C("color",e.report.totalDiscount>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(51,63,t.kEZ(101,m,e.report.totalDiscount,e.currency,e.translateService.currentLang))," "),t.xp6(3),t.hij(" ",t.lcZ(54,69,"order-export.total-cost"),":"),t.xp6(3),t.s9C("color",e.report.totalCost>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(58,71,t.kEZ(105,m,e.report.totalCost,e.currency,e.translateService.currentLang))," "),t.xp6(3),t.hij(" ",t.lcZ(61,77,"order-export.total-revenue"),":"),t.xp6(3),t.s9C("color",e.report.totalRevenue>=0?"secondary":"danger"),t.xp6(1),t.hij(" ",t.G7q(65,79,t.kEZ(109,m,e.report.totalRevenue,e.currency,e.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.selectedStaff)}}function Xe(o,c){1&o&&(t.TgZ(0,"ion-text",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"order-detail.status-draft")))}function tn(o,c){1&o&&(t.TgZ(0,"ion-text",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-inprogress")," "))}function en(o,c){1&o&&(t.TgZ(0,"ion-text",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-shipping")," "))}function nn(o,c){1&o&&(t.TgZ(0,"ion-text",11),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-done")," "))}function on(o,c){1&o&&(t.TgZ(0,"ion-text",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-cancel")," "))}function rn(o,c){1&o&&(t.TgZ(0,"ion-text",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-has-debt")," "))}function cn(o,c){1&o&&(t.TgZ(0,"ion-text",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-shipping-has-debt")," "))}function an(o,c){1&o&&(t.TgZ(0,"ion-text",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"order-detail.status-deposit")," "))}function sn(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.contact," ")}}function ln(o,c){if(1&o&&(t.TgZ(0,"p")(1,"i",42),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",t.lcZ(3,2,"trade.staff")," ",e.staff,"")}}function dn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectOrder(i.id))}),t.TgZ(1,"ion-label",8)(2,"strong"),t._uU(3),t.qZA(),t._uU(4," - "),t.YNc(5,Xe,3,3,"ion-text",36),t.YNc(6,tn,3,3,"ion-text",37),t.YNc(7,en,3,3,"ion-text",37),t.YNc(8,nn,3,3,"ion-text",38),t.YNc(9,on,3,3,"ion-text",39),t.YNc(10,rn,3,3,"ion-text",39),t.YNc(11,cn,3,3,"ion-text",39),t.YNc(12,an,3,3,"ion-text",37),t._uU(13," - "),t.TgZ(14,"ion-text",11),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"div"),t._uU(18),t.ALo(19,"translate"),t.ALo(20,"currency"),t.ALo(21,"translate"),t.ALo(22,"currency"),t.qZA(),t.TgZ(23,"div"),t._uU(24),t.ALo(25,"translate"),t.ALo(26,"currency"),t.ALo(27,"translate"),t.ALo(28,"currency"),t.qZA(),t.TgZ(29,"div"),t._uU(30),t.ALo(31,"translate"),t.ALo(32,"currency"),t.ALo(33,"translate"),t.ALo(34,"currency"),t.qZA(),t.YNc(35,sn,2,1,"p",3),t.TgZ(36,"p"),t._uU(37),t.qZA(),t.YNc(38,ln,4,4,"p",3),t.qZA()()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(3),t.hij("#",e.code,""),t.xp6(2),t.Q6J("ngIf",0==e.status),t.xp6(1),t.Q6J("ngIf",1==e.status),t.xp6(1),t.Q6J("ngIf",2==e.status),t.xp6(1),t.Q6J("ngIf",3==e.status),t.xp6(1),t.Q6J("ngIf",4==e.status),t.xp6(1),t.Q6J("ngIf",5==e.status),t.xp6(1),t.Q6J("ngIf",6==e.status),t.xp6(1),t.Q6J("ngIf",7==e.status),t.xp6(3),t.Oqu(t.G7q(16,25,t.kEZ(79,m,e.total,n.currency,n.translateService.currentLang))),t.xp6(3),t.HOy(" ",t.lcZ(19,31,"order-export.total-no-vat"),": ",t.G7q(20,33,t.kEZ(83,m,e.netValue,n.currency,n.translateService.currentLang))," - ",t.lcZ(21,39,"order-export.total-vat"),": ",t.G7q(22,41,t.kEZ(87,m,e.tax,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.HOy(" ",t.lcZ(25,47,"order-export.total-discount"),": ",t.G7q(26,49,t.kEZ(91,m,e.discount,n.currency,n.translateService.currentLang))," - ",t.lcZ(27,55,"order-export.total-shipping"),": ",t.G7q(28,57,t.kEZ(95,m,e.shippingFee,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.HOy(" ",t.lcZ(31,63,"order-export.total-revenue"),": ",t.G7q(32,65,t.kEZ(99,m,e.revenue,n.currency,n.translateService.currentLang))," - ",t.lcZ(33,71,"order-export.total-cost"),": ",t.G7q(34,73,t.kEZ(103,m,e.cost,n.currency,n.translateService.currentLang))," "),t.xp6(5),t.Q6J("ngIf",e.contact),t.xp6(2),t.hij(" ",n.dateFormat(e.createdAt)," "),t.xp6(1),t.Q6J("ngIf",e.staff)}}function _n(o,c){if(1&o&&(t.ynx(0),t.YNc(1,dn,39,107,"ion-item",34),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.report.items)}}function pn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectProduct(i.id))}),t.TgZ(1,"ion-label",8)(2,"strong"),t._uU(3),t.qZA(),t._uU(4," - "),t.TgZ(5,"ion-text",11),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.ALo(14,"currency"),t.ALo(15,"translate"),t.ALo(16,"currency"),t.ALo(17,"translate"),t.ALo(18,"currency"),t.ALo(19,"translate"),t.ALo(20,"currency"),t.ALo(21,"translate"),t.ALo(22,"currency"),t.qZA()()()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(3),t.Oqu(e.contact),t.xp6(3),t.Oqu(t.G7q(7,15,t.kEZ(63,m,e.total,n.currency,n.translateService.currentLang))),t.xp6(3),t.lnq(" ",t.lcZ(10,21,"order-export.total-quantity"),": ",e.quantity," ",e.unit," "),t.xp6(3),t.qoO([" ",t.lcZ(13,23,"order-export.total-revenue"),": ",t.G7q(14,25,t.kEZ(67,m,e.revenue,n.currency,n.translateService.currentLang))," - ",t.lcZ(15,31,"order-export.total-cost"),": ",t.G7q(16,33,t.kEZ(71,m,e.cost,n.currency,n.translateService.currentLang))," - ",t.lcZ(17,39,"order-export.total-discount"),": ",t.G7q(18,41,t.kEZ(75,m,e.discount,n.currency,n.translateService.currentLang))," - ",t.lcZ(19,47,"product-add.price"),": ",t.G7q(20,49,t.kEZ(79,m,e.total/e.quantity,n.currency,n.translateService.currentLang))," - ",t.lcZ(21,55,"product-add.cost-price"),": ",t.G7q(22,57,t.kEZ(83,m,e.cost/e.quantity,n.currency,n.translateService.currentLang))," "])}}function un(o,c){if(1&o&&(t.ynx(0),t.YNc(1,pn,23,87,"ion-item",34),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.report.items)}}function gn(o,c){if(1&o&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("#",e.contact,"")}}function mn(o,c){1&o&&(t.TgZ(0,"strong"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"order-export.guests")))}function fn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(4);return t.KtG(a.selectProduct(i.id))}),t.TgZ(1,"ion-label",46)(2,"strong"),t._uU(3),t.qZA(),t._uU(4," - "),t.TgZ(5,"ion-text",11),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.ALo(14,"currency"),t.ALo(15,"translate"),t.ALo(16,"currency"),t.ALo(17,"translate"),t.ALo(18,"currency"),t.qZA()()()}if(2&o){const e=c.$implicit,n=c.index,r=t.oxw(4);t.xp6(3),t.AsE("",n+1,".",e.contact,""),t.xp6(3),t.Oqu(t.G7q(7,12,t.kEZ(44,m,e.total,r.currency,r.translateService.currentLang))),t.xp6(3),t.lnq(" ",t.lcZ(10,18,"order-export.total-quantity"),": ",e.quantity," ",e.unit," "),t.xp6(3),t.gL8(" ",t.lcZ(13,20,"order-export.total-revenue"),": ",t.G7q(14,22,t.kEZ(48,m,e.revenue,r.currency,r.translateService.currentLang))," - ",t.lcZ(15,28,"order-export.total-cost"),": ",t.G7q(16,30,t.kEZ(52,m,e.cost,r.currency,r.translateService.currentLang))," - ",t.lcZ(17,36,"order-export.total-discount"),": ",t.G7q(18,38,t.kEZ(56,m,e.discount,r.currency,r.translateService.currentLang))," ")}}function xn(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",44),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectContact(i.id))}),t.TgZ(2,"ion-label",8),t.YNc(3,gn,2,1,"strong",3),t.YNc(4,mn,3,3,"strong",3),t._uU(5," - "),t.TgZ(6,"ion-text",11),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"currency"),t.ALo(13,"translate"),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"div"),t._uU(16),t.ALo(17,"translate"),t.ALo(18,"currency"),t.ALo(19,"translate"),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"div"),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"currency"),t.ALo(25,"translate"),t.ALo(26,"currency"),t.qZA()()(),t.TgZ(27,"ion-list",45),t.YNc(28,fn,19,60,"ion-item",34),t.qZA(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(3),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(3),t.Oqu(t.G7q(8,16,t.kEZ(70,m,e.total,n.currency,n.translateService.currentLang))),t.xp6(3),t.HOy(" ",t.lcZ(11,22,"order-export.total-no-vat"),": ",t.G7q(12,24,t.kEZ(74,m,e.netValue,n.currency,n.translateService.currentLang))," - ",t.lcZ(13,30,"order-export.total-vat"),": ",t.G7q(14,32,t.kEZ(78,m,e.tax,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.HOy(" ",t.lcZ(17,38,"order-export.total-discount"),": ",t.G7q(18,40,t.kEZ(82,m,e.discount,n.currency,n.translateService.currentLang))," - ",t.lcZ(19,46,"order-export.total-shipping"),": ",t.G7q(20,48,t.kEZ(86,m,e.shippingFee,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.HOy(" ",t.lcZ(23,54,"order-export.total-revenue"),": ",t.G7q(24,56,t.kEZ(90,m,e.revenue,n.currency,n.translateService.currentLang))," - ",t.lcZ(25,62,"order-export.total-cost"),": ",t.G7q(26,64,t.kEZ(94,m,e.cost,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.Q6J("ngForOf",e.subItems)}}function hn(o,c){if(1&o&&(t.ynx(0),t.YNc(1,xn,29,98,"ng-container",43),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.report.items)}}function Zn(o,c){if(1&o&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.staff)}}function An(o,c){1&o&&(t.TgZ(0,"strong"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"order-export.others")))}function Tn(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.AsE(" - ",t.lcZ(2,2,"order-export.staff-revenue"),": ",t.G7q(3,4,t.kEZ(10,m,e.staffRevenue,n.currency,n.translateService.currentLang))," ")}}function Cn(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(4);t.xp6(1),t.AsE(" - ",t.lcZ(2,2,"order-export.staff-revenue"),": ",t.G7q(3,4,t.kEZ(10,m,e.staffRevenue,n.currency,n.translateService.currentLang))," ")}}function yn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(4);return t.KtG(a.selectProduct(i.id))}),t.TgZ(1,"ion-label",46)(2,"strong"),t._uU(3),t.qZA(),t._uU(4," - "),t.TgZ(5,"ion-text",11),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.ALo(14,"currency"),t.ALo(15,"translate"),t.ALo(16,"currency"),t.ALo(17,"translate"),t.ALo(18,"currency"),t.YNc(19,Cn,4,14,"span",3),t.qZA()()()}if(2&o){const e=c.$implicit,n=c.index,r=t.oxw(4);t.xp6(3),t.AsE("",n+1,".",e.contact,""),t.xp6(3),t.Oqu(t.G7q(7,13,t.kEZ(45,m,e.total,r.currency,r.translateService.currentLang))),t.xp6(3),t.lnq(" ",t.lcZ(10,19,"order-export.total-quantity"),": ",e.quantity," ",e.unit," "),t.xp6(3),t.gL8(" ",t.lcZ(13,21,"order-export.total-revenue"),": ",t.G7q(14,23,t.kEZ(49,m,e.revenue,r.currency,r.translateService.currentLang))," - ",t.lcZ(15,29,"order-export.total-cost"),": ",t.G7q(16,31,t.kEZ(53,m,e.cost,r.currency,r.translateService.currentLang))," - ",t.lcZ(17,37,"order-export.total-discount"),": ",t.G7q(18,39,t.kEZ(57,m,e.discount,r.currency,r.translateService.currentLang))," "),t.xp6(7),t.Q6J("ngIf",e.staffRevenue)}}function vn(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",44),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectStaff(i.id))}),t.TgZ(2,"ion-label",8),t.YNc(3,Zn,2,1,"strong",3),t.YNc(4,An,3,3,"strong",3),t._uU(5," - "),t.TgZ(6,"ion-text",11),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"currency"),t.ALo(13,"translate"),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"div"),t._uU(16),t.ALo(17,"translate"),t.ALo(18,"currency"),t.ALo(19,"translate"),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"div"),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"currency"),t.ALo(25,"translate"),t.ALo(26,"currency"),t.YNc(27,Tn,4,14,"span",3),t.qZA()()(),t.TgZ(28,"ion-list",45),t.YNc(29,yn,20,61,"ion-item",34),t.qZA(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(3),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(3),t.Oqu(t.G7q(8,17,t.kEZ(71,m,e.total,n.currency,n.translateService.currentLang))),t.xp6(3),t.HOy(" ",t.lcZ(11,23,"order-export.total-no-vat"),": ",t.G7q(12,25,t.kEZ(75,m,e.netValue,n.currency,n.translateService.currentLang))," - ",t.lcZ(13,31,"order-export.total-vat"),": ",t.G7q(14,33,t.kEZ(79,m,e.tax,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.HOy(" ",t.lcZ(17,39,"order-export.total-discount"),": ",t.G7q(18,41,t.kEZ(83,m,e.discount,n.currency,n.translateService.currentLang))," - ",t.lcZ(19,47,"order-export.total-shipping"),": ",t.G7q(20,49,t.kEZ(87,m,e.shippingFee,n.currency,n.translateService.currentLang))," "),t.xp6(6),t.HOy(" ",t.lcZ(23,55,"order-export.total-revenue"),": ",t.G7q(24,57,t.kEZ(91,m,e.revenue,n.currency,n.translateService.currentLang))," - ",t.lcZ(25,63,"order-export.total-cost"),": ",t.G7q(26,65,t.kEZ(95,m,e.cost,n.currency,n.translateService.currentLang))," "),t.xp6(5),t.Q6J("ngIf",e.staffRevenue),t.xp6(2),t.Q6J("ngForOf",e.subItems)}}function Sn(o,c){if(1&o&&(t.ynx(0),t.YNc(1,vn,30,99,"ng-container",43),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.report.items)}}function bn(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-list-header")(2,"ion-label"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,_n,2,1,"ng-container",3),t.YNc(6,un,2,1,"ng-container",3),t.YNc(7,hn,2,1,"ng-container",3),t.YNc(8,Sn,2,1,"ng-container",3),t.BQk()),2&o){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"order-export.list")),t.xp6(2),t.Q6J("ngIf",0===e.reportType),t.xp6(1),t.Q6J("ngIf",1===e.reportType),t.xp6(1),t.Q6J("ngIf",2===e.reportType),t.xp6(1),t.Q6J("ngIf",3===e.reportType)}}function qn(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.contact,"")}}function On(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.staff," ")}}function wn(o,c){1&o&&(t.TgZ(0,"ion-text",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-draft"),""))}function Un(o,c){1&o&&(t.TgZ(0,"ion-text",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-inprogress"),""))}function Ln(o,c){1&o&&(t.TgZ(0,"ion-text",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-shipping"),""))}function Nn(o,c){1&o&&(t.TgZ(0,"ion-text",11),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-done"),""))}function Jn(o,c){1&o&&(t.TgZ(0,"ion-text",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-cancel"),""))}function kn(o,c){1&o&&(t.TgZ(0,"ion-text",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-has-debt"),""))}function In(o,c){1&o&&(t.TgZ(0,"ion-text",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-shipping-has-debt")," "))}function Qn(o,c){1&o&&(t.TgZ(0,"ion-text",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-deposit")," "))}function Pn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectOrder(i.id))}),t.TgZ(1,"ion-col"),t._uU(2),t.qZA(),t.TgZ(3,"ion-col"),t.YNc(4,qn,2,1,"p",3),t.qZA(),t.TgZ(5,"ion-col"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"ion-col"),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"ion-col"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"ion-col"),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"ion-col"),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.TgZ(20,"ion-col"),t._uU(21),t.ALo(22,"currency"),t.qZA(),t.TgZ(23,"ion-col"),t._uU(24),t.ALo(25,"currency"),t.qZA(),t.TgZ(26,"ion-col",8),t.YNc(27,On,2,1,"p",3),t.qZA(),t.TgZ(28,"ion-col",8),t.YNc(29,wn,3,3,"ion-text",36),t.YNc(30,Un,3,3,"ion-text",37),t.YNc(31,Ln,3,3,"ion-text",37),t.YNc(32,Nn,3,3,"ion-text",38),t.YNc(33,Jn,3,3,"ion-text",39),t.YNc(34,kn,3,3,"ion-text",39),t.YNc(35,In,3,3,"ion-text",39),t.YNc(36,Qn,3,3,"ion-text",37),t._uU(37),t.qZA()()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.Udp("cursor","pointer"),t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Q6J("ngIf",e.contact),t.xp6(2),t.Oqu(t.G7q(7,21,t.kEZ(63,m,e.total,n.currency,n.translateService.currentLang))),t.xp6(3),t.hij("",t.G7q(10,27,t.kEZ(67,m,e.netValue,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.Oqu(t.G7q(13,33,t.kEZ(71,m,e.tax,n.currency,n.translateService.currentLang))),t.xp6(3),t.hij("",t.G7q(16,39,t.kEZ(75,m,e.shippingFee,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(19,45,t.kEZ(79,m,e.discount,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.Oqu(t.G7q(22,51,t.kEZ(83,m,e.cost,n.currency,n.translateService.currentLang))),t.xp6(3),t.hij("",t.G7q(25,57,t.kEZ(87,m,e.revenue,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.Q6J("ngIf",e.staff),t.xp6(2),t.Q6J("ngIf",0==e.status),t.xp6(1),t.Q6J("ngIf",1==e.status),t.xp6(1),t.Q6J("ngIf",2==e.status),t.xp6(1),t.Q6J("ngIf",3==e.status),t.xp6(1),t.Q6J("ngIf",4==e.status),t.xp6(1),t.Q6J("ngIf",5==e.status),t.xp6(1),t.Q6J("ngIf",6==e.status),t.xp6(1),t.Q6J("ngIf",7==e.status),t.xp6(1),t.hij(" - ",n.dateFormat(e.createdAt)," ")}}function En(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-row")(2,"ion-col")(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-col")(7,"strong"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col")(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"ion-col")(15,"strong"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"ion-col")(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"ion-col")(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ion-col")(27,"strong"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"ion-col")(31,"strong"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"ion-col")(35,"strong"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"ion-col")(39,"strong"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"ion-col")(43,"strong"),t._uU(44),t.ALo(45,"translate"),t.qZA()()(),t.YNc(46,Pn,38,91,"ion-row",48),t.BQk()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,12,"order-add.order-code")),t.xp6(4),t.Oqu(t.lcZ(9,14,"order-add.contact-info")),t.xp6(4),t.Oqu(t.lcZ(13,16,"order-add.total")),t.xp6(4),t.Oqu(t.lcZ(17,18,"order-export.total-no-vat")),t.xp6(4),t.Oqu(t.lcZ(21,20,"order-export.total-vat")),t.xp6(4),t.Oqu(t.lcZ(25,22,"order-export.total-shipping")),t.xp6(4),t.Oqu(t.lcZ(29,24,"order-export.total-discount")),t.xp6(4),t.Oqu(t.lcZ(33,26,"order-export.total-cost")),t.xp6(4),t.Oqu(t.lcZ(37,28,"order-export.total-revenue")),t.xp6(4),t.Oqu(t.lcZ(41,30,"trade.staff")),t.xp6(4),t.Oqu(t.lcZ(45,32,"order.created-at")),t.xp6(2),t.Q6J("ngForOf",e.report.items)}}function Mn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectProduct(i.id))}),t.TgZ(1,"ion-col"),t._uU(2),t.qZA(),t.TgZ(3,"ion-col"),t._uU(4),t.qZA(),t.TgZ(5,"ion-col"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"ion-col"),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"ion-col"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"ion-col"),t._uU(15),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"ion-col"),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.TgZ(20,"ion-col"),t._uU(21),t.ALo(22,"currency"),t.qZA()()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.Udp("cursor","pointer"),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.AsE(" ",e.quantity," ",e.unit," "),t.xp6(2),t.hij("",t.G7q(7,11,t.kEZ(47,m,e.total,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(10,17,t.kEZ(51,m,e.discount,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(13,23,t.kEZ(55,m,e.cost,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(16,29,t.kEZ(59,m,e.revenue,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(19,35,t.kEZ(63,m,e.total/e.quantity,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(22,41,t.kEZ(67,m,e.cost/e.quantity,n.currency,n.translateService.currentLang))," ")}}function Yn(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-row")(2,"ion-col")(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-col")(7,"strong"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col")(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"ion-col")(15,"strong"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"ion-col")(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"ion-col")(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ion-col")(27,"strong"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"ion-col")(31,"strong"),t._uU(32),t.ALo(33,"translate"),t.qZA()()(),t.YNc(34,Mn,23,71,"ion-row",48),t.BQk()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,9,"order-export.product")),t.xp6(4),t.Oqu(t.lcZ(9,11,"order-export.total-quantity")),t.xp6(4),t.Oqu(t.lcZ(13,13,"order-add.total")),t.xp6(4),t.Oqu(t.lcZ(17,15,"order-export.total-discount")),t.xp6(4),t.Oqu(t.lcZ(21,17,"order-export.total-cost")),t.xp6(4),t.Oqu(t.lcZ(25,19,"order-export.total-revenue")),t.xp6(4),t.Oqu(t.lcZ(29,21,"product-add.price")),t.xp6(4),t.Oqu(t.lcZ(33,23,"product-add.cost-price")),t.xp6(2),t.Q6J("ngForOf",e.report.items)}}function Fn(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.contact,"")}}function jn(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order.guests"),""))}function Dn(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(4);return t.KtG(a.selectProduct(i.id))}),t.TgZ(1,"ion-col"),t._uU(2,"\xa0"),t.qZA(),t.TgZ(3,"ion-col"),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",50),t._uU(6),t.qZA(),t.TgZ(7,"ion-col",50),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"ion-col"),t._uU(11,"\xa0"),t.qZA(),t.TgZ(12,"ion-col"),t._uU(13,"\xa0"),t.qZA(),t.TgZ(14,"ion-col"),t._uU(15,"\xa0"),t.qZA(),t.TgZ(16,"ion-col",50),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"ion-col",50),t._uU(20),t.ALo(21,"currency"),t.qZA(),t.TgZ(22,"ion-col",50),t._uU(23),t.ALo(24,"currency"),t.qZA()()}if(2&o){const e=c.$implicit,n=c.index,r=t.oxw(4);t.Udp("cursor","pointer"),t.xp6(4),t.AsE("",n+1,".",e.contact,""),t.xp6(2),t.AsE(" ",e.quantity," ",e.unit," "),t.xp6(2),t.hij("",t.G7q(9,10,t.kEZ(34,m,e.total,r.currency,r.translateService.currentLang))," "),t.xp6(9),t.hij("",t.G7q(18,16,t.kEZ(38,m,e.discount,r.currency,r.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(21,22,t.kEZ(42,m,e.cost,r.currency,r.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(24,28,t.kEZ(46,m,e.revenue,r.currency,r.translateService.currentLang))," ")}}function Gn(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-row",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectContact(i.id))}),t.TgZ(2,"ion-col"),t.YNc(3,Fn,2,1,"span",3),t.YNc(4,jn,3,3,"span",3),t.qZA(),t.TgZ(5,"ion-col"),t._uU(6,"\xa0 "),t.qZA(),t.TgZ(7,"ion-col"),t._uU(8,"\xa0 "),t.qZA(),t.TgZ(9,"ion-col",50),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"ion-col",50),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"ion-col",50),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"ion-col",50),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"ion-col",50),t._uU(22),t.ALo(23,"currency"),t.qZA(),t.TgZ(24,"ion-col",50),t._uU(25),t.ALo(26,"currency"),t.qZA(),t.TgZ(27,"ion-col",50),t._uU(28),t.ALo(29,"currency"),t.qZA()(),t.YNc(30,Dn,25,50,"ion-row",48),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(1),t.Udp("cursor","pointer"),t.xp6(2),t.Q6J("ngIf",e.contact),t.xp6(1),t.Q6J("ngIf",!e.contact),t.xp6(6),t.hij("",t.G7q(11,12,t.kEZ(54,m,e.total,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(14,18,t.kEZ(58,m,e.netValue,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(17,24,t.kEZ(62,m,e.tax,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(20,30,t.kEZ(66,m,e.shippingFee,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(23,36,t.kEZ(70,m,e.discount,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(26,42,t.kEZ(74,m,e.cost,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(29,48,t.kEZ(78,m,e.revenue,n.currency,n.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngForOf",e.subItems)}}function Hn(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-row")(2,"ion-col")(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-col")(7,"strong"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col",50)(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"ion-col",50)(15,"strong"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"ion-col",50)(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"ion-col",50)(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ion-col",50)(27,"strong"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"ion-col",50)(31,"strong"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"ion-col",50)(35,"strong"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"ion-col",50)(39,"strong"),t._uU(40),t.ALo(41,"translate"),t.qZA()()(),t.YNc(42,Gn,31,82,"ng-container",43),t.BQk()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,11,"order-add.contact-info")),t.xp6(4),t.Oqu(t.lcZ(9,13,"order-export.product")),t.xp6(4),t.Oqu(t.lcZ(13,15,"order-export.total-quantity")),t.xp6(4),t.Oqu(t.lcZ(17,17,"order-add.total")),t.xp6(4),t.Oqu(t.lcZ(21,19,"order-export.total-no-vat")),t.xp6(4),t.Oqu(t.lcZ(25,21,"order-export.total-vat")),t.xp6(4),t.Oqu(t.lcZ(29,23,"order-export.total-shipping")),t.xp6(4),t.Oqu(t.lcZ(33,25,"order-export.total-discount")),t.xp6(4),t.Oqu(t.lcZ(37,27,"order-export.total-cost")),t.xp6(4),t.Oqu(t.lcZ(41,29,"order-export.total-revenue")),t.xp6(2),t.Q6J("ngForOf",e.report.items)}}function Kn(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.contact,"")}}function Bn(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order.others"),""))}function $n(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(4);return t.KtG(a.selectProduct(i.id))}),t.TgZ(1,"ion-col"),t._uU(2,"\xa0"),t.qZA(),t.TgZ(3,"ion-col"),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",50),t._uU(6),t.qZA(),t.TgZ(7,"ion-col",50),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"ion-col"),t._uU(11,"\xa0"),t.qZA(),t.TgZ(12,"ion-col"),t._uU(13,"\xa0"),t.qZA(),t.TgZ(14,"ion-col"),t._uU(15,"\xa0"),t.qZA(),t.TgZ(16,"ion-col",50),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"ion-col",50),t._uU(20),t.ALo(21,"currency"),t.qZA(),t.TgZ(22,"ion-col",50),t._uU(23),t.ALo(24,"currency"),t.qZA(),t.TgZ(25,"ion-col",50),t._uU(26),t.ALo(27,"currency"),t.qZA()()}if(2&o){const e=c.$implicit,n=c.index,r=t.oxw(4);t.Udp("cursor","pointer"),t.xp6(4),t.AsE("",n+1,".",e.contact,""),t.xp6(2),t.AsE(" ",e.quantity," ",e.unit," "),t.xp6(2),t.hij("",t.G7q(9,11,t.kEZ(41,m,e.total,r.currency,r.translateService.currentLang))," "),t.xp6(9),t.hij("",t.G7q(18,17,t.kEZ(45,m,e.discount,r.currency,r.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(21,23,t.kEZ(49,m,e.cost,r.currency,r.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(24,29,t.kEZ(53,m,e.revenue,r.currency,r.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(27,35,t.kEZ(57,m,e.staffRevenue,r.currency,r.translateService.currentLang))," ")}}function zn(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-row",49),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.selectStaff(i.id))}),t.TgZ(2,"ion-col"),t.YNc(3,Kn,2,1,"span",3),t.YNc(4,Bn,3,3,"span",3),t.qZA(),t.TgZ(5,"ion-col"),t._uU(6,"\xa0 "),t.qZA(),t.TgZ(7,"ion-col"),t._uU(8,"\xa0 "),t.qZA(),t.TgZ(9,"ion-col",50),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"ion-col",50),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"ion-col",50),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"ion-col",50),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"ion-col",50),t._uU(22),t.ALo(23,"currency"),t.qZA(),t.TgZ(24,"ion-col",50),t._uU(25),t.ALo(26,"currency"),t.qZA(),t.TgZ(27,"ion-col",50),t._uU(28),t.ALo(29,"currency"),t.qZA(),t.TgZ(30,"ion-col",50),t._uU(31),t.ALo(32,"currency"),t.qZA()(),t.YNc(33,$n,28,61,"ion-row",48),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(1),t.Udp("cursor","pointer"),t.xp6(2),t.Q6J("ngIf",e.staff),t.xp6(1),t.Q6J("ngIf",!e.staff),t.xp6(6),t.hij("",t.G7q(11,13,t.kEZ(61,m,e.total,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(14,19,t.kEZ(65,m,e.netValue,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(17,25,t.kEZ(69,m,e.tax,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(20,31,t.kEZ(73,m,e.shippingFee,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(23,37,t.kEZ(77,m,e.discount,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(26,43,t.kEZ(81,m,e.cost,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(29,49,t.kEZ(85,m,e.revenue,n.currency,n.translateService.currentLang))," "),t.xp6(3),t.hij("",t.G7q(32,55,t.kEZ(89,m,e.staffRevenue,n.currency,n.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngForOf",e.subItems)}}function Vn(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-row")(2,"ion-col")(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-col")(7,"strong"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col",50)(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"ion-col",50)(15,"strong"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"ion-col",50)(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"ion-col",50)(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ion-col",50)(27,"strong"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"ion-col",50)(31,"strong"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"ion-col",50)(35,"strong"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"ion-col",50)(39,"strong"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"ion-col",50)(43,"strong"),t._uU(44),t.ALo(45,"translate"),t.qZA()()(),t.YNc(46,zn,34,93,"ng-container",43),t.BQk()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,12,"order-export.staff")),t.xp6(4),t.Oqu(t.lcZ(9,14,"order-export.product")),t.xp6(4),t.Oqu(t.lcZ(13,16,"order-export.total-quantity")),t.xp6(4),t.Oqu(t.lcZ(17,18,"order-add.total")),t.xp6(4),t.Oqu(t.lcZ(21,20,"order-export.total-no-vat")),t.xp6(4),t.Oqu(t.lcZ(25,22,"order-export.total-vat")),t.xp6(4),t.Oqu(t.lcZ(29,24,"order-export.total-shipping")),t.xp6(4),t.Oqu(t.lcZ(33,26,"order-export.total-discount")),t.xp6(4),t.Oqu(t.lcZ(37,28,"order-export.total-cost")),t.xp6(4),t.Oqu(t.lcZ(41,30,"order-export.total-revenue")),t.xp6(4),t.Oqu(t.lcZ(45,32,"order-export.staff-revenue")),t.xp6(2),t.Q6J("ngForOf",e.report.items)}}function Wn(o,c){if(1&o&&(t.TgZ(0,"ion-grid",47),t.YNc(1,En,47,34,"ng-container",3),t.YNc(2,Yn,35,25,"ng-container",3),t.YNc(3,Hn,43,31,"ng-container",3),t.YNc(4,Vn,47,34,"ng-container",3),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.reportType),t.xp6(1),t.Q6J("ngIf",1===e.reportType),t.xp6(1),t.Q6J("ngIf",2===e.reportType),t.xp6(1),t.Q6J("ngIf",3===e.reportType)}}let Rn=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f,S,U){this.barcodeScanner=e,this.modalCtrl=n,this.contactService=r,this.translateService=i,this.userService=a,this.excelService=l,this.navCtrl=u,this.storeService=g,this.alertCtrl=_,this.staffService=f,this.analyticsService=S,this.platform=U,this.params=null,this.dateFrom="",this.dateTo="",this.reportType=0,this.isMobile=!0}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-export")})()}selectOrder(e){this.navCtrl.navigateForward("/order/detail",{id:e})}selectProduct(e){this.navCtrl.navigateForward("/product/detail",{id:e,selectedStaff:this.selectedStaff})}selectContact(e){0!=e&&this.navCtrl.navigateForward("/contact/detail",{id:e})}selectStaff(e){0!=e&&this.navCtrl.navigateForward("/staff/detail",{id:e})}ngOnInit(){this.platform.resize.subscribe(()=>{this.isMobile=this.platform.width()<720}),this.reload()}generate(){var e=this;return(0,d.Z)(function*(){const n=yield e.navCtrl.loading(),r=e.ordersInput&&e.ordersInput.length?e.ordersInput.map(i=>i.id):null;e.excelService.getSalesReport(r,e.reportType,e.selectedStaff?e.selectedStaff.id:0,e.dateFrom,e.dateTo,e.store?e.store.id:0,e.contactSelected?e.contactSelected.id:0).then(function(){var i=(0,d.Z)(function*(a){e.analyticsService.logEvent("order-export-generated"),e.report=a,yield n.dismiss()});return function(a){return i.apply(this,arguments)}}())})()}resetReport(){this.report=null}reportName(){return 0===this.reportType?this.translateService.instant("order-export.report-type-by-order"):1===this.reportType?this.translateService.instant("order-export.report-type-by-product"):2===this.reportType?this.translateService.instant("order-export.report-type-by-customer"):void 0}export(){var e=this;return(0,d.Z)(function*(){const n=yield e.navCtrl.loading(),r=0===e.reportType?"sales-report-by-order-"+e.dateFormatInFile(e.dateFrom)+"-to-"+e.dateFormatInFile(e.dateTo)+".xlsx":1===e.reportType?"sales-report-by-product-"+e.dateFormatInFile(e.dateFrom)+"-to-"+e.dateFormatInFile(e.dateTo)+".xlsx":"sales-report-by-customer-"+e.dateFormatInFile(e.dateFrom)+"-to-"+e.dateFormatInFile(e.dateTo)+".xlsx",i=e.ordersInput&&e.ordersInput.length?e.ordersInput.map(a=>a.id):null;e.excelService.downloadExcelOrderReport(i,r,e.reportType,e.selectedStaff?e.selectedStaff.id:0,e.dateFrom,e.dateTo,e.store?e.store.id:0,e.contactSelected?e.contactSelected.id:0).then(function(){var a=(0,d.Z)(function*(l){yield n.dismiss(),e.analyticsService.logEvent("order-export-downloaded"),e.navCtrl.isNotCordova()||(yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report.file-save-alert")+l,buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{}}]})).present(),e.userService.shareFileUrl(r,r,l))});return function(l){return a.apply(this,arguments)}}()).catch((0,d.Z)(function*(){yield n.dismiss()}))})()}selectDateRange(){var e=this;return(0,d.Z)(function*(){e.dateFrom=e.dateFrom?e.dateFrom:A.C.GetFirstDateOfMonth(),e.dateTo=e.dateTo?e.dateTo:A.C.GetEndDateOfMonth(),e.navCtrl.push("/order/select-filter",{callback:r=>{r&&(e.analyticsService.logEvent("order-export-daterange-selected"),e.dateFrom=""!==r.dateFrom?A.C.toDbString(r.dateFrom,A.C.getDbFormat()):e.dateFrom?e.dateFrom:A.C.GetFirstDateOfMonth(),""!==r.dateTo?e.dateTo=A.C.toDbString(r.dateTo,A.C.getDbFormat()):e.dateFrom=e.dateFrom?e.dateFrom:A.C.GetFirstDateOfMonth(),e.report=null)},dateFromInput:e.dateFrom,dateToInput:e.dateTo})})()}reload(){var e=this;return(0,d.Z)(function*(){e.isMobile=e.platform.width()<720,e.userService.getAttr("current-currency").then(n=>{e.currency=n}),e.store=yield e.storeService.getCurrentStore(),e.checkStore=e.store?e.translateService.instant("store.check-store",{shop:e.store.name}):null,e.selectedStaff=e.staffService.selectedStaff,e.params=e.navCtrl.getParams(e.params),e.dateFrom=e.params&&e.params.dateFrom?e.params.dateFrom:e.dateFrom?e.dateFrom:A.C.GetFirstDateOfMonth(),e.dateTo=e.params&&e.params.dateTo?e.params.dateTo:e.dateTo?e.dateTo:A.C.GetEndDateOfMonth(),e.reportType=e.params&&e.params.reportType?e.params.reportType:0,e.ordersInput=e.params&&e.params.orders?e.params.orders:null})()}dateOnlyFormat(e){return A.C.toUiDateString(e)}dateFormat(e){return A.C.toUiDateString(e)}dateFormatInFile(e){return this.dateFormat(e).split("/").join("-")}exitStore(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("store.exit-store-alert",{shop:e.store.name}),buttons:[{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){yield e.storeService.exitStore(),e.resetReport(),yield e.reload()}),function(){return r.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}showSearchStaff(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-export-search-staff");const n=function(){var r=(0,d.Z)(function*(i){i&&(e.selectedStaff=i)});return function(a){return r.apply(this,arguments)}}();e.navCtrl.push("/staff",{callback:n,searchMode:!0})})()}removeStaff(){this.selectedStaff=null}showSearchContact(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-contact");const n=function(){var r=(0,d.Z)(function*(i){i&&(e.contactSelected=i)});return function(a){return r.apply(this,arguments)}}();e.navCtrl.push("/contact",{callback:n,searchMode:!0})})()}removeContact(){this.contactSelected=null}scanContact(){var e=this;return(0,d.Z)(function*(){if(e.analyticsService.logEvent("order-add-scan-contact-barcode"),e.navCtrl.isNotCordova()){const n=yield e.modalCtrl.create({component:z.k});yield n.present();const{data:r}=yield n.onDidDismiss();r&&r.barcode&&e.checkContactBarcodeScaned(r.barcode)}else e.barcodeScanner.scan().then(n=>{!n||!n.text||e.checkContactBarcodeScaned(n.text)})})()}checkContactBarcodeScaned(e){var n=this;this.contactService.get(+e).then(function(){var r=(0,d.Z)(function*(i){!i||(n.analyticsService.logEvent("order-add-scan-contact-ok"),n.contactSelected=i)});return function(i){return r.apply(this,arguments)}}())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(R.m),t.Y36(s.IN),t.Y36(ot.y),t.Y36(b.sK),t.Y36(D.K),t.Y36(V.x),t.Y36(k.G),t.Y36(K.d),t.Y36(s.Br),t.Y36(j.x),t.Y36(I.y),t.Y36(s.t4))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-export"]],decls:17,vars:12,consts:[["slot","start"],["defaultHref","/home"],["lines","none","color","success",4,"ngIf"],[4,"ngIf"],[1,"ion-padding",2,"padding-top","0","padding-bottom","0"],["class","ion-text-wrap",4,"ngIf"],["class","ion-padding",4,"ngIf"],["lines","none","color","success"],[1,"ion-text-wrap"],["size","small",3,"click"],["name","exit","slot","start","size","small"],["color","primary"],[2,"width","100% !important","max-width","100% !important","padding-left","0px !important",3,"ngModel","ngModelChange"],[3,"value"],["slot","end","ion-text","","color","dark",3,"click",4,"ngIf"],["slot","end","color","secondary",3,"click",4,"ngIf"],["slot","end",3,"click",4,"ngIf"],["slot","end","fill","clear",3,"click",4,"ngIf"],["fill","clear","color","secondary","slot","end",3,"click"],["name","funnel"],["slot","end","ion-text","","color","dark",3,"click"],["slot","end","color","secondary",3,"click"],["name","barcode"],["slot","end",3,"click"],["slot","end","fill","clear",3,"click"],["slot","icon-only","name","close"],["color","primary","expand","block",3,"click"],["color","secondary","expand","block",3,"click"],["icon","file-excel","size","lg"],["name","create"],["size-sm","4","size-xs","4",4,"ngIf"],["size-sm","4","size-xs","4"],["color","danger"],[3,"color"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["color","dark",4,"ngIf"],["color","secondary",4,"ngIf"],["color","primary",4,"ngIf"],["color","danger",4,"ngIf"],["color","dark"],["color","secondary"],[2,"font-size","11px"],[4,"ngFor","ngForOf"],["color","light",3,"click"],[2,"margin-left","10px"],[1,"ion-text-wrap",2,"font-size","0.68em"],[1,"ion-padding"],["style","border-bottom: 1px solid #ccc;",3,"cursor","click",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #ccc",3,"click"],[2,"text-align","right"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.YNc(7,Le,8,4,"ion-item",2),t.qZA(),t.TgZ(8,"ion-content"),t.YNc(9,Ge,31,31,"ion-list",3),t.TgZ(10,"div",4),t.YNc(11,He,12,6,"ion-grid",3),t.YNc(12,Ke,12,6,"ion-grid",3),t.qZA(),t.TgZ(13,"ion-list"),t.YNc(14,Re,67,113,"ion-item",5),t.YNc(15,bn,9,7,"ng-container",3),t.YNc(16,Wn,5,4,"ion-grid",6),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,10,"order-export.title")),t.xp6(2),t.Q6J("ngIf",n.checkStore&&(null==n.selectedStaff||n.selectedStaff.hasFullAccess&&!n.selectedStaff.storeId)),t.xp6(1),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("ngIf",!n.report),t.xp6(2),t.Q6J("ngIf",!n.report),t.xp6(1),t.Q6J("ngIf",n.report),t.xp6(2),t.Q6J("ngIf",n.report),t.xp6(1),t.Q6J("ngIf",n.isMobile&&n.report),t.xp6(1),t.Q6J("ngIf",!n.isMobile&&n.report&&n.report.items&&n.report.items.length))},dependencies:[y.sg,y.O5,w.JJ,w.On,s.oU,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.yh,s.Nd,s.t9,s.n0,s.yW,s.wd,s.sr,s.QI,s.cs,W.BN,y.H9,b.X$],encapsulation:2}),o})();var ft=h(4433),ct=h(6861),Xn=h(3064),to=h(280);function eo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-buttons",24)(1,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exportToExcel())}),t._UZ(2,"fa-icon",26),t.qZA(),t.TgZ(3,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openOrderAdd())}),t._UZ(4,"ion-icon",27),t.qZA(),t.TgZ(5,"ion-button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.presentOtherActionSheet())}),t._UZ(6,"ion-icon",28),t.qZA()()}}function no(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",29)(1,"ion-label",30),t._uU(2),t.qZA(),t.TgZ(3,"ion-buttons")(4,"ion-button",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exitStore())}),t._UZ(5,"ion-icon",32),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.checkStore),t.xp6(4),t.hij(" ",t.lcZ(7,2,"store.exit-store")," ")}}function oo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-buttons",0)(1,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSelect())}),t._UZ(2,"ion-icon",34),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"product-detail.multi-select")," "))}function ro(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-buttons",0)(1,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exportToExcel())}),t._UZ(2,"fa-icon",26),t.qZA(),t.TgZ(3,"ion-button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.multiPrint())}),t._UZ(4,"ion-icon",36),t.qZA(),t.TgZ(5,"ion-button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.multiDelete())}),t._UZ(6,"ion-icon",38),t.qZA(),t.TgZ(7,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exitSelectMode())}),t._uU(8),t.ALo(9,"translate"),t._UZ(10,"ion-icon",39),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"product-detail.exit-select-mode"),"\xa0"))}function io(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",44),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.multiEdit())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"ion-icon",45),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.multi-edit")," "))}function co(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.multiEdit())}),t._UZ(1,"ion-icon",46),t.qZA()}}function ao(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.revertValues())}),t._UZ(1,"ion-icon",47),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.hij(" \xa0",t.lcZ(3,1,"common.revert-values")," "))}function so(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",48),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.saveMultiEdit())}),t._UZ(1,"ion-icon",49),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.hij(" \xa0",t.lcZ(3,1,"action.save")," "))}function lo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showHelpMultiEditForField())}),t._UZ(1,"ion-icon",50),t.qZA()}}function _o(o,c){if(1&o&&(t.TgZ(0,"ion-buttons",24),t.YNc(1,io,4,3,"ion-button",40),t.YNc(2,co,2,0,"ion-button",41),t.YNc(3,ao,4,3,"ion-button",41),t.YNc(4,so,4,3,"ion-button",42),t.YNc(5,lo,2,0,"ion-button",43),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.multiEditMode&&e.selectMode),t.xp6(1),t.Q6J("ngIf",e.multiEditMode),t.xp6(1),t.Q6J("ngIf",e.multiEditMode),t.xp6(1),t.Q6J("ngIf",e.multiEditMode),t.xp6(1),t.Q6J("ngIf",e.multiEditMode)}}function po(o,c){if(1&o&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"common.selected-item"),": ",e.selectedCount," ")}}function uo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",51)(1,"ion-label",52),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"ion-buttons",53)(6,"ion-button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.previousPage())}),t._UZ(7,"ion-icon",55),t.qZA(),t.TgZ(8,"ion-button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nextPage())}),t._UZ(9,"ion-icon",56),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"common.page")," ",e.currentPage+1," ")}}function go(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-checkbox",57),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.isSelectAll=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectAll())}),t.qZA(),t.TgZ(2,"ion-buttons")(3,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.exportToExcel())}),t._UZ(4,"fa-icon",26),t.qZA(),t.TgZ(5,"ion-button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.multiPrint())}),t._UZ(6,"ion-icon",36),t.qZA(),t.TgZ(7,"ion-button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.multiDelete())}),t._UZ(8,"ion-icon",58),t.qZA(),t.TgZ(9,"ion-button",59),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.exitSelectMode())}),t._uU(10),t.ALo(11,"translate"),t._UZ(12,"ion-icon",60),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.isSelectAll),t.xp6(9),t.hij(" ",t.lcZ(11,2,"product-detail.exit-select-mode")," ")}}function mo(o,c){if(1&o&&(t.ynx(0),t.YNc(1,go,13,4,"ion-item",15),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.selectMode)}}function fo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",61)(1,"p",62),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-button",63),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.navCtrl.push("/request-pro"))}),t._UZ(5,"ion-icon",64),t._uU(6),t.ALo(7,"translate"),t.qZA()()}2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"order.no-pro-plan")),t.xp6(4),t.hij("\xa0 ",t.lcZ(7,4,"home.request-pro-plan")," "))}function xo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"order-list-item",66),t.NdJ("onPress",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.presentActionSheet(i))})("onClick",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.selectOrder(i.id))}),t.qZA()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.Q6J("order",e)("currency",n.currency)("showContact",!0)("selectMode",n.selectMode)("isSelected",e.isSelected)}}function ho(o,c){if(1&o&&(t.ynx(0),t.YNc(1,xo,1,5,"order-list-item",65),t.ALo(2,"slice"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,1,e.orders,e.start,e.end+1))}}function Zo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",71)(1,"ion-checkbox",72),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.isSelectAll=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectAll())}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.isSelectAll)}}function Ao(o,c){1&o&&(t.TgZ(0,"ion-select-option",76),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.Q6J("value",3),t.xp6(1),t.Oqu(t.lcZ(2,2,"order-detail.status-done")))}function To(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-select",75),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw(3);return t.KtG(i.multiStatus=r)}),t.TgZ(1,"ion-select-option",76),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select-option",76),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-select-option",76),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,Ao,3,4,"ion-select-option",77),t.TgZ(11,"ion-select-option",76),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ion-select-option",76),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-select-option",76),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ion-select-option",76),t._uU(21),t.ALo(22,"translate"),t.qZA()()}if(2&o){const e=t.oxw(3);t.Q6J("ngModel",e.multiStatus),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(3,16,"order-detail.status-draft")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(6,18,"order-detail.status-inprogress")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij("",t.lcZ(9,20,"order-detail.status-shipping")," "),t.xp6(2),t.Q6J("ngIf",!e.staffService.selectedStaff||e.staffService.selectedStaff.hasFullAccess),t.xp6(1),t.Q6J("value",4),t.xp6(1),t.Oqu(t.lcZ(13,22,"order-detail.status-cancel")),t.xp6(2),t.Q6J("value",5),t.xp6(1),t.hij("",t.lcZ(16,24,"order-detail.status-has-debt")," "),t.xp6(2),t.Q6J("value",6),t.xp6(1),t.hij("",t.lcZ(19,26,"order-detail.status-shipping-has-debt")," "),t.xp6(2),t.Q6J("value",7),t.xp6(1),t.hij("",t.lcZ(22,28,"order-detail.status-deposit")," ")}}function Co(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-buttons",24)(1,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.applyMultiEditForField("status"))}),t._UZ(2,"ion-icon",78),t.qZA()()}}function yo(o,c){if(1&o&&(t.TgZ(0,"ion-row",9)(1,"ion-col",71),t._uU(2," \xa0 "),t.qZA(),t.TgZ(3,"ion-col"),t._uU(4,"\xa0"),t.qZA(),t.TgZ(5,"ion-col"),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"ion-col"),t._uU(8,"\xa0"),t.qZA(),t.TgZ(9,"ion-col"),t._uU(10,"\xa0"),t.qZA(),t.TgZ(11,"ion-col"),t._uU(12,"\xa0"),t.qZA(),t.TgZ(13,"ion-col"),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"ion-col")(16,"ion-item",73),t.YNc(17,To,23,30,"ion-select",74),t.YNc(18,Co,3,0,"ion-buttons",4),t.qZA()(),t.TgZ(19,"ion-col"),t._uU(20,"\xa0"),t.qZA(),t.TgZ(21,"ion-col"),t._uU(22,"\xa0"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(17),t.Q6J("ngIf",e.multiEditMode&&e.selectMode),t.xp6(1),t.Q6J("ngIf",e.multiEditMode&&e.selectMode)}}function vo(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",71)(1,"ion-checkbox",72),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw().$implicit;return t.KtG(i.isSelected=r)})("ngModelChange",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.orderSelectedChange())}),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.isSelected)}}const G=function(o,c,e){return[o,c,"symbol","1.0-2",e]};function So(o,c){if(1&o&&(t.TgZ(0,"p",85)(1,"ion-text",86),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"currency"),t.ALo(5,"translate"),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.HOy("",t.lcZ(3,4,"order-add.pay-by-point"),": ",t.G7q(4,6,t.kEZ(14,G,e.amountFromPoint,n.currency,n.translateService.currentLang))," / ",e.pointAmount," ",t.lcZ(5,12,"point-add.point")," ")}}function bo(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.contact.fullName,"")}}function qo(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.contactName)}}function Oo(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.contactPhone)}}function wo(o,c){if(1&o&&(t.TgZ(0,"p",88),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.limitText(e.note)," ")}}function Uo(o,c){if(1&o&&(t.TgZ(0,"p",89),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(1),t.HOy(" ",n.productName(e.productCode,e.productName)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,4,t.kEZ(10,G,e.price,n.currency,n.translateService.currentLang))," ")}}function Lo(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",89)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Uo,3,14,"p",90),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.items)}}function No(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(6);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.kEZ(8,G,e.price,n.currency,n.translateService.currentLang)),"")}}function Jo(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function ko(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",91)(2,"ion-text",83),t._uU(3),t.YNc(4,No,3,12,"span",15),t._uU(5," | "),t.YNc(6,Jo,2,0,"span",15),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(6);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.kEZ(12,G,e.total,n.currency,n.translateService.currentLang))," ")}}function Io(o,c){if(1&o&&(t.ynx(0),t.YNc(1,ko,9,16,"ng-container",81),t.BQk()),2&o){const e=c.$implicit;t.xp6(1),t.Q6J("ngForOf",e.values)}}function Qo(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Io,2,1,"ng-container",81),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.typeOptions)}}function Po(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",91)(2,"ion-text",83),t._uU(3),t.ALo(4,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.xDo(" ",e.code?e.code.toUpperCase()+"-":"","",e.title," | ",e.count," ",e.unit," | ",t.G7q(4,7,t.kEZ(13,G,e.total,n.currency,n.translateService.currentLang))," ")}}function Eo(o,c){1&o&&(t.ynx(0),t.TgZ(1,"p",91)(2,"ion-text",83),t._uU(3," ... "),t.qZA()(),t.BQk()),2&o&&(t.xp6(2),t.Udp("font-weight","normal"))}function Mo(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Po,5,17,"ng-container",81),t.ALo(2,"slice"),t.YNc(3,Eo,4,2,"ng-container",15),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,2,e.options,0,2)),t.xp6(2),t.Q6J("ngIf",e.options.length>=3)}}function Yo(o,c){if(1&o&&(t.TgZ(0,"span")(1,"ion-text",83),t._uU(2),t.ALo(3,"currency"),t.YNc(4,wo,2,1,"p",87),t.YNc(5,Lo,6,4,"ng-container",15),t.YNc(6,Qo,2,1,"ng-container",15),t.YNc(7,Mo,4,6,"ng-container",15),t.qZA(),t._UZ(8,"br"),t.qZA()),2&o){const e=c.$implicit,n=c.index,r=t.oxw(3);t.xp6(2),t.gL8(" ",n+1,".",e.productCode?e.productCode.toUpperCase()+"-":"","",e.productName," | ",e.count," ",e.unit," | ",t.G7q(3,10,t.kEZ(16,G,e.total,r.currency,r.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.note),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length),t.xp6(1),t.Q6J("ngIf",e.typeOptions&&e.typeOptions.length),t.xp6(1),t.Q6J("ngIf",e.options&&e.options.length)}}function Fo(o,c){1&o&&(t.TgZ(0,"span")(1,"ion-text",83),t._uU(2,"..."),t.qZA()())}function jo(o,c){if(1&o&&(t.TgZ(0,"span",83),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.limitText(e.note)," ")}}function Do(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" - ",e.store.name,"")}}function Go(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,Do,2,1,"span",15),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.staff.name,""),t.xp6(1),t.Q6J("ngIf",e.store)}}function Ho(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.store.name)}}function Ko(o,c){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,Ho,2,1,"span",15),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.store)}}function Bo(o,c){1&o&&(t.TgZ(0,"ion-select-option",76),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.Q6J("value",3),t.xp6(1),t.Oqu(t.lcZ(2,2,"order-detail.status-done")))}function $o(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-select",75),t.NdJ("ngModelChange",function(r){t.CHM(e);const i=t.oxw().$implicit;return t.KtG(i.status=r)}),t.TgZ(1,"ion-select-option",76),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select-option",76),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-select-option",76),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,Bo,3,4,"ion-select-option",77),t.TgZ(11,"ion-select-option",76),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ion-select-option",76),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-select-option",76),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ion-select-option",76),t._uU(21),t.ALo(22,"translate"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Q6J("ngModel",e.status),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(3,16,"order-detail.status-draft")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(6,18,"order-detail.status-inprogress")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij("",t.lcZ(9,20,"order-detail.status-shipping")," "),t.xp6(2),t.Q6J("ngIf",!e.currentStaff||e.currentStaff.hasFullAccess||e.isOwner&&e.isOwnerValidTime),t.xp6(1),t.Q6J("value",4),t.xp6(1),t.Oqu(t.lcZ(13,22,"order-detail.status-cancel")),t.xp6(2),t.Q6J("value",5),t.xp6(1),t.hij("",t.lcZ(16,24,"order-detail.status-has-debt")," "),t.xp6(2),t.Q6J("value",6),t.xp6(1),t.hij("",t.lcZ(19,26,"order-detail.status-shipping-has-debt")," "),t.xp6(2),t.Q6J("value",7),t.xp6(1),t.hij("",t.lcZ(22,28,"order-detail.status-deposit")," ")}}function zo(o,c){1&o&&(t.TgZ(0,"ion-text",14),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-draft"),""))}function Vo(o,c){1&o&&(t.TgZ(0,"ion-text",86),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-inprogress"),""))}function Wo(o,c){1&o&&(t.TgZ(0,"ion-text",86),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-shipping"),""))}function Ro(o,c){1&o&&(t.TgZ(0,"ion-text",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-done"),""))}function Xo(o,c){1&o&&(t.TgZ(0,"ion-text",96),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-cancel"),""))}function tr(o,c){1&o&&(t.TgZ(0,"ion-text",96),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-has-debt"),""))}function er(o,c){1&o&&(t.TgZ(0,"ion-text",96),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-shipping-has-debt"),""))}function nr(o,c){1&o&&(t.TgZ(0,"ion-text",86),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-detail.status-deposit"),""))}function or(o,c){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,zo,3,3,"ion-text",92),t.YNc(2,Vo,3,3,"ion-text",93),t.YNc(3,Wo,3,3,"ion-text",93),t.YNc(4,Ro,3,3,"ion-text",94),t.YNc(5,Xo,3,3,"ion-text",95),t.YNc(6,tr,3,3,"ion-text",95),t.YNc(7,er,3,3,"ion-text",95),t.YNc(8,nr,3,3,"ion-text",93),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0===e.status),t.xp6(1),t.Q6J("ngIf",1===e.status),t.xp6(1),t.Q6J("ngIf",2===e.status),t.xp6(1),t.Q6J("ngIf",3===e.status),t.xp6(1),t.Q6J("ngIf",4===e.status),t.xp6(1),t.Q6J("ngIf",5===e.status),t.xp6(1),t.Q6J("ngIf",6===e.status),t.xp6(1),t.Q6J("ngIf",7===e.status)}}function rr(o,c){if(1&o&&(t.TgZ(0,"p",91),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t._uU(4),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.bill-of-lading-code"),": "),t.xp6(3),t.hij("",e.billOfLadingCode," ")}}function ir(o,c){if(1&o&&(t.TgZ(0,"p",91),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t._uU(4),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.shipping-partner"),": "),t.xp6(3),t.hij("",e.shippingPartner," ")}}function cr(o,c){if(1&o&&(t.TgZ(0,"p",91),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t._uU(4),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.shipper-name"),": "),t.xp6(3),t.hij("",e.shipperName," ")}}function ar(o,c){if(1&o&&(t.TgZ(0,"p",91),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t._uU(4),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.shipper-phone"),": "),t.xp6(3),t.hij("",e.shipperPhone," ")}}function sr(o,c){if(1&o&&(t.TgZ(0,"p",91),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t._uU(4),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"order-add.delivery-address"),": "),t.xp6(3),t.hij("",e.deliveryAddress," ")}}function lr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",79),t.NdJ("press",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.presentActionSheet(i))})("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.selectOrder(i.id))}),t.YNc(1,vo,2,1,"ion-col",68),t.TgZ(2,"ion-col"),t._uU(3),t.qZA(),t.TgZ(4,"ion-col"),t._uU(5),t.ALo(6,"currency"),t.YNc(7,So,6,18,"p",80),t.qZA(),t.TgZ(8,"ion-col"),t.YNc(9,bo,2,1,"span",15),t.YNc(10,qo,2,1,"span",15),t.YNc(11,Oo,2,1,"span",15),t.qZA(),t.TgZ(12,"ion-col"),t.YNc(13,Yo,9,20,"span",81),t.ALo(14,"slice"),t.YNc(15,Fo,3,0,"span",15),t.qZA(),t.TgZ(16,"ion-col",30),t.YNc(17,jo,2,1,"span",82),t.qZA(),t.TgZ(18,"ion-col",30),t.YNc(19,Go,3,2,"span",15),t.YNc(20,Ko,2,1,"span",15),t.qZA(),t.TgZ(21,"ion-col"),t.YNc(22,$o,23,30,"ion-select",74),t.YNc(23,or,9,8,"span",15),t.qZA(),t.TgZ(24,"ion-col",83),t.YNc(25,rr,5,4,"p",84),t.YNc(26,ir,5,4,"p",84),t.YNc(27,cr,5,4,"p",84),t.YNc(28,ar,5,4,"p",84),t.YNc(29,sr,5,4,"p",84),t.qZA(),t.TgZ(30,"ion-col",30),t._uU(31),t.qZA()()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.Udp("cursor","pointer"),t.xp6(1),t.Q6J("ngIf",n.selectMode),t.xp6(2),t.hij(" ",e.orderCode," "),t.xp6(2),t.hij(" ",t.G7q(6,22,t.kEZ(32,G,e.total,n.currency,n.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.amountFromPoint&&e.pointAmount),t.xp6(2),t.Q6J("ngIf",e.contactId&&0!==e.contactId&&e.contact),t.xp6(1),t.Q6J("ngIf",!e.contactId&&e.contactName),t.xp6(1),t.Q6J("ngIf",!e.contactId&&e.contactPhone),t.xp6(2),t.Q6J("ngForOf",t.Dn7(14,28,e.items,0,2)),t.xp6(2),t.Q6J("ngIf",e.items.length>=3),t.xp6(2),t.Q6J("ngIf",e.note),t.xp6(2),t.Q6J("ngIf",e.staffId&&0!==e.staffId&&e.staff&&!n.staffService.isStaff()),t.xp6(1),t.Q6J("ngIf",!(e.staffId&&0!==e.staffId&&e.staff&&!n.staffService.isStaff())&&e.store),t.xp6(2),t.Q6J("ngIf",n.multiEditMode&&n.selectMode),t.xp6(1),t.Q6J("ngIf",!n.selectMode||!n.multiEditMode),t.xp6(2),t.Q6J("ngIf",e.hasShipInfo&&e.billOfLadingCode),t.xp6(1),t.Q6J("ngIf",e.hasShipInfo&&e.shippingPartner),t.xp6(1),t.Q6J("ngIf",e.hasShipInfo&&e.shipperName),t.xp6(1),t.Q6J("ngIf",e.hasShipInfo&&e.shipperPhone),t.xp6(1),t.Q6J("ngIf",e.hasShipInfo&&e.deliveryAddress),t.xp6(2),t.hij(" ",n.dateFormat(e.createdAt)," ")}}function dr(o,c){if(1&o&&(t.TgZ(0,"ion-grid",67)(1,"ion-row",9),t.YNc(2,Zo,2,1,"ion-col",68),t.TgZ(3,"ion-col")(4,"strong"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"ion-col")(8,"strong"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"ion-col")(12,"strong"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"ion-col")(16,"strong"),t._uU(17),t.ALo(18,"translate"),t.qZA()(),t.TgZ(19,"ion-col")(20,"strong"),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"ion-col")(24,"strong"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t.TgZ(27,"ion-col")(28,"strong"),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"ion-col")(32,"strong"),t._uU(33),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"ion-col")(36,"strong"),t._uU(37),t.ALo(38,"translate"),t.qZA()()(),t.YNc(39,yo,23,2,"ion-row",69),t.YNc(40,lr,32,36,"ion-row",70),t.ALo(41,"slice"),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.selectMode),t.xp6(3),t.Oqu(t.lcZ(6,12,"order-add.order-code")),t.xp6(4),t.Oqu(t.lcZ(10,14,"order-add.total")),t.xp6(4),t.Oqu(t.lcZ(14,16,"order-add.contact-info")),t.xp6(4),t.Oqu(t.lcZ(18,18,"order-add.product")),t.xp6(4),t.Oqu(t.lcZ(22,20,"order-add.note")),t.xp6(4),t.Oqu(t.lcZ(26,22,"trade.staff")),t.xp6(4),t.Oqu(t.lcZ(30,24,"order-detail.status")),t.xp6(4),t.Oqu(t.lcZ(34,26,"order-add.shipping")),t.xp6(4),t.Oqu(t.lcZ(38,28,"order.created-at")),t.xp6(2),t.Q6J("ngIf",e.selectMode&&e.multiEditMode),t.xp6(1),t.Q6J("ngForOf",t.Dn7(41,30,e.orders,e.start,e.end+1))}}function _r(o,c){1&o&&(t.TgZ(0,"ion-item",97),t._UZ(1,"div",98),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,"order.no-order"),t.oJD))}function pr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",99)(1,"ion-label",100),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-buttons",101)(5,"ion-button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.previousPage())}),t._UZ(6,"ion-icon",55),t.qZA(),t.TgZ(7,"ion-button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nextPage())}),t._UZ(8,"ion-icon",56),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"common.page")," ",e.currentPage+1," ")}}function ur(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",102),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.goHelpPage("order"))}),t._UZ(1,"ion-icon",103),t.TgZ(2,"ion-label",13),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"help-order.title")," "))}function gr(o,c){1&o&&(t.TgZ(0,"div",104),t._UZ(1,"support"),t.qZA())}function mr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-fab",105)(1,"ion-fab-button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openOrderAdd())}),t._UZ(2,"ion-icon",106),t.qZA()()}if(2&o){const e=t.oxw();t.Akn(e.navCtrl.hasAds()?"margin-bottom: 60px":"")}}let fr=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f,S,U,M,Z,J,P,E,Y){var p=this;this.platform=e,this.orderService=n,this.translateService=r,this.userService=i,this.productService=a,this.barcodeScanner=l,this.excelService=u,this.modalCtrl=g,this.actionSheetCtrl=_,this.alertCtrl=f,this.file=S,this.storeService=U,this.navCtrl=M,this.analyticsService=Z,this.planService=J,this.toastCtrl=P,this.staffService=E,this.tradeService=Y,this.params=null,this.searchKey="",this.multiEditMode=!1,this.noteFilter="frequency",this.total=0,this.dateFrom="",this.dateTo="",this.orderStatusFilter=null,this.isMobile=!0,this.checkOrder=0,this.currentPlan=null,this.isOnTrial=!1,this.selectedStaff=null,this.start=0,this.pageSize=40,this.end=39,this.currentPage=0,this.selectMode=!1,this.isSelectAll=!1,this.getOrderNoDone=!1,this.multiStatus=0,this.selectedCount=0,this.scanForOrder=(0,d.Z)(function*(){if(p.analyticsService.logEvent("order-scan-for-search"),p.navCtrl.isNotCordova()){const v=yield p.modalCtrl.create({component:z.k});yield v.present();const{data:O}=yield v.onDidDismiss();O&&O.barcode&&(p.analyticsService.logEvent("order-scan-for-scanned-web"),p.doEnteredBarcode(O.barcode))}else p.barcodeScanner.scan().then(v=>{!v||!v.text||(p.analyticsService.logEvent("order-scan-for-scanned"),p.doEnteredBarcode(v.text))}).catch(v=>{console.error(v)})}),this.reload=(0,d.Z)(function*(){const v=yield p.navCtrl.loading();p.isMobile=p.platform.width()<720,p.currency=yield p.userService.getAttr("current-currency"),p.currentPlan=yield p.planService.getCurrentPlan(),p.stores=yield p.storeService.getStores(),p.selectedStaff=p.staffService.selectedStaff,p.getOrderNoDone=p.selectedStaff&&p.selectedStaff.updateStatusExceptDone&&!p.selectedStaff.hasFullAccess,p.currentPlan||(p.checkOrder=yield p.planService.checkOrder(),p.checkOrder>=10&&(p.isOnTrial=yield p.planService.isOnTrial(p.currentPlan))),p.params=p.navCtrl.getParams(p.params),p.dateFrom=p.params&&p.params.dateFrom?p.params.dateFrom:p.dateFrom?p.dateFrom:A.C.GetFirstDateOfMonth(),p.dateTo=p.params&&p.params.dateTo?p.params.dateTo:p.dateTo?p.dateTo:A.C.GetEndDateOfMonth(),p.params&&p.params.selectedStaff&&(p.selectedStaff=p.params.selectedStaff),p.params||(p.params={dateFrom:p.dateFrom,dateTo:p.dateTo,selectedStaff:null}),p.store=yield p.storeService.getCurrentStore(),p.checkStore=p.store?p.translateService.instant("store.check-store",{shop:p.store.name}):null,p.orderService.getOrders(p.selectedStaff?p.selectedStaff.id:null,p.dateFrom,p.dateTo,p.store?p.store.id:p.storeSelected&&!p.storeSelected.isMainShop?p.storeSelected.id:0,p.orderStatusFilter).then(function(){var O=(0,d.Z)(function*(et){const st=[];if(et&&et.length)for(const N of et){let nt=N.createdAt;nt.indexOf(":00Z")<0&&(nt=L(nt).format(A.C.getDateTimeDbFormat()));const $=p.staffService.selectedStaff;N.currentStaff=$,N.isOwner=$&&$.id===N.staffId,N.isOwnerValidTime=$&&($.canCreateOrder&&A.C.getMoment(nt).add($.hourLimit,"hours").toDate()>=L().toDate()||$.canUpdateDeleteOrder),N.items=JSON.parse(N.itemsJson),N.store=!p.checkStore&&N.storeId&&p.stores&&p.stores.length?p.stores.find(Us=>Us.id===N.storeId):null,(!p.getOrderNoDone||3!==N.status)&&st.push(N)}p.originalOrders=JSON.parse(JSON.stringify(st)),p.orders=st,p.total=C.sumBy(p.orders,N=>N.total),p.filter(),yield v.dismiss()});return function(et){return O.apply(this,arguments)}}()).catch((0,d.Z)(function*(){yield v.dismiss()}))}),this.doEnteredBarcode=v=>{!v||this.orderService.getByCode(v).then(O=>{if(O)return this.analyticsService.logEvent("order-scan-barcode-ok"),void this.navCtrl.push("/order/detail",{id:O.id})})},this.navCtrl.removeEventListener("reloadOrderList",this.reload),this.navCtrl.addEventListener("reloadOrderList",this.reload)}ngOnInit(){this.platform.resize.subscribe(()=>{this.isMobile=this.platform.width()<720}),this.reload()}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order")})()}onPeriodChanged(e){var n=this;return(0,d.Z)(function*(){if(e){n.analyticsService.logEvent("order-period-changed");const r=yield n.navCtrl.loading();n.start=0,n.end=n.pageSize-1,n.currentPage=0,n.dateFrom=""!==e.dateFrom?A.C.toDbString(e.dateFrom,A.C.getDbFormat()):"",n.dateTo=""!==e.dateTo?A.C.toDbString(e.dateTo,A.C.getDbFormat()):"",n.selectedStaff=e.selectedStaff,n.storeSelected=e.storeSelected,n.orderStatusFilter=e.orderStatus,n.params||(n.params={}),n.params.dateFrom=n.dateFrom,n.params.dateTo=n.dateTo,n.orderService.getOrders(n.selectedStaff?n.selectedStaff.id:null,n.dateFrom,n.dateTo,n.store?n.store.id:n.storeSelected&&!n.storeSelected.isMainShop?n.storeSelected.id:0,n.orderStatusFilter).then(function(){var i=(0,d.Z)(function*(a){const l=[];if(a&&a.length)for(const u of a){let g=u.createdAt;g.indexOf(":00Z")<0&&(g=L(g).format(A.C.getDateTimeDbFormat()));const _=n.staffService.selectedStaff;u.currentStaff=_,u.isOwner=_&&_.id===u.staffId,u.isOwnerValidTime=_&&(_.canCreateOrder&&A.C.getMoment(g).add(_.hourLimit,"hours").toDate()>=L().toDate()||_.canUpdateDeleteOrder),u.items=JSON.parse(u.itemsJson),u.store=!n.checkStore&&u.storeId&&n.stores&&n.stores.length?n.stores.find(f=>f.id===u.storeId):null,(!n.getOrderNoDone||3!==u.status)&&l.push(u)}n.originalOrders=JSON.parse(JSON.stringify(l)),n.orders=l,n.total=C.sumBy(n.orders,u=>u.total),n.filter(),yield r.dismiss()});return function(a){return i.apply(this,arguments)}}())}})()}exportToExcel(){let e=[];if(this.selectMode){const n=[];for(const r of this.orders)r.isSelected&&n.push(r);if(e=n,!e||!e.length)return void alert(this.translateService.instant("order-detail.no-order-selected-alert"))}this.navCtrl.navigateForward("/order/export",{orders:e,dateFrom:this.dateFrom,dateTo:this.dateTo})}openOrderAdd(){if(!this.currentPlan&&this.checkOrder>=10&&!this.isOnTrial)return this.analyticsService.logEvent("check-order-alert"),void alert(this.translateService.instant("order.check-order-alert",{total:this.checkOrder}));this.navCtrl.navigateForward("/order/add",null)}search(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-search");let n=JSON.parse(JSON.stringify(e.originalOrders));if(null!==e.searchKey&&""!==e.searchKey){e.start=0,e.end=e.pageSize-1,e.currentPage=0;const r=e.searchKey.toLowerCase();n=n.filter(i=>i.contact&&i.contact.fullName&&-1!==i.contact.fullName.toLowerCase().indexOf(r)||i.contact&&i.contact.mobile&&-1!==i.contact.mobile.toLowerCase().indexOf(r)||i.contactName&&-1!==i.contactName.toLowerCase().indexOf(r)||i.staff&&-1!==i.staff.name.toLowerCase().indexOf(r)||i.staff&&-1!==i.staff.userName.toLowerCase().indexOf(r)||i.store&&i.store.name&&-1!==i.store.name.toLowerCase().indexOf(r)||i.contactPhone&&-1!==i.contactPhone.toLowerCase().indexOf(r)||i.note&&-1!==i.note.toLowerCase().indexOf(r)||i.orderCode&&-1!==i.orderCode.toLowerCase().indexOf(r)||i.hasShipInfo&&i.billOfLadingCode&&-1!==i.billOfLadingCode.toLowerCase().indexOf(r)||i.hasShipInfo&&i.shippingPartner&&-1!==i.shippingPartner.toLowerCase().indexOf(r)||i.hasShipInfo&&i.shipperName&&-1!==i.shipperName.toLowerCase().indexOf(r)||i.hasShipInfo&&i.shipperPhone&&-1!==i.shipperPhone.toLowerCase().indexOf(r)||i.hasShipInfo&&i.deliveryAddress&&-1!==i.deliveryAddress.toLowerCase().indexOf(r)||i.items&&i.items.length&&i.items.filter(a=>a.productCode&&-1!==a.productCode.toLowerCase().indexOf(r)||a.productName&&-1!==a.productName.toLowerCase().indexOf(r)||a.note&&-1!==a.note.toLowerCase().indexOf(r)).length>0)}e.orders=n,e.total=C.sumBy(e.orders,r=>r.total)})()}clearSearch(){this.start=0,this.end=this.pageSize-1,this.currentPage=0,this.searchKey=null,this.reload()}filter(){let e=JSON.parse(JSON.stringify(this.originalOrders));e=this.sortByModifiedAt(e),this.orders=e}sortByModifiedAt(e){return e?C.orderBy(e,["createdAt"],["desc"]):null}dateOnlyFormat(e){return A.C.toUiDateString(e)}selectOrder(e){this.selectMode||this.navCtrl.navigateForward("/order/detail",{id:e})}copyOrder(e){this.navCtrl.push("/order/add",{order:e,mode:"copy"})}deleteOrder(e){var n=this;return(0,d.Z)(function*(){var i;yield(yield n.alertCtrl.create({header:n.translateService.instant("common.confirm"),message:n.translateService.instant("order.delete-alert"),buttons:[{text:n.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(){yield n.deleteRelated(e),n.orderService.deleteOrder(e).then((0,d.Z)(function*(){n.analyticsService.logEvent("order-delete-success");let a=n.orders.findIndex(l=>l.id===e.id);a>=0&&(n.orders.splice(a,1),n.total=C.sumBy(n.orders,l=>l.total)),a=n.originalOrders.findIndex(l=>l.id===e.id),a>=0&&n.originalOrders.splice(a,1)}))}),function(){return i.apply(this,arguments)})},{text:n.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}deleteRelated(e){var n=this;return(0,d.Z)(function*(){const r=[],i=yield n.tradeService.getTradesByOrder(e.id);for(const l of i)l.debtId||r.push(n.tradeService.deleteTrade(l));const a=yield n.productService.getNotesByOrder(e.id);for(const l of a)r.push(n.productService.deleteProductNote(l));yield Promise.all(r)})()}presentOtherActionSheet(){var e=this;return(0,d.Z)(function*(){yield(yield e.actionSheetCtrl.create({header:e.translateService.instant("action.action"),buttons:[{text:e.translateService.instant("order.import-excel"),handler:()=>{e.importExcel()}},{text:e.translateService.instant("product-detail.multi-select"),handler:()=>{e.selectMode=!0}},{text:e.translateService.instant("order.multi-print"),handler:()=>{e.multiPrint()}},{text:e.translateService.instant("order.search-by-barcode"),handler:()=>{e.scanForOrder()}},{text:e.translateService.instant("common.cancel"),role:"cancel",handler:()=>{}}]})).present()})()}multiPrint(){let e=[];if(this.selectMode){const n=[];for(const r of this.orders)r.isSelected&&n.push(r);if(e=n,!e||!e.length)return void alert(this.translateService.instant("order-detail.no-order-selected-alert"))}this.navCtrl.push("/order/multi-print",{dateFrom:this.dateFrom,dateTo:this.dateTo,selectedStaff:this.selectedStaff,orderStatusFilter:this.orderStatusFilter,ordersInput:e})}importExcel(){this.navCtrl.push("/order/import")}exportExcel(){var e=this;const n=[];if(n.push([this.translateService.instant("export.order-report")]),this.dateFrom&&this.dateTo){const a=this.translateService.instant("common.from"),l=this.translateService.instant("common.to"),u=a+" "+this.dateFormat(this.dateFrom)+" "+l+" "+this.dateFormat(this.dateTo);n.push([u])}n.push([this.translateService.instant("common.total")+": "+this.total+" "+this.currency]),n.push([this.translateService.instant("export.order-code"),this.translateService.instant("export.contact"),this.translateService.instant("export.money"),this.translateService.instant("export.unit"),this.translateService.instant("export.date")]);for(const a of this.orders)n.push([a.orderCode,0!==a.contactId&&a.contact?a.contact.fullName:"",a.total,this.currency,this.dateFormat(a.createdAt)]);const r=this.excelService.createSheetData(n),i="order-report-"+x.W.getCurrentDate()+".xlsx";this.excelService.exportExcel(r,i).then(function(){var a=(0,d.Z)(function*(l){e.navCtrl.isNotCordova()||(yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report.file-save-alert")+e.file.externalDataDirectory+i,buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{}}]})).present(),e.userService.shareFile(null,l))});return function(l){return a.apply(this,arguments)}}())}dateFormat(e){let n=e;return e.indexOf(":00Z")<0&&(n=L(e).format(A.C.getDateTimeDbFormat())),A.C.toUiLocalDateTimeString(n)}presentActionSheet(e){var n=this;return(0,d.Z)(function*(){let r=e.createdAt;r.indexOf(":00Z")<0&&(r=L(r).format(A.C.getDateTimeDbFormat()));const a=A.C.getMoment(r).add(n.selectedStaff.hourLimit,"hours").toDate(),l=n.selectedStaff&&n.selectedStaff.id===e.staffId,u=n.selectedStaff&&(n.selectedStaff.canCreateOrder&&a>=L().toDate()||n.selectedStaff.canUpdateDeleteOrder),g=[];(l&&u||!n.selectedStaff||n.selectedStaff.hasFullAccess)&&g.push({text:n.translateService.instant("order.delete-order"),role:"destructive",handler:()=>{n.deleteOrder(e)}}),g.push({text:n.translateService.instant("order.edit-order"),handler:()=>{n.selectOrder(e.id)}},{text:n.translateService.instant("order.copy"),handler:()=>{n.copyOrder(e)}},{text:n.translateService.instant("product-detail.multi-select"),handler:()=>{n.selectMode=!0}},{text:n.translateService.instant("common.cancel"),role:"cancel",handler:()=>{}}),yield(yield n.actionSheetCtrl.create({header:n.translateService.instant("action.action"),buttons:g})).present()})()}isNotCordova(){return this.navCtrl.isNotCordova()}goHelpPage(e){this.navCtrl.push("/help/"+e)}requestProPlan(){this.navCtrl.push("/request-pro")}limitText(e,n=200){return x.W.limitText(e,n)}exitStore(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("store.exit-store-alert",{shop:e.store.name}),buttons:[{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){yield e.storeService.exitStore(),yield e.reload()}),function(){return r.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}productName(e,n){return x.W.productName(e,n)}get isShowPaging(){return!!(this.orders&&this.orders.length>this.pageSize)}previousPage(){this.currentPage<=0?this.currentPage=0:(this.currentPage--,this.start=this.currentPage*this.pageSize,this.end=this.start+this.pageSize-1,this.content.scrollToTop())}nextPage(){(this.currentPage+1)*this.pageSize>=this.orders.length||(this.currentPage++,this.start=this.currentPage*this.pageSize,this.end=this.start+this.pageSize-1,this.content.scrollToTop())}showSelect(){this.selectMode=!0,this.isSelectAll=!1}exitSelectMode(){this.selectMode=!1,this.isSelectAll=!1;for(const e of this.orders)e.isSelected=!1;this.orderSelectedChange()}multiDelete(){var e=this;return(0,d.Z)(function*(){const n=e.orders?e.orders.filter(i=>i.isSelected).length:0;var i;0!==n?yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("order-detail.multi-delete-alert",{count:n}),buttons:[{text:e.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(){const a=yield e.navCtrl.loading(),l=[],u=[];for(const g of e.orders)g.isSelected&&(l.push(g),u.push(e.orderService.deleteOrder(g)));yield Promise.all(u);for(const g of l){e.analyticsService.logEvent("order-delete-success");let _=e.orders.findIndex(f=>f.id===g.id);_>=0&&e.orders.splice(_,1),_=e.originalOrders.findIndex(f=>f.id===g.id),_>=0&&e.originalOrders.splice(_,1)}e.selectMode=!1,yield a.dismiss()}),function(){return i.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present():alert(e.translateService.instant("order-detail.multi-delete-no-order-alert"))})()}selectAll(){for(const e of this.orders)e.isSelected=!1;for(let e=this.start;e<this.end;e++){const n=this.orders[e];n&&(n.isSelected=this.isSelectAll)}this.orderSelectedChange()}multiEdit(){this.multiEditMode=!this.multiEditMode}showHelpMultiEditForField(){alert(this.translateService.instant("order.multi-edit-field-apply-des"))}applyMultiEditForField(e="status"){if(0!==(this.orders?this.orders.filter(r=>r.isSelected).length:0))for(const r of this.orders)r.isSelected&&(r[e]=this.multiStatus);else alert(this.translateService.instant("order-detail.multi-delete-no-order-alert"))}revertValues(){let e=0;for(const n of this.orders)if(n.isSelected){const r=this.originalOrders.find(i=>i.id===n.id);n.status=r.status,e++}e||alert(this.translateService.instant("common.no-selected-item-alert"))}saveMultiEdit(){var e=this;return(0,d.Z)(function*(){const n=yield e.navCtrl.loading();let r=0;for(const i of e.orders)if(i.isSelected){const a=e.originalOrders.find(l=>l.id===i.id);if(!a)continue;yield e.orderService.saveOrderStatus(i),r++,a.status=i.status}if(!r)return yield n.dismiss(),void alert(e.translateService.instant("common.no-selected-item-alert"));yield n.dismiss(),e.presentToast(e.translateService.instant("common.saved-item-alert",{count:r})),e.multiStatus=0})()}presentToast(e){var n=this;return(0,d.Z)(function*(){yield(yield n.toastCtrl.create({message:e,duration:3e3,position:"bottom",color:"danger"})).present()})()}changeValue(e,n){const r=this.originalOrders.find(i=>i.id===e.id);!r||e[n]!==r[n]&&!e.isSelected&&(e.isSelected=!0,this.orderSelectedChange())}orderSelectedChange(){let e=0;for(const n of this.orders)n.isSelected&&e++;this.selectedCount=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.t4),t.Y36(tt.p),t.Y36(b.sK),t.Y36(D.K),t.Y36(X.M),t.Y36(R.m),t.Y36(V.x),t.Y36(s.IN),t.Y36(s.BX),t.Y36(s.Br),t.Y36(ft.$),t.Y36(K.d),t.Y36(k.G),t.Y36(I.y),t.Y36(ct.D),t.Y36(s.yF),t.Y36(j.x),t.Y36(rt.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order"]],viewQuery:function(e,n){if(1&e&&t.Gf(s.W2,7),2&e){let r;t.iGM(r=t.CRH())&&(n.content=r.first)}},decls:43,vars:45,consts:[["slot","start"],["menu","first"],["color","primary",3,"click"],["name","home"],["slot","end",4,"ngIf"],["lines","none","color","success",4,"ngIf"],["debounce","700",3,"placeholder","ngModel","ionClear","ionChange","ngModelChange"],[2,"padding-left","10px","padding-right","10px"],["page","order",3,"modeLink","onPeriodChanged"],[2,"border-bottom","1px solid #ccc"],[3,"size"],["lines","none",1,"ion-text-wrap","ion-no-padding"],["slot","start",4,"ngIf"],["color","primary"],["color","dark"],[4,"ngIf"],["size","4","class","ion-text-right",4,"ngIf"],["style","padding: 10px; margin: 10px; background-color: #f0ad4e; color: white; border-radius: 10px;",4,"ngIf"],["class","ion-padding",4,"ngIf"],["text-wrap","","lines","none","style","padding-top: 10px;",4,"ngIf"],["class","ion-no-padding","lines","none",4,"ngIf"],["button","","detail","","lines","none",3,"click",4,"ngIf"],["class","ion-padding","style","padding-top: 0 !important;",4,"ngIf"],["vertical","bottom","horizontal","start","slot","fixed",3,"style",4,"ngIf"],["slot","end"],[3,"click"],["icon","file-excel","size","lg"],["slot","icon-only","name","add-circle"],["slot","icon-only","name","ellipsis-vertical"],["lines","none","color","success"],[1,"ion-text-wrap"],["size","small",3,"click"],["name","exit","slot","start","size","small"],["color","primary","fill","outline","size","small",3,"click"],["slot","start","name","list-outline"],["color","tertiary","fill","outline","size","small",3,"click"],["name","print"],["color","danger","fill","outline","size","small",3,"click"],["name","trash","slot","end"],["name","exit-outline","slot","end"],["color","primary","fill","outline",3,"click",4,"ngIf"],["size","small",3,"click",4,"ngIf"],["size","small","color","primary",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["color","primary","fill","outline",3,"click"],["name","pencil","slot","end"],["name","close"],["name","arrow-undo-outline"],["size","small","color","primary",3,"click"],["name","checkmark"],["slot","icon-only","name","help-circle-outline","color","danger","size","small"],["size","4",1,"ion-text-right"],[1,"ion-text-wrap","ion-text-right"],[1,"ion-float-right"],["fill","solid","size","small",3,"click"],["slot","icon-only","name","arrow-back-circle"],["slot","icon-only","name","arrow-forward-circle"],["slot","start","color","primary",3,"ngModel","ngModelChange"],["name","trash"],["fill","outline","size","small",3,"click"],["name","exit-outline"],[2,"padding","10px","margin","10px","background-color","#f0ad4e","color","white","border-radius","10px"],[2,"margin","5px 5px 5px 5px"],["color","success","fill","solid",3,"click"],["name","gift","slot","start"],[3,"order","currency","showContact","selectMode","isSelected","onPress","onClick",4,"ngFor","ngForOf"],[3,"order","currency","showContact","selectMode","isSelected","onPress","onClick"],[1,"ion-padding"],["size","auto",4,"ngIf"],["style","border-bottom: 1px solid #ccc;",4,"ngIf"],["style","border-bottom: 1px solid #ccc;",3,"cursor","press","click",4,"ngFor","ngForOf"],["size","auto"],["color","primary",3,"ngModel","ngModelChange"],["lines","none"],["style","--margin-top: 0; --padding-top:0; --padding-start: 0;",3,"ngModel","ngModelChange",4,"ngIf"],[2,"--margin-top","0","--padding-top","0","--padding-start","0",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],["slot","icon-only","name","checkmark-done","color","tertiary","size","small"],[2,"border-bottom","1px solid #ccc",3,"press","click"],["style","padding: 0; margin: 0; font-size: 0.8em;",4,"ngIf"],[4,"ngFor","ngForOf"],["style","font-size: 0.8em;",4,"ngIf"],[2,"font-size","0.8em"],["style","padding: 0; margin: 0;",4,"ngIf"],[2,"padding","0","margin","0","font-size","0.8em"],["color","secondary"],["style","font-size: 0.8em; margin: 3px 0 0 0;",4,"ngIf"],[2,"font-size","0.8em","margin","3px 0 0 0"],[2,"padding","0","margin","0","font-size","0.68em"],["style","padding: 0; margin: 0; font-size: 0.68em;",4,"ngFor","ngForOf"],[2,"padding","0","margin","0"],["color","dark",4,"ngIf"],["color","secondary",4,"ngIf"],["color","primary",4,"ngIf"],["color","danger",4,"ngIf"],["color","danger"],["text-wrap","","lines","none",2,"padding-top","10px"],[3,"innerHTML"],["lines","none",1,"ion-no-padding"],["slot","end",1,"ion-text-right"],["slot","end",1,"ion-float-right"],["button","","detail","","lines","none",3,"click"],["name","help","slot","start"],[1,"ion-padding",2,"padding-top","0 !important"],["vertical","bottom","horizontal","start","slot","fixed"],["name","add"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-menu-button",1),t.TgZ(4,"ion-button",2),t.NdJ("click",function(){return n.navCtrl.home()}),t._UZ(5,"ion-icon",3),t.qZA()(),t.TgZ(6,"ion-title"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,eo,7,0,"ion-buttons",4),t.qZA(),t.YNc(10,no,8,4,"ion-item",5),t.TgZ(11,"ion-searchbar",6),t.NdJ("ionClear",function(){return n.clearSearch()})("ionChange",function(){return n.search()})("ngModelChange",function(i){return n.searchKey=i}),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",7)(14,"period-range",8),t.NdJ("onPeriodChanged",function(i){return n.onPeriodChanged(i)}),t.qZA()(),t.TgZ(15,"ion-grid")(16,"ion-row",9)(17,"ion-col",10)(18,"ion-item",11),t.YNc(19,oo,5,3,"ion-buttons",12),t.YNc(20,ro,11,3,"ion-buttons",12),t.YNc(21,_o,6,5,"ion-buttons",4),t.TgZ(22,"ion-label",13),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"currency"),t.TgZ(26,"p")(27,"ion-text",14),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,po,3,4,"ion-label",15),t.qZA()(),t.YNc(31,uo,10,4,"ion-col",16),t.qZA()(),t.YNc(32,mo,2,1,"ng-container",15),t.qZA(),t.TgZ(33,"ion-content"),t.YNc(34,fo,8,6,"div",17),t.TgZ(35,"ion-list"),t.YNc(36,ho,3,5,"ng-container",15),t.YNc(37,dr,42,34,"ion-grid",18),t.YNc(38,_r,3,3,"ion-item",19),t.YNc(39,pr,9,4,"ion-item",20),t.YNc(40,ur,5,3,"ion-item",21),t.qZA(),t.YNc(41,gr,2,0,"div",22),t.YNc(42,mr,3,2,"ion-fab",23),t.qZA()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,27,"order.title")),t.xp6(2),t.Q6J("ngIf",!n.getOrderNoDone),t.xp6(1),t.Q6J("ngIf",n.checkStore&&(null===n.selectedStaff||n.selectedStaff.hasFullAccess&&!n.selectedStaff.storeId)),t.xp6(1),t.s9C("placeholder",t.lcZ(12,29,"order.search")),t.Q6J("ngModel",n.searchKey),t.xp6(3),t.Q6J("modeLink",!0),t.xp6(3),t.Q6J("size",n.isShowPaging&&n.orders&&n.orders.length?8:12),t.xp6(2),t.Q6J("ngIf",!n.selectMode&&!n.isMobile),t.xp6(1),t.Q6J("ngIf",n.selectMode&&!n.isMobile),t.xp6(1),t.Q6J("ngIf",!n.isMobile),t.xp6(2),t.AsE(" ",t.lcZ(24,31,"common.total"),": ",t.G7q(25,33,t.kEZ(41,G,n.total,n.currency,n.translateService.currentLang))," "),t.xp6(5),t.AsE(" ",n.orders&&n.orders.length?n.orders.length:0," ",t.lcZ(29,39,"order.order(s)")," "),t.xp6(2),t.Q6J("ngIf",n.selectedCount),t.xp6(1),t.Q6J("ngIf",n.isShowPaging&&n.orders&&n.orders.length),t.xp6(1),t.Q6J("ngIf",n.isMobile),t.xp6(1),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("ngIf",!n.currentPlan&&!n.isOnTrial),t.xp6(2),t.Q6J("ngIf",n.isMobile),t.xp6(1),t.Q6J("ngIf",!n.isMobile&&n.orders&&n.orders.length),t.xp6(1),t.Q6J("ngIf",!n.originalOrders||0===n.originalOrders.length),t.xp6(1),t.Q6J("ngIf",n.isShowPaging&&n.orders&&n.orders.length),t.xp6(1),t.Q6J("ngIf",!n.originalOrders||0===n.originalOrders.length),t.xp6(1),t.Q6J("ngIf",!n.originalOrders||0===n.originalOrders.length),t.xp6(1),t.Q6J("ngIf",!n.getOrderNoDone))},dependencies:[y.sg,y.O5,w.JJ,w.On,s.YG,s.Sm,s.nz,s.wI,s.W2,s.IJ,s.W4,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.fG,s.Nd,s.VI,s.t9,s.n0,s.yW,s.wd,s.sr,s.w,s.QI,s.j9,Xn.M,to.e,gt.Y,W.BN,y.OU,y.H9,b.X$],encapsulation:2}),o})();var xr=h(2035),hr=h(9854),at=h(9921),Zr=h(6391);const Ar=["barcode"];function Tr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",4),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.edit())}),t._UZ(1,"ion-icon",30),t.qZA()}}function Cr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",4),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.presentActionSheet())}),t._UZ(1,"ion-icon",31),t.qZA()}}function yr(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" - ",e.order.table.position,"")}}function vr(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,yr,2,1,"span",6),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.table.name),t.xp6(1),t.Q6J("ngIf",e.order.table.position)}}function Sr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",32)(3,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.swapTable())}),t._UZ(4,"ion-icon",34),t.TgZ(5,"ion-label"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,vr,3,2,"span",6),t.qZA(),t.TgZ(9,"ion-col",35)(10,"ion-button",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.finish())}),t._UZ(11,"ion-icon",37),t._uU(12),t.ALo(13,"translate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,3,"order-detail.swap-table")),t.xp6(2),t.Q6J("ngIf",e.order.table),t.xp6(4),t.hij("\xa0",t.lcZ(13,5,"order-detail.finish")," ")}}function br(o,c){if(1&o&&(t.TgZ(0,"ion-col",7)(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"ion-text"),t._uU(6),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"trade.staff")),t.xp6(4),t.Oqu(e.order.staff.name)}}function qr(o,c){1&o&&(t.TgZ(0,"ion-select-option",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.Q6J("value",3),t.xp6(1),t.Oqu(t.lcZ(2,2,"order-detail.status-done")))}function Or(o,c){1&o&&(t.TgZ(0,"ion-item-divider",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.contact-info")," "))}function wr(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contact.address)}}function Ur(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item",39)(2,"ion-avatar",0),t._UZ(3,"img",40),t.qZA(),t.TgZ(4,"ion-label")(5,"h2")(6,"b"),t._uU(7),t.qZA()(),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.YNc(10,wr,2,1,"p",6),t.qZA(),t.TgZ(11,"ion-icon",41),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.copy(r.order.contact.fullName+(r.order.contact.mobile?"\n"+r.order.contact.mobile:"")+(r.order.contact.address?"\n"+r.order.contact.address:"")))}),t.qZA()(),t.TgZ(12,"ion-item-options",42)(13,"ion-item-option",4),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.text())}),t._UZ(14,"ion-icon",43),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-item-option",44),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.call())}),t._UZ(18,"ion-icon",45),t._uU(19),t.ALo(20,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("src",e.contactImageOrPlaceholder(),t.LSH),t.xp6(4),t.Oqu(e.order.contact.fullName),t.xp6(2),t.Oqu(e.order.contact.mobile),t.xp6(1),t.Q6J("ngIf",e.order.contact.address),t.xp6(5),t.hij(" ",t.lcZ(16,6,"action.text")," "),t.xp6(4),t.hij(" ",t.lcZ(20,8,"action.call")," ")}}function Lr(o,c){if(1&o&&(t.TgZ(0,"h2")(1,"b"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.order.contactName)}}function Nr(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contactPhone)}}function Jr(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contactAddress)}}function kr(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",39)(1,"ion-label"),t.YNc(2,Lr,3,1,"h2",6),t.YNc(3,Nr,2,1,"p",6),t.YNc(4,Jr,2,1,"p",6),t.qZA(),t.TgZ(5,"ion-icon",41),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.copy(r.order.contactName+(r.order.contactPhone?"\n"+r.order.contactPhone:"")+(r.order.contactAddress?"\n"+r.order.contactAddress:"")))}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.order.contactName),t.xp6(1),t.Q6J("ngIf",e.order.contactPhone),t.xp6(1),t.Q6J("ngIf",e.order.contactAddress)}}function Ir(o,c){1&o&&(t.TgZ(0,"ion-item-divider",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.product")," "))}function Qr(o,c){if(1&o&&(t.TgZ(0,"p",49),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.note)}}function Pr(o,c){if(1&o&&(t.TgZ(0,"p",52)(1,"ion-text"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getTypeAttributesString(e)," ")}}function Er(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",52)(2,"ion-text"),t._uU(3),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getAttributesString(e)," ")}}const q=function(o,c,e){return[o,c,"symbol","1.0-2",e]};function Mr(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(4);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.kEZ(8,q,e.price,n.currency,n.translateService.currentLang)),"")}}function Yr(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Fr(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",52)(2,"ion-text"),t._uU(3),t.YNc(4,Mr,3,12,"span",6),t._uU(5," | "),t.YNc(6,Yr,2,0,"span",6),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(4);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.kEZ(12,q,e.total,n.currency,n.translateService.currentLang))," ")}}function jr(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",52)(2,"ion-text")(3,"strong"),t._uU(4),t.qZA()()(),t.YNc(5,Fr,9,16,"ng-container",21),t.BQk()),2&o){const e=c.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(1),t.Q6J("ngForOf",e.values)}}function Dr(o,c){if(1&o&&(t.TgZ(0,"p",52),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(4);t.xp6(1),t.xDo(" ",n.productName(e.code,e.title)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,5,t.kEZ(17,q,e.price,n.currency,n.translateService.currentLang))," | +",t.G7q(3,11,t.kEZ(21,q,e.total,n.currency,n.translateService.currentLang))," ")}}function Gr(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",52)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Dr,4,25,"p",53),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.added-products")),t.xp6(2),t.Q6J("ngForOf",e.options)}}function Hr(o,c){if(1&o&&(t.TgZ(0,"ion-text",50),t.YNc(1,Pr,3,3,"p",51),t.YNc(2,Er,4,3,"ng-container",6),t.YNc(3,jr,6,2,"ng-container",21),t.YNc(4,Gr,6,4,"ng-container",6),t.qZA()),2&o){const e=t.oxw().$implicit;t.Udp("font-weight","normal"),t.xp6(1),t.Q6J("ngIf",e.typeAttributes&&e.typeAttributes.length),t.xp6(1),t.Q6J("ngIf",e.attributes&&e.attributes.length),t.xp6(1),t.Q6J("ngForOf",e.typeOptions),t.xp6(1),t.Q6J("ngIf",e.options&&e.options.length)}}function Kr(o,c){if(1&o&&(t.TgZ(0,"p",54),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(1),t.HOy(" ",n.productName(e.productCode,e.productName)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,4,t.kEZ(10,q,e.price,n.currency,n.translateService.currentLang))," ")}}function Br(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",54)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Kr,3,14,"p",55),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.items)}}function $r(o,c){if(1&o&&(t.TgZ(0,"span",56),t._UZ(1,"br"),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"order-add.product-discount-short"),": -",t.G7q(4,4,t.kEZ(10,q,e.discount,n.currency,n.translateService.currentLang)),"")}}function zr(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",22),t._uU(2),t.ALo(3,"currency"),t.YNc(4,Qr,2,1,"p",46),t.YNc(5,Hr,5,6,"ion-text",47),t.YNc(6,Br,6,4,"ng-container",6),t.qZA(),t.TgZ(7,"ion-text",23),t._uU(8),t.ALo(9,"currency"),t.YNc(10,$r,5,14,"span",48),t.qZA()()),2&o){const e=c.$implicit,n=c.index,r=t.oxw();t.xp6(2),t.xDo(" ",n+1,". ",r.productName(e.productCode,e.productName)," | ",e.count," ",e.unit," \xd7 ",t.G7q(3,10,t.kEZ(22,q,e.price+r.getOptionPrices(e),r.currency,r.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.note),t.xp6(1),t.Q6J("ngIf",r.hasOptionsOrAttributes(e)),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length),t.xp6(2),t.hij("+",t.G7q(9,16,t.kEZ(26,q,e.total,r.currency,r.translateService.currentLang)),""),t.xp6(2),t.Q6J("ngIf",e.discount)}}function Vr(o,c){1&o&&(t.TgZ(0,"ion-item-divider",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.note")," "))}function Wr(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.order.note)}}function Rr(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",57),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.total-promotion-discount"),":"),t.xp6(3),t.hij("-",t.G7q(6,4,t.kEZ(10,q,e.order.totalPromotionDiscount,e.currency,e.translateService.currentLang)),"")}}function Xr(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",57),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.discount"),":"),t.xp6(3),t.hij("-",t.G7q(6,4,t.kEZ(10,q,e.order.discountOnTotal,e.currency,e.translateService.currentLang)),"")}}function ti(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",58)(2,"b"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"span",2),t._uU(6),t.ALo(7,"currency"),t.ALo(8,"translate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(3),t.hij("",t.lcZ(4,4,"order-add.pay-by-point"),":"),t.xp6(3),t.lnq("-",t.G7q(7,6,t.kEZ(14,q,e.order.amountFromPoint,e.currency,e.translateService.currentLang))," (",e.order.pointAmount," ",t.lcZ(8,12,"point-add.point"),")")}}function ei(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.tax"),":"),t.xp6(3),t.hij("+",t.G7q(6,4,t.kEZ(10,q,e.order.tax,e.currency,e.translateService.currentLang)),"")}}function ni(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.shipping-fee"),":"),t.xp6(3),t.hij("+",t.G7q(6,4,t.kEZ(10,q,e.order.shippingFee,e.currency,e.translateService.currentLang)),"")}}function oi(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.paid"),":"),t.xp6(3),t.Oqu(t.G7q(6,4,t.kEZ(10,q,e.order.paid,e.currency,e.translateService.currentLang)))}}function ri(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.change"),":"),t.xp6(3),t.Oqu(t.G7q(6,4,t.kEZ(10,q,e.order.change,e.currency,e.translateService.currentLang)))}}function ii(o,c){1&o&&(t.TgZ(0,"ion-item-divider",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"order-add.shipping")," "))}function ci(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.bill-of-lading-code"),":"),t.xp6(3),t.Oqu(e.order.billOfLadingCode)}}function ai(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.shipping-partner"),":"),t.xp6(3),t.Oqu(e.order.shippingPartner)}}function si(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.shipper-name"),":"),t.xp6(3),t.Oqu(e.order.shipperName)}}function li(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.shipper-phone"),":"),t.xp6(3),t.Oqu(e.order.shipperPhone)}}function di(o,c){if(1&o&&(t.TgZ(0,"ion-item")(1,"ion-text",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"order-add.delivery-address"),":"),t.xp6(3),t.Oqu(e.order.deliveryAddress)}}function _i(o,c){if(1&o&&(t.TgZ(0,"ion-list"),t.YNc(1,Vr,3,3,"ion-item-divider",18),t.YNc(2,Wr,3,1,"ion-item",6),t.TgZ(3,"ion-item-divider",38),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,Rr,7,14,"ion-item",6),t.YNc(7,Xr,7,14,"ion-item",6),t.TgZ(8,"ion-item")(9,"ion-text",8),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"span",2),t._uU(13),t.ALo(14,"currency"),t.qZA()(),t.YNc(15,ti,9,18,"ion-item",6),t.YNc(16,ei,7,14,"ion-item",6),t.YNc(17,ni,7,14,"ion-item",6),t.TgZ(18,"ion-item")(19,"ion-text",8)(20,"b"),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"span",2)(24,"b"),t._uU(25),t.ALo(26,"currency"),t.qZA()()(),t.YNc(27,oi,7,14,"ion-item",6),t.YNc(28,ri,7,14,"ion-item",6),t.YNc(29,ii,3,3,"ion-item-divider",18),t.YNc(30,ci,6,4,"ion-item",6),t.YNc(31,ai,6,4,"ion-item",6),t.YNc(32,si,6,4,"ion-item",6),t.YNc(33,li,6,4,"ion-item",6),t.YNc(34,di,6,4,"ion-item",6),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.order.note),t.xp6(1),t.Q6J("ngIf",e.order.note),t.xp6(2),t.hij(" ",t.lcZ(5,20,"order-add.payment")," "),t.xp6(2),t.Q6J("ngIf",e.order.totalPromotionDiscount),t.xp6(1),t.Q6J("ngIf",e.order.discountOnTotal),t.xp6(3),t.hij("",t.lcZ(11,22,"order-add.net-value"),":"),t.xp6(3),t.Oqu(t.G7q(14,24,t.kEZ(38,q,e.order.netValue,e.currency,e.translateService.currentLang))),t.xp6(2),t.Q6J("ngIf",e.order.amountFromPoint&&e.order.pointAmount),t.xp6(1),t.Q6J("ngIf",!e.hideTax),t.xp6(1),t.Q6J("ngIf",e.order.shippingFee),t.xp6(4),t.hij("",t.lcZ(22,30,"order-add.total"),":"),t.xp6(4),t.Oqu(t.G7q(26,32,t.kEZ(42,q,e.order.total,e.currency,e.translateService.currentLang))),t.xp6(2),t.Q6J("ngIf",null!==e.order.paid),t.xp6(1),t.Q6J("ngIf",null!==e.order.paid&&e.order.change),t.xp6(1),t.Q6J("ngIf",e.order.hasShipInfo),t.xp6(1),t.Q6J("ngIf",e.order.billOfLadingCode),t.xp6(1),t.Q6J("ngIf",e.order.shippingPartner),t.xp6(1),t.Q6J("ngIf",e.order.shipperName),t.xp6(1),t.Q6J("ngIf",e.order.shipperPhone),t.xp6(1),t.Q6J("ngIf",e.order.deliveryAddress)}}function pi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t._UZ(4,"br"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"common.from")," ",e.dateFormat(e.dateDebtFrom)," ",t.lcZ(3,6,"common.to")," ",e.dateFormat(e.dateDebtTo)," ")}}function ui(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"debt-item",66),t.NdJ("onClick",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.selectDebt(i.id))}),t.qZA()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.Q6J("showContact",!1)("debt",e)("currency",n.currency)}}function gi(o,c){1&o&&(t.TgZ(0,"ion-item",67),t._UZ(1,"div",68),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,"order-detail.no-debt"),t.oJD))}function mi(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label",59),t.YNc(3,pi,5,8,"span",6),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"ion-text",57),t._uU(7),t.ALo(8,"currency"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.TgZ(11,"ion-text",58),t._uU(12),t.ALo(13,"currency"),t.qZA()(),t.TgZ(14,"ion-buttons",2)(15,"ion-button",60),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.selectDateRangeForDebt())}),t._UZ(16,"ion-icon",61),t.qZA(),t.TgZ(17,"ion-button",62),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addDebt())}),t._UZ(18,"ion-icon",63),t.qZA()()(),t.YNc(19,ui,1,3,"debt-item",64),t.YNc(20,gi,3,3,"ion-item",65),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",""!=e.dateDebtFrom||""!=e.dateDebtTo),t.xp6(1),t.hij(" ",t.lcZ(5,7,"common.total"),":\xa0 "),t.xp6(3),t.hij("",t.G7q(8,9,t.kEZ(23,q,e.totalDebt,e.currency,e.translateService.currentLang))," "),t.xp6(2),t.hij(" / ",t.lcZ(10,15,"debt-detail.paid"),":\xa0 "),t.xp6(3),t.Oqu(t.G7q(13,17,t.kEZ(27,q,e.totalDebtPaid,e.currency,e.translateService.currentLang))),t.xp6(7),t.Q6J("ngForOf",e.debts),t.xp6(1),t.Q6J("ngIf",!e.debts||0===e.debts.length)}}let fi=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f,S,U,M,Z,J,P,E,Y,p){this.printer=e,this.navCtrl=n,this.file=r,this.modalCtrl=i,this.translateService=a,this.orderService=l,this.tradeService=u,this.contactService=g,this.debtService=_,this.userService=f,this.staffService=S,this.actionSheetCtrl=U,this.excelService=M,this.alertCtrl=Z,this.analyticsService=J,this.toastCtrl=P,this.storage=E,this.platform=Y,this.productService=p,this.params=null,this.order=new F.K,this.isDisabled=!1,this.isOwner=!1,this.isOwnerValidTime=!1,this.tab="info",this.debts=[],this.dateDebtFrom="",this.dateDebtTo="",this.totalDebt=0,this.totalDebtPaid=0,this.hideTax=!1,this.totalProductsAmount=0,this.totalProductsQuantity=0,this.lang="vn",this.onKeyPress=v=>{!v.target||"body"!==v.target.localName||("p"===v.key||"P"===v.key)&&this.printOrder()},this.onLoadOrder=v=>{this.order&&v.detail.id===this.order.id&&this.reload()},this.navCtrl.removeEventListener("reloadOrder",this.onLoadOrder),this.navCtrl.addEventListener("reloadOrder",this.onLoadOrder)}ionViewDidEnter(){this.navCtrl.addEventListener("keyup",this.onKeyPress)}ionViewWillLeave(){this.navCtrl.removeEventListener("keyup",this.onKeyPress)}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-detail")})()}ngOnInit(){this.selectedStaff=this.staffService.selectedStaff,this.reload()}selectDateRangeForDebt(){var e=this;return(0,d.Z)(function*(){const n=yield e.modalCtrl.create({component:_t.S,componentProps:{dateFromInput:e.dateDebtFrom,dateToInput:e.dateDebtTo}});yield n.present();const{data:r}=yield n.onDidDismiss();r&&(e.dateDebtFrom=""!==r.dateFrom?A.C.toDbString(r.dateFrom,A.C.getDbFormat()):"",e.dateDebtTo=""!==r.dateTo?A.C.toDbString(r.dateTo,A.C.getDbFormat()):"",e.debtService.getDebtsByOrder(e.order.id,e.dateDebtFrom,e.dateDebtTo).then(i=>{i&&i.length>0&&(i=C.orderBy(i,["modifiedAt"],["desc"])),e.debts=i,e.totalDebt=C.sumBy(e.debts,a=>a.value),e.totalDebtPaid=C.sumBy(e.debts,a=>a.valuePaid)}))})()}reload(){var e=this;return(0,d.Z)(function*(){const n=yield e.navCtrl.loading();e.currency=yield e.userService.getAttr("current-currency"),e.hideTax=yield e.userService.getAttr("hide-tax"),e.order=new F.K;const r=e.params?e.params:e.navCtrl.getParams();e.params=r,r&&r.id&&r.id>0&&e.orderService.get(r.id).then(function(){var a=(0,d.Z)(function*(l){yield n.dismiss(),e.order=l,e.order.items=l&&l.itemsJson?JSON.parse(l.itemsJson):[],e.totalProductsAmount=e.order.items&&e.order.items.length?C.sumBy(e.order.items,g=>g.total):0,e.totalProductsQuantity=e.order.items&&e.order.items.length?C.sumBy(e.order.items,g=>g.count):0,e.dateDebtFrom="",e.dateDebtTo="",e.dateDebtFrom=r.dateDebtFrom?r.dateDebtFrom:A.C.GetFirstDateOfMonth(),e.dateDebtTo=r.dateDebtTo?r.dateDebtTo:A.C.GetEndDateOfMonth();let u=l.createdAt;u.indexOf(":00Z")<0&&(u=L(u).format(A.C.getDateTimeDbFormat())),e.isOwner=e.selectedStaff&&e.selectedStaff.id===e.order.staffId,e.isOwnerValidTime=e.selectedStaff&&(e.selectedStaff.canCreateOrder&&A.C.getMoment(u).add(e.selectedStaff.hourLimit,"hours").toDate()>=L().toDate()||e.selectedStaff.canUpdateDeleteOrder),e.debtService.getDebtsByOrder(l.id,e.dateDebtFrom,e.dateDebtTo).then(g=>{e.originalDebts=JSON.parse(JSON.stringify(g)),g&&g.length>0&&(g=C.orderBy(g,["modifiedAt"],["desc"])),e.debts=g,e.totalDebt=C.sumBy(e.debts,_=>_.value),e.totalDebtPaid=C.sumBy(e.debts,_=>_.valuePaid)}),setTimeout(()=>{xr(e.barcode.nativeElement,e.order.orderCode.toString(),{displayValue:!0,fontSize:12.5,textMargin:0,height:50,margin:3}),e.barcode64base=e.barcode.nativeElement.toDataURL("image/png")},1e3)});return function(l){return a.apply(this,arguments)}}())})()}printBarcode(){const e=`<div style='text-align: center;'><img src='${this.barcode64base}'/></div>`;this.navCtrl.isNotCordova()?x.W.webPrint(e):this.printer.print(e).then(()=>{})}isNotCordova(){return this.navCtrl.isNotCordova()}call(){this.saveLastActive("call"),x.W.callPhone(this.order.contact.mobile)}text(){this.saveLastActive("text"),x.W.sendSms(this.order.contact.mobile)}saveLastActive(e){return this.order.contact.lastActive=A.C.toDbString(),this.order.contact.lastAction=e,this.contactService.saveContact(this.order.contact).then(n=>(this.navCtrl.publish("reloadContactList"),this.navCtrl.publish("reloadContact",this.order.contact),n))}contactImageOrPlaceholder(){return x.W.contactImageOrPlaceholder(this.order.contact.avatarUrl)}dateFormat(e){let n=e;return e.indexOf(":00Z")<0&&(n=L(e).format(A.C.getDateTimeDbFormat())),A.C.toUiLocalDateTimeString(n)}actionIcon(e){return x.W.actionIcon(e)}dateTimeFormat(e){return A.C.toUiString(e)}edit(){this.navCtrl.navigateForward("/order/add",{id:this.order.id})}presentActionSheet(){var e=this;return(0,d.Z)(function*(){const n=[];(e.isOwner&&e.isOwnerValidTime||!e.selectedStaff||e.selectedStaff.hasFullAccess)&&n.push({text:e.translateService.instant("order.delete-order"),role:"destructive",handler:()=>{e.deleteOrder()}}),n.push({text:e.translateService.instant("order-detail.share"),handler:()=>{e.shareOrder()}},{text:e.translateService.instant("order.copy"),handler:()=>{e.copyOrder()}},{text:e.translateService.instant("order-detail.print"),handler:()=>{e.printOrder()}},{text:e.translateService.instant("order-detail.export"),handler:()=>{e.exportOrder()}},{text:e.translateService.instant("order-detail.add-debt"),handler:()=>{e.addDebt()}},{text:e.translateService.instant("common.cancel"),role:"cancel",handler:()=>{}}),yield(yield e.actionSheetCtrl.create({header:e.translateService.instant("action.action"),buttons:n})).present()})()}deleteOrder(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("order.delete-alert"),buttons:[{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){yield e.deleteRelated(),e.orderService.deleteOrder(e.order).then((0,d.Z)(function*(){e.analyticsService.logEvent("order-detail-delete-success"),e.navCtrl.publish("reloadOrderList"),e.navCtrl.publish("reloadContact",e.order.contact),e.navCtrl.back()}))}),function(){return r.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}deleteRelated(){var e=this;return(0,d.Z)(function*(){const n=[],r=yield e.tradeService.getTradesByOrder(e.order.id);for(const a of r)a.debtId||n.push(e.tradeService.deleteTrade(a));const i=yield e.productService.getNotesByOrder(e.order.id);for(const a of i)n.push(e.productService.deleteProductNote(a));yield Promise.all(n)})()}productName(e,n){return x.W.productName(e,n)}shareOrder(){this.navCtrl.push("/order/detail-print",{order:this.order,mode:"share"})}copyOrder(){this.navCtrl.push("/order/add",{order:this.order,mode:"copy"})}printOrder(){var e=this;return(0,d.Z)(function*(){const n=yield e.storage.get("print-alert-no-repeat");n&&"0"!==n?e.navCtrl.push("/order/detail-print",{order:e.order,mode:"print"}):e.navCtrl.push("/order/print-alert",{order:e.order})})()}exportOrder(){var e=this;const n=[];n.push([this.translateService.instant("order-detail.title")]),n.push([this.translateService.instant("order-add.order-code"),"#"+this.order.orderCode]);let r="";0===this.order.status?r=this.translateService.instant("order-detail.status-draft"):1===this.order.status?r=this.translateService.instant("order-detail.status-inprogress"):2===this.order.status?r=this.translateService.instant("order-detail.status-shipping"):3===this.order.status?r=this.translateService.instant("order-detail.status-done"):4===this.order.status&&(r=this.translateService.instant("order-detail.status-cancel")),n.push([this.translateService.instant("order-detail.status"),r]),0!==this.order.contactId&&this.order.contact&&this.order.contact.fullName&&n.push([this.translateService.instant("contact-add.full-name"),this.order.contact.fullName]),0!==this.order.contactId&&this.order.contact&&this.order.contact.mobile&&n.push([this.translateService.instant("contact-add.phone"),this.order.contact.mobile]),0===this.order.contactId&&this.order.contactName&&n.push([this.translateService.instant("contact-add.full-name"),this.order.contactName]),0===this.order.contactId&&this.order.contactPhone&&n.push([this.translateService.instant("contact-add.phone"),this.order.contactPhone]),n.push([" "]),n.push([this.translateService.instant("order-add.product-code"),this.translateService.instant("order-add.product-name"),this.translateService.instant("order-add.product-count"),this.translateService.instant("order-add.product-unit"),this.translateService.instant("order-add.product-price"),this.translateService.instant("order-add.product-discount")+" ("+this.currency+")",this.translateService.instant("order-add.product-total")+" ("+this.currency+")"]);for(const l of this.order.items)n.push([l.productCode,l.productName,l.count,l.unit,l.price,l.discount,l.total]);n.push([" "]),n.push([this.translateService.instant("order-add.net-value")+" ("+this.currency+")",this.order.netValue]),n.push([this.translateService.instant("order-add.shipping-fee")+" ("+this.currency+")",this.order.shippingFee]),n.push([this.translateService.instant("order-add.tax")+" ("+this.currency+")",this.order.tax]),n.push([this.translateService.instant("order-add.total")+" ("+this.currency+")",this.order.total]);const i=this.excelService.createSheetData(n),a="order-detail-"+this.order.orderCode+"-"+x.W.getCurrentDate()+".xlsx";this.excelService.exportExcel(i,a).then(function(){var l=(0,d.Z)(function*(u){e.navCtrl.isNotCordova()||(yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report.file-save-alert")+e.file.externalDataDirectory+a,buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{}}]})).present(),e.userService.shareFile(null,u))});return function(u){return l.apply(this,arguments)}}())}addDebt(){this.navCtrl.navigateForward("/debt/add",{order:this.order.id})}changeStatus(){var e=this;this.isDisabled=!0,this.orderService.saveOrderStatus(this.order).then((0,d.Z)(function*(){e.isDisabled=!1,e.navCtrl.publish("reloadOrderList")}))}selectDebt(e){this.navCtrl.navigateForward("/debt/detail",{id:e})}getAttributesString(e){return x.W.getAttributesString(e)}hasOptionsOrAttributes(e){return x.W.hasOptionsOrAttributes(e)}swapTable(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("order-detail.swap-table-alert"),buttons:[{text:e.translateService.instant("common.cancel"),handler:()=>{}},{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){yield e.selectTableToSwap()}),function(){return r.apply(this,arguments)})}]})).present()})()}selectTableToSwap(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-add-search-table");const n=function(){var r=(0,d.Z)(function*(i){if(!i)return;e.order.tableId=i.id,e.order.table=i;const a=yield e.navCtrl.loading();e.orderService.saveOrder(e.order).then((0,d.Z)(function*(){yield a.dismiss(),e.navCtrl.publish("reloadOrderList"),e.navCtrl.publish("reloadTableList"),e.navCtrl.publish("reloadTable",{id:e.order.tableId}),e.presentToast(e.translateService.instant("order-detail.swap-table-success",{table:i.name+(i.position?" -"+i.position:"")}))}))});return function(a){return r.apply(this,arguments)}}();e.navCtrl.push("/table",{callback:n,searchMode:!0})})()}presentToast(e){var n=this;return(0,d.Z)(function*(){yield(yield n.toastCtrl.create({message:e,duration:3e3,position:"top"})).present()})()}finish(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("order-detail.finish-alert"),buttons:[{text:e.translateService.instant("common.cancel"),handler:()=>{}},{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){yield e.doFinish()}),function(){return r.apply(this,arguments)})}]})).present()})()}doFinish(){var e=this;return(0,d.Z)(function*(){e.order.status=3;const n=yield e.navCtrl.loading();e.orderService.saveOrder(e.order).then((0,d.Z)(function*(){yield n.dismiss(),e.navCtrl.publish("reloadOrderList"),e.navCtrl.publish("reloadTableList"),e.navCtrl.publish("reloadTable",{id:e.order.tableId}),yield e.navCtrl.back()}))})()}getTypeAttributesString(e){return x.W.getTypeAttributesString(e)}getOptionPrices(e){return x.W.getOptionPrices(e)}copy(e){var n=this;return(0,d.Z)(function*(){if(n.isCordova())return n.share(e);yield(0,hr.OR)(e);const r=n.translateService.instant("request-pro.copied")+e;yield(yield n.toastCtrl.create({message:r,duration:3e3,position:"bottom"})).present()})()}isCordova(){return this.platform.is("capacitor")||this.platform.is("cordova")}share(e){var n=this;return(0,d.Z)(function*(){yield n.userService.shareText(e)})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(at.F),t.Y36(k.G),t.Y36(ft.$),t.Y36(s.IN),t.Y36(b.sK),t.Y36(tt.p),t.Y36(rt.X),t.Y36(ot.y),t.Y36(ut.E),t.Y36(D.K),t.Y36(j.x),t.Y36(s.BX),t.Y36(V.x),t.Y36(s.Br),t.Y36(I.y),t.Y36(s.yF),t.Y36(it.V),t.Y36(s.t4),t.Y36(X.M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-detail"]],viewQuery:function(e,n){if(1&e&&t.Gf(Ar,5),2&e){let r;t.iGM(r=t.CRH())&&(n.barcode=r.first)}},decls:100,vars:90,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["color","primary",3,"click",4,"ngIf"],["color","primary",3,"click"],["name","print"],[4,"ngIf"],["size-xs","6","size-sm","6","size-md","3"],["color","primary"],[2,"margin-top","5px"],["size-xs","6","size-sm","6","size-md","3",4,"ngIf"],[2,"--margin-top","0","--padding-top","0","--padding-start","0",3,"disabled","ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","info"],["value","debt"],["value","barcode"],["color","light",4,"ngIf"],["lines","none",4,"ngIf"],[3,"hidden"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap",2,"padding-top","8px","padding-bottom","8px"],["slot","end",1,"ion-text-wrap","ion-text-right"],["color","light",3,"hidden"],["fill","clear","color","primary","slot","end",3,"click"],["slot","icon-only","name","print"],["lines","none",2,"text-align","center",3,"hidden"],["id","barcode"],["barcode",""],["name","create"],["name","ellipsis-vertical"],["size","6","size-sm","",2,"text-align","center"],["expand","full","color","secondary",1,"ion-text-wrap",3,"click"],["name","swap-horizontal","slot","start"],["size","6","size-sm",""],["expand","full",3,"click"],["name","checkmark"],["color","light"],["lines","none"],[3,"src"],["name","copy",3,"click"],["size","end"],["slot","start","name","send"],["color","secondary",3,"click"],["slot","start","name","call"],["style","font-size: 0.8em;",4,"ngIf"],["style","font-size: 0.8em;","class","ion-text-wrap",3,"fontWeight",4,"ngIf"],["style","font-size: 0.75em",4,"ngIf"],[2,"font-size","0.8em"],[1,"ion-text-wrap",2,"font-size","0.8em"],["style","padding: 0; margin: 0",4,"ngIf"],[2,"padding","0","margin","0"],["style","padding: 0; margin: 0",4,"ngFor","ngForOf"],[2,"padding","0","margin","0","font-size","0.68em"],["style","padding: 0; margin: 0; font-size: 0.68em;",4,"ngFor","ngForOf"],[2,"font-size","0.75em"],["color","danger"],["color","secondary"],[1,"ion-text-wrap"],["fill","clear","color","secondary","size","small",3,"click"],["slot","icon-only","name","funnel"],["fill","clear","color","primary","size","small",3,"click"],["slot","icon-only","name","add"],[3,"showContact","debt","currency","onClick",4,"ngFor","ngForOf"],["class","ion-text-wrap ion-padding",4,"ngIf"],[3,"showContact","debt","currency","onClick"],[1,"ion-text-wrap","ion-padding"],[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",2),t.YNc(8,Tr,2,0,"ion-button",3),t.TgZ(9,"ion-button",4),t.NdJ("click",function(){return n.printOrder()}),t._UZ(10,"ion-icon",5),t.qZA(),t.YNc(11,Cr,2,0,"ion-button",3),t.qZA()()(),t.TgZ(12,"ion-content"),t.YNc(13,Sr,14,7,"ion-grid",6),t.TgZ(14,"ion-list")(15,"ion-grid")(16,"ion-row")(17,"ion-col",7)(18,"ion-text",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"ion-text",9),t._uU(23),t.qZA()(),t.TgZ(24,"ion-col",7)(25,"ion-text",8),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"br"),t.TgZ(29,"ion-text"),t._uU(30),t.qZA()(),t.YNc(31,br,7,4,"ion-col",10),t.TgZ(32,"ion-col",7)(33,"ion-label",8),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"br"),t.TgZ(37,"ion-select",11),t.NdJ("ngModelChange",function(i){return n.order.status=i})("ngModelChange",function(){return n.changeStatus()}),t.TgZ(38,"ion-select-option",12),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"ion-select-option",12),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"ion-select-option",12),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.YNc(47,qr,3,4,"ion-select-option",13),t.TgZ(48,"ion-select-option",12),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"ion-select-option",12),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"ion-select-option",12),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"ion-select-option",12),t._uU(58),t.ALo(59,"translate"),t.qZA()()()()(),t.TgZ(60,"ion-segment",14),t.NdJ("ngModelChange",function(i){return n.tab=i}),t.TgZ(61,"ion-segment-button",15),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"ion-segment-button",16),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"ion-segment-button",17),t._uU(68),t.ALo(69,"translate"),t.qZA()(),t.YNc(70,Or,3,3,"ion-item-divider",18),t.YNc(71,Ur,21,10,"ion-item-sliding",6),t.YNc(72,kr,6,3,"ion-item",19),t.qZA(),t.YNc(73,Ir,3,3,"ion-item-divider",18),t.TgZ(74,"ion-list",20),t.YNc(75,zr,11,30,"ion-item",21),t.TgZ(76,"ion-item")(77,"ion-text",22),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"ion-text",23),t._uU(81),t.qZA()(),t.TgZ(82,"ion-item")(83,"ion-text",22)(84,"strong"),t._uU(85),t.ALo(86,"translate"),t.qZA()(),t.TgZ(87,"ion-text",23),t._uU(88),t.ALo(89,"currency"),t.qZA()()(),t.YNc(90,_i,35,46,"ion-list",6),t.TgZ(91,"ion-list",20)(92,"ion-item-divider",24)(93,"ion-button",25),t.NdJ("click",function(){return n.printBarcode()}),t._UZ(94,"ion-icon",26),t.qZA()(),t.TgZ(95,"ion-item",27)(96,"ion-label"),t._UZ(97,"canvas",28,29),t.qZA()()(),t.YNc(99,mi,21,31,"ion-list",6),t.qZA()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,48,"order-detail.title")),t.xp6(3),t.Q6J("ngIf",!n.selectedStaff||n.selectedStaff.hasFullAccess||n.isOwner&&n.isOwnerValidTime),t.xp6(3),t.Q6J("ngIf",!n.selectedStaff||n.selectedStaff.hasFullAccess||n.isOwner),t.xp6(1),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("ngIf",n.order&&n.order.tableId&&n.order.tableId>0&&0===n.order.status),t.xp6(6),t.hij("",t.lcZ(20,50,"order-add.order-code"),":"),t.xp6(4),t.hij("#",n.order.orderCode,""),t.xp6(3),t.hij("",t.lcZ(27,52,"order-add.order-date"),":"),t.xp6(4),t.Oqu(n.dateFormat(n.order.createdAt)),t.xp6(1),t.Q6J("ngIf",n.order&&n.order.staff),t.xp6(3),t.Oqu(t.lcZ(35,54,"order-detail.status")),t.xp6(3),t.Q6J("disabled",n.isDisabled)("ngModel",n.order.status),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(40,56,"order-detail.status-draft")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(43,58,"order-detail.status-inprogress")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij("",t.lcZ(46,60,"order-detail.status-shipping")," "),t.xp6(2),t.Q6J("ngIf",!n.selectedStaff||n.selectedStaff.hasFullAccess||n.isOwner&&n.isOwnerValidTime),t.xp6(1),t.Q6J("value",4),t.xp6(1),t.Oqu(t.lcZ(50,62,"order-detail.status-cancel")),t.xp6(2),t.Q6J("value",5),t.xp6(1),t.hij("",t.lcZ(53,64,"order-detail.status-has-debt")," "),t.xp6(2),t.Q6J("value",6),t.xp6(1),t.hij("",t.lcZ(56,66,"order-detail.status-shipping-has-debt")," "),t.xp6(2),t.Q6J("value",7),t.xp6(1),t.hij("",t.lcZ(59,68,"order-detail.status-deposit")," "),t.xp6(2),t.Q6J("ngModel",n.tab),t.xp6(2),t.hij(" ",t.lcZ(63,70,"order-detail.information")," "),t.xp6(3),t.hij(" ",t.lcZ(66,72,"order-detail.debt-loan")," "),t.xp6(3),t.hij(" ",t.lcZ(69,74,"contact-add.show-barcode")," "),t.xp6(2),t.Q6J("ngIf","info"===n.tab&&(0!==n.order.contactId||n.order.contactName||n.order.contactPhone||n.order.contactAddress)),t.xp6(1),t.Q6J("ngIf",0!==n.order.contactId&&"info"===n.tab&&n.order.contact),t.xp6(1),t.Q6J("ngIf",(n.order.contactName||n.order.contactPhone||n.order.contactAddress)&&"info"===n.tab&&0===n.order.contactId),t.xp6(1),t.Q6J("ngIf","info"===n.tab),t.xp6(1),t.Q6J("hidden",!n.order.items||0===n.order.items.length||"info"!==n.tab),t.xp6(1),t.Q6J("ngForOf",n.order.items),t.xp6(3),t.hij(" ",t.lcZ(79,76,"order-detail.total-quantity")," "),t.xp6(3),t.hij(" ",n.totalProductsQuantity," "),t.xp6(4),t.Oqu(t.lcZ(86,78,"order-detail.total-amount")),t.xp6(3),t.hij(" ",t.G7q(89,80,t.kEZ(86,q,n.totalProductsAmount,n.currency,n.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf","info"===n.tab),t.xp6(1),t.Q6J("hidden","barcode"!==n.tab),t.xp6(1),t.Q6J("hidden",!n.barcode64base),t.xp6(3),t.Q6J("hidden",!n.barcode64base),t.xp6(4),t.Q6J("ngIf","debt"===n.tab))},dependencies:[y.sg,y.O5,w.JJ,w.On,s.BJ,s.oU,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.rH,s.u8,s.IK,s.td,s.Q$,s.q_,s.Nd,s.cJ,s.GO,s.t9,s.n0,s.yW,s.wd,s.sr,s.QI,s.cs,Zr.A,y.H9,b.X$],encapsulation:2}),o})();var xt=h(3142);function xi(o,c){if(1&o&&t._UZ(0,"img",19),2&o){const e=t.oxw(3);t.Q6J("src",e.shop.iconUrl,t.LSH)}}function hi(o,c){if(1&o&&(t.TgZ(0,"span")(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.shop.name)}}function Zi(o,c){if(1&o&&(t.TgZ(0,"span")(1,"i"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.shop.shortDescription)}}function Ai(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"shop-add.phone"),": ",e.shop.phone,"")}}function Ti(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"shop-add.email"),": ",e.shop.email,"")}}function Ci(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"shop-add.facebook"),": ",e.shop.facebook,"")}}function yi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"shop-add.address"),": ",e.shop.address,"")}}function vi(o,c){if(1&o&&(t.TgZ(0,"table",16)(1,"tr")(2,"td",17),t.YNc(3,xi,1,1,"img",18),t.YNc(4,hi,4,1,"span",0),t.YNc(5,Zi,4,1,"span",0),t.YNc(6,Ai,4,4,"span",0),t.YNc(7,Ti,4,4,"span",0),t.YNc(8,Ci,4,4,"span",0),t.YNc(9,yi,4,4,"span",0),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.shop.iconUrl),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.name),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.shortDescription),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.phone),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.email),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.facebook),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.address)}}function Si(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" - ",e.order.staff.userName,"")}}function bi(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.YNc(6,Si,2,1,"span",0),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,3,"trade.staff")," "),t.xp6(3),t.hij(" ",e.order.staff.name,""),t.xp6(1),t.Q6J("ngIf",e.order.staff.userName)}}function qi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.order.contact.fullName)}}function Oi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.order.contactName)}}function wi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij("| ",e.order.contact&&e.order.contact.mobile,"")}}function Ui(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" | ",e.order.contactPhone,"")}}function Li(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"contact-add.address"),": "),t.xp6(3),t.hij(" ",e.order.contact.address," ")}}function Ni(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"contact-add.address"),": "),t.xp6(3),t.hij(" ",e.order.contactAddress," ")}}function Ji(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.note"),": "),t.xp6(3),t.hij(" ",e.order.note," ")}}function ki(o,c){if(1&o&&(t.TgZ(0,"div")(1,"table",20)(2,"tr")(3,"td",21)(4,"strong"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"td",22),t._uU(8),t.qZA()(),t.YNc(9,bi,7,5,"tr",0),t.TgZ(10,"tr")(11,"td",21),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td",22),t._uU(15),t.qZA()(),t.TgZ(16,"tr")(17,"td",21),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"td",22),t.YNc(21,qi,2,1,"span",0),t.YNc(22,Oi,2,1,"span",0),t.YNc(23,wi,2,1,"span",0),t.YNc(24,Ui,2,1,"span",0),t.qZA()(),t.YNc(25,Li,6,4,"tr",0),t.YNc(26,Ni,6,4,"tr",0),t.YNc(27,Ji,6,4,"tr",0),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(5),t.hij("",t.lcZ(6,13,"order-add.order-code"),":"),t.xp6(3),t.hij(" #",e.order.orderCode," "),t.xp6(1),t.Q6J("ngIf",e.order.staff),t.xp6(3),t.hij(" ",t.lcZ(13,15,"order-print.date"),": "),t.xp6(3),t.hij(" ",e.dateFormat(e.order.createdAt)," "),t.xp6(3),t.hij(" ",t.lcZ(19,17,"order-print.customer"),": "),t.xp6(3),t.Q6J("ngIf",e.order.contact&&e.order.contact.fullName),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactName),t.xp6(1),t.Q6J("ngIf",e.order.contact&&e.order.contact.mobile),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactPhone),t.xp6(1),t.Q6J("ngIf",e.order.contact&&e.order.contact.address),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactAddress),t.xp6(1),t.Q6J("ngIf",e.order.note)}}function Ii(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"shop-add.bank-account-name"),": "),t.xp6(3),t.hij(" ",e.shop.bankAccountName," ")}}function Qi(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"shop-add.bank-account-number"),": "),t.xp6(3),t.hij(" ",e.shop.bankAccountNumber," ")}}function Pi(o,c){if(1&o&&(t.TgZ(0,"div")(1,"table",20)(2,"tr")(3,"td",21)(4,"strong"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"td",22),t._uU(8),t.qZA()(),t.YNc(9,Ii,6,4,"tr",0),t.YNc(10,Qi,6,4,"tr",0),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(5),t.hij("",t.lcZ(6,4,"shop-add.bank-name"),":"),t.xp6(3),t.hij(" ",e.shop.bankName," "),t.xp6(1),t.Q6J("ngIf",e.shop.bankAccountName),t.xp6(1),t.Q6J("ngIf",e.shop.bankAccountNumber)}}function Ei(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" - ",e.order.staff.userName,"")}}function Mi(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.YNc(6,Ei,2,1,"span",0),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,3,"trade.staff")," "),t.xp6(3),t.hij(" ",e.order.staff.name,""),t.xp6(1),t.Q6J("ngIf",e.order.staff.userName&&e.showStaffPhone)}}function Yi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.order.contact.fullName)}}function Fi(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.order.contactName)}}function ji(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij("| ",e.order.contact.mobile,"")}}function Di(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij("| ",e.order.contactPhone,"")}}function Gi(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"contact-add.address"),": "),t.xp6(3),t.hij(" ",e.order.contactAddress," ")}}function Hi(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"contact-add.address"),": "),t.xp6(3),t.hij(" ",e.order.contact.address," ")}}function Ki(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.note"),": "),t.xp6(3),t.hij(" ",e.order.note," ")}}function Bi(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,2,"shop-add.bank-account-name"),": "),t.xp6(3),t.hij(" ",e.shop.bankAccountName," ")}}function $i(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",22),t._uU(5),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,2,"shop-add.bank-account-number"),": "),t.xp6(3),t.hij(" ",e.shop.bankAccountNumber," ")}}function zi(o,c){if(1&o&&(t.TgZ(0,"td",26)(1,"table",20)(2,"tr")(3,"td",24)(4,"strong"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"td",22),t._uU(8),t.qZA()(),t.YNc(9,Bi,6,4,"tr",0),t.YNc(10,$i,6,4,"tr",0),t.qZA()()),2&o){const e=t.oxw(3);t.Udp("width","50%"),t.xp6(5),t.hij("",t.lcZ(6,6,"shop-add.bank-name"),":"),t.xp6(3),t.hij(" ",e.shop.bankName," "),t.xp6(1),t.Q6J("ngIf",e.shop.bankAccountName),t.xp6(1),t.Q6J("ngIf",e.shop.bankAccountNumber)}}function Vi(o,c){if(1&o&&(t.TgZ(0,"table",23)(1,"tr")(2,"td")(3,"table",20)(4,"tr")(5,"td",24)(6,"strong"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"td",22),t._uU(10),t.qZA()(),t.YNc(11,Mi,7,5,"tr",0),t.TgZ(12,"tr")(13,"td",24),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"td",22),t._uU(17),t.qZA()(),t.TgZ(18,"tr")(19,"td",24),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td",22),t.YNc(23,Yi,2,1,"span",0),t.YNc(24,Fi,2,1,"span",0),t.YNc(25,ji,2,1,"span",0),t.YNc(26,Di,2,1,"span",0),t.qZA()(),t.YNc(27,Gi,6,4,"tr",0),t.YNc(28,Hi,6,4,"tr",0),t.YNc(29,Ki,6,4,"tr",0),t.qZA()(),t.YNc(30,zi,11,8,"td",25),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Udp("width",e.shop&&e.shop.bankName?"50%":"100%"),t.xp6(5),t.hij("",t.lcZ(8,16,"order-add.order-code"),":"),t.xp6(3),t.hij(" #",e.order.orderCode," "),t.xp6(1),t.Q6J("ngIf",e.order.staff),t.xp6(3),t.hij(" ",t.lcZ(15,18,"order-print.date"),": "),t.xp6(3),t.hij(" ",e.dateFormat(e.order.createdAt)," "),t.xp6(3),t.hij(" ",t.lcZ(21,20,"order-print.customer"),": "),t.xp6(3),t.Q6J("ngIf",e.order.contact&&e.order.contact.fullName),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactName),t.xp6(1),t.Q6J("ngIf",e.order.contact&&e.order.contact.mobile),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactPhone),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactAddress),t.xp6(1),t.Q6J("ngIf",e.order.contact&&e.order.contact.address),t.xp6(1),t.Q6J("ngIf",e.order.note),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.bankName)}}function Wi(o,c){1&o&&(t.TgZ(0,"td",10)(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"order-print.head-unit")))}function Ri(o,c){1&o&&(t.TgZ(0,"td",10)(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"order-add.product-discount-short")))}function Xi(o,c){if(1&o&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(4);t.xp6(1),t.lnq(" ",n.productName(e.productCode,e.productName)," | ",e.count,"\xa0",e.unit," ")}}function tc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",29)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Xi,2,3,"p",30),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.items)}}function ec(o,c){if(1&o&&(t.TgZ(0,"p",33)(1,"ion-text"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getTypeAttributesString(e)," ")}}function nc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"ion-text"),t._uU(3),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getAttributesString(e)," ")}}const T=function(o,c){return[o,"","","1.0-2",c]};function oc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.WLB(8,T,e.price,n.translateService.currentLang)),"")}}function rc(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function ic(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"ion-text"),t._uU(3),t.YNc(4,oc,3,11,"span",0),t._uU(5," | "),t.YNc(6,rc,2,0,"span",0),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.WLB(12,T,e.total,n.translateService.currentLang))," ")}}function cc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"ion-text")(3,"strong"),t._uU(4),t.qZA()()(),t.YNc(5,ic,9,15,"ng-container",12),t.BQk()),2&o){const e=c.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(1),t.Q6J("ngForOf",e.values)}}function ac(o,c){if(1&o&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(1),t.xDo(" ",n.productName(e.code,e.title)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,5,t.WLB(17,T,e.price,n.translateService.currentLang))," | +",t.G7q(3,11,t.WLB(20,T,e.total,n.translateService.currentLang))," ")}}function sc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,ac,4,23,"p",34),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.added-products")),t.xp6(2),t.Q6J("ngForOf",e.options)}}function lc(o,c){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,ec,3,3,"p",32),t.YNc(2,nc,4,3,"ng-container",0),t.YNc(3,cc,6,2,"ng-container",12),t.YNc(4,sc,6,4,"ng-container",0),t.qZA()),2&o){const e=t.oxw().$implicit;t.Udp("font-weight","normal"),t.xp6(1),t.Q6J("ngIf",e.typeAttributes&&e.typeAttributes.length),t.xp6(1),t.Q6J("ngIf",e.attributes&&e.attributes.length),t.xp6(1),t.Q6J("ngForOf",e.typeOptions),t.xp6(1),t.Q6J("ngIf",e.options&&e.options.length)}}function dc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("\xa0",e.unit,"")}}function _c(o,c){if(1&o&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.unit," ")}}function pc(o,c){if(1&o&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.hij(" -",t.G7q(2,1,t.WLB(7,T,e.discount,n.translateService.currentLang))," ")}}function uc(o,c){if(1&o&&(t.TgZ(0,"span",35),t._UZ(1,"br"),t._uU(2),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("(-",e.discountPercent,"%)")}}function gc(o,c){if(1&o&&(t.TgZ(0,"span",35),t._UZ(1,"br"),t._uU(2),t.ALo(3,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.hij("(-",t.G7q(3,1,t.WLB(7,T,e.discount,n.translateService.currentLang)),")")}}function mc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",13),t._uU(3),t.YNc(4,tc,6,4,"ng-container",0),t.YNc(5,lc,5,6,"div",27),t.qZA()(),t._UZ(6,"tr"),t.TgZ(7,"tr",8)(8,"td",13),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td",14),t._uU(12),t.YNc(13,dc,2,1,"span",0),t.qZA(),t.YNc(14,_c,2,1,"td",15),t.YNc(15,pc,3,10,"td",15),t.TgZ(16,"td",14),t._uU(17),t.ALo(18,"currency"),t.YNc(19,uc,3,1,"span",28),t.YNc(20,gc,4,10,"span",28),t.qZA()(),t._UZ(21,"tr"),t.BQk()),2&o){const e=c.$implicit,n=c.index,r=t.oxw(2);t.xp6(3),t.AsE("",n+1,". ",r.productName(e.productCode,e.productName)," "),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length),t.xp6(1),t.Q6J("ngIf",r.hasOptionsOrAttributes(e)),t.xp6(4),t.hij("",t.G7q(10,12,t.WLB(24,T,e.price,r.translateService.currentLang))," "),t.xp6(3),t.hij("x ",e.count,""),t.xp6(1),t.Q6J("ngIf",r.isMobile||r.hideDiscountColumn),t.xp6(1),t.Q6J("ngIf",!(r.hideDiscountColumn||r.isMobile)),t.xp6(1),t.Q6J("ngIf",!(r.hideDiscountColumn||r.isMobile)),t.xp6(2),t.hij(" ",t.G7q(18,18,t.WLB(27,T,e.total,r.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",(r.hideDiscountColumn||r.isMobile)&&e.discountPercent),t.xp6(1),t.Q6J("ngIf",(r.hideDiscountColumn||r.isMobile)&&e.discount&&!e.discountPercent)}}function fc(o,c){1&o&&(t.TgZ(0,"td",14),t._uU(1," \xa0 "),t.qZA())}function xc(o,c){1&o&&(t.TgZ(0,"td",14),t._uU(1," \xa0 "),t.qZA())}function hc(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",36),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.total-promotion-discount"),": "),t.xp6(3),t.hij(" -",t.G7q(6,4,t.WLB(10,T,e.order.totalPromotionDiscount,e.translateService.currentLang))," ")}}function Zc(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",36),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.discount"),": "),t.xp6(3),t.hij(" -",t.G7q(6,4,t.WLB(10,T,e.order.discountOnTotal,e.translateService.currentLang))," ")}}function Ac(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",36),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.pay-by-point")," "),t.xp6(3),t.hij(" -",t.G7q(6,4,t.WLB(10,T,e.order.amountFromPoint,e.translateService.currentLang))," ")}}function Tc(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",36),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.tax"),": "),t.xp6(3),t.hij(" +",t.G7q(6,4,t.WLB(10,T,e.order.tax,e.translateService.currentLang))," ")}}function Cc(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",36),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"order-add.shipping-fee"),": "),t.xp6(3),t.hij(" +",t.G7q(6,4,t.WLB(10,T,e.order.shippingFee,e.translateService.currentLang))," ")}}function yc(o,c){if(1&o&&(t.TgZ(0,"table",16),t.YNc(1,hc,7,13,"tr",0),t.YNc(2,Zc,7,13,"tr",0),t.TgZ(3,"tr")(4,"td",24),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",36),t._uU(8),t.ALo(9,"currency"),t.qZA()(),t.YNc(10,Ac,7,13,"tr",0),t.YNc(11,Tc,7,13,"tr",0),t.YNc(12,Cc,7,13,"tr",0),t.TgZ(13,"tr",37)(14,"td",24),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"td",36),t._uU(18),t.ALo(19,"currency"),t.qZA()(),t.TgZ(20,"tr")(21,"td",24),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"td",36),t._uU(25),t.ALo(26,"currency"),t.qZA()(),t.TgZ(27,"tr")(28,"td",24),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",36),t._uU(32),t.ALo(33,"currency"),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.order.totalPromotionDiscount),t.xp6(1),t.Q6J("ngIf",e.order.discount),t.xp6(3),t.hij(" ",t.lcZ(6,13,"order-add.net-value"),": "),t.xp6(3),t.hij(" ",t.G7q(9,15,t.WLB(45,T,e.order.netValue,e.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.order.amountFromPoint&&e.order.pointAmount),t.xp6(1),t.Q6J("ngIf",!e.hideTax),t.xp6(1),t.Q6J("ngIf",e.order.shippingFee),t.xp6(3),t.hij(" ",t.lcZ(16,21,"order-add.total"),": "),t.xp6(3),t.hij(" ",t.G7q(19,23,t.WLB(48,T,e.order.total,e.translateService.currentLang))," "),t.xp6(4),t.hij(" ",t.lcZ(23,29,"order-print.cash"),": "),t.xp6(3),t.hij(" ",t.G7q(26,31,t.WLB(51,T,e.order.paid,e.translateService.currentLang))," "),t.xp6(4),t.hij(" ",t.lcZ(30,37,"order-print.change"),": "),t.xp6(3),t.hij(" ",t.G7q(33,39,t.WLB(54,T,e.order.change,e.translateService.currentLang))," ")}}function vc(o,c){if(1&o&&(t.ynx(0),t.YNc(1,vi,10,7,"table",1),t._UZ(2,"hr",2),t.TgZ(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.YNc(7,ki,28,19,"div",0),t.YNc(8,Pi,11,6,"div",0),t.YNc(9,Vi,31,22,"table",5),t._UZ(10,"hr",2),t.TgZ(11,"div",6)(12,"table",7)(13,"tr",8)(14,"td",9)(15,"b"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"td",10)(19,"b"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,Wi,4,3,"td",11),t.YNc(23,Ri,4,3,"td",11),t.TgZ(24,"td",10)(25,"b"),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.YNc(28,mc,22,30,"ng-container",12),t.TgZ(29,"tr")(30,"td",13)(31,"strong"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"td",14),t._uU(35),t.qZA(),t.YNc(36,fc,2,0,"td",15),t.YNc(37,xc,2,0,"td",15),t.TgZ(38,"td",14),t._uU(39),t.ALo(40,"currency"),t.qZA()(),t._UZ(41,"tr"),t.qZA()(),t._UZ(42,"hr",2),t.YNc(43,yc,34,57,"table",1),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.shop),t.xp6(4),t.Oqu(t.lcZ(6,17,"order-add.order-print-title")),t.xp6(2),t.Q6J("ngIf",e.isMobile),t.xp6(1),t.Q6J("ngIf",e.isMobile&&e.shop&&e.shop.bankName),t.xp6(1),t.Q6J("ngIf",!e.isMobile),t.xp6(7),t.Oqu(t.lcZ(17,19,"order-print.head-price")),t.xp6(4),t.Oqu(t.lcZ(21,21,"order-print.head-qty")),t.xp6(2),t.Q6J("ngIf",!(e.hideDiscountColumn||e.isMobile)),t.xp6(1),t.Q6J("ngIf",!(e.hideDiscountColumn||e.isMobile)),t.xp6(3),t.Oqu(t.lcZ(27,23,"order-print.head-amount")),t.xp6(2),t.Q6J("ngForOf",e.order.items),t.xp6(4),t.Oqu(t.lcZ(33,25,"order-detail.total-amount")),t.xp6(3),t.hij(" ",e.totalProductsQuantity," "),t.xp6(1),t.Q6J("ngIf",!(e.hideDiscountColumn||e.isMobile)),t.xp6(1),t.Q6J("ngIf",!(e.hideDiscountColumn||e.isMobile)),t.xp6(2),t.hij(" ",t.G7q(40,27,t.WLB(33,T,e.totalProductsAmount,e.translateService.currentLang))," "),t.xp6(4),t.Q6J("ngIf",e.shop)}}function Sc(o,c){if(1&o&&(t.TgZ(0,"i"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Oqu(e.shop.shortDescription)}}function bc(o,c){if(1&o&&(t.TgZ(0,"div",76)(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.YNc(4,Sc,2,1,"i",0),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.shop.name.toUpperCase()),t.xp6(2),t.Q6J("ngIf",e.shop.shortDescription)}}function qc(o,c){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"img",77),t.qZA()),2&o){const e=t.oxw(3);t.Udp("width",e.shop.bankName?"20%":"40%"),t.xp6(1),t.Q6J("src",e.shop.iconUrl,t.LSH)}}function Oc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",42),t._uU(3),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("innerHTML",e.toHtml("shop-add.phone"),t.oJD),t.xp6(2),t.hij(" ",e.shop.phone," ")}}function wc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",42),t._uU(3),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("innerHTML",e.toHtml("shop-add.email"),t.oJD),t.xp6(2),t.hij(" ",e.shop.email," ")}}function Uc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",42),t._uU(3),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("innerHTML",e.toHtml("shop-add.facebook"),t.oJD),t.xp6(2),t.hij(" ",e.shop.facebook," ")}}function Lc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",42),t._uU(3),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("innerHTML",e.toHtml("shop-add.address"),t.oJD),t.xp6(2),t.hij(" ",e.shop.address," ")}}function Nc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",79),t._uU(3),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("innerHTML",e.toHtml("shop-add.bank-account-name"),t.oJD),t.xp6(2),t.hij(" ",e.shop.bankAccountName," ")}}function Jc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",42),t._uU(3),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("innerHTML",e.toHtml("shop-add.bank-account-number"),t.oJD),t.xp6(2),t.hij(" ",e.shop.bankAccountNumber," ")}}function kc(o,c){if(1&o&&(t.TgZ(0,"td",78)(1,"table",20)(2,"tr")(3,"td",40),t._UZ(4,"strong",41),t.qZA(),t.TgZ(5,"td",42),t._uU(6),t.qZA()(),t.YNc(7,Nc,4,2,"tr",0),t.YNc(8,Jc,4,2,"tr",0),t.qZA()()),2&o){const e=t.oxw(3);t.Udp("width",e.shop.iconUrl?"40%":"100%"),t.xp6(4),t.Q6J("innerHTML",e.toHtml("shop-add.bank-name"),t.oJD),t.xp6(2),t.hij(" ",e.shop.bankName," "),t.xp6(1),t.Q6J("ngIf",e.shop.bankAccountName),t.xp6(1),t.Q6J("ngIf",e.shop.bankAccountNumber)}}function Ic(o,c){if(1&o&&(t.TgZ(0,"div",70),t.YNc(1,bc,5,2,"div",71),t.TgZ(2,"table",20)(3,"tr"),t.YNc(4,qc,2,3,"td",72),t.TgZ(5,"td",73)(6,"table",74),t.YNc(7,Oc,4,2,"tr",0),t.YNc(8,wc,4,2,"tr",0),t.YNc(9,Uc,4,2,"tr",0),t.YNc(10,Lc,4,2,"tr",0),t.qZA()(),t.YNc(11,kc,9,6,"td",75),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.shop.name),t.xp6(3),t.Q6J("ngIf",e.shop.iconUrl),t.xp6(1),t.Udp("width",e.shop.bankName&&e.shop.iconUrl?"40%":e.shop.bankName||e.shop.iconUrl?"60%":"100%"),t.xp6(2),t.Q6J("ngIf",e.shop&&e.shop.phone),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.email),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.facebook),t.xp6(1),t.Q6J("ngIf",e.shop&&e.shop.address),t.xp6(1),t.Q6J("ngIf",e.shop.bankName)}}function Qc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" - ",e.order.staff.userName,"")}}function Pc(o,c){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"td",43),t.TgZ(2,"td",42),t._uU(3),t.YNc(4,Qc,2,1,"span",0),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHTML",e.toHtml("trade.staff",""),t.oJD),t.xp6(2),t.hij(" ",e.order.staff.name,""),t.xp6(1),t.Q6J("ngIf",e.order.staff.userName&&e.showStaffPhone)}}function Ec(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contact.fullName)}}function Mc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contactName)}}function Yc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contact.mobile)}}function Fc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contactPhone)}}function jc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contact.address)}}function Dc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.order.contactAddress)}}function Gc(o,c){1&o&&(t.TgZ(0,"td",54)(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"order-print.head-discount-full")))}function Hc(o,c){if(1&o&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(4);t.xp6(1),t.lnq(" ",n.productName(e.productCode,e.productName)," | ",e.count,"\xa0",e.unit," ")}}function Kc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",29)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Hc,2,3,"p",30),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.items)}}function Bc(o,c){if(1&o&&(t.TgZ(0,"p",33)(1,"ion-text"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getTypeAttributesString(e)," ")}}function $c(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"ion-text"),t._uU(3),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",n.getAttributesString(e)," ")}}function zc(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.WLB(8,T,e.price,n.translateService.currentLang)),"")}}function Vc(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function Wc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"ion-text"),t._uU(3),t.YNc(4,zc,3,11,"span",0),t._uU(5," | "),t.YNc(6,Vc,2,0,"span",0),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.WLB(12,T,e.total,n.translateService.currentLang))," ")}}function Rc(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"ion-text")(3,"strong"),t._uU(4),t.qZA()()(),t.YNc(5,Wc,9,15,"ng-container",12),t.BQk()),2&o){const e=c.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(1),t.Q6J("ngForOf",e.values)}}function Xc(o,c){if(1&o&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(1),t.xDo(" ",n.productName(e.code,e.title)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,5,t.WLB(17,T,e.price,n.translateService.currentLang))," | +",t.G7q(3,11,t.WLB(20,T,e.total,n.translateService.currentLang))," ")}}function ta(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",33)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Xc,4,23,"p",34),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.added-products")),t.xp6(2),t.Q6J("ngForOf",e.options)}}function ea(o,c){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,Bc,3,3,"p",32),t.YNc(2,$c,4,3,"ng-container",0),t.YNc(3,Rc,6,2,"ng-container",12),t.YNc(4,ta,6,4,"ng-container",0),t.qZA()),2&o){const e=t.oxw().$implicit;t.Udp("font-weight","normal"),t.xp6(1),t.Q6J("ngIf",e.typeAttributes&&e.typeAttributes.length),t.xp6(1),t.Q6J("ngIf",e.attributes&&e.attributes.length),t.xp6(1),t.Q6J("ngForOf",e.typeOptions),t.xp6(1),t.Q6J("ngIf",e.options&&e.options.length)}}function na(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("-",e.discountPercent,"%")}}function oa(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.hij("-",t.G7q(2,1,t.WLB(7,T,e.discount,n.translateService.currentLang)),"")}}function ra(o,c){if(1&o&&(t.TgZ(0,"td",58),t.YNc(1,na,2,1,"span",0),t.YNc(2,oa,3,10,"span",0),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.discountPercent),t.xp6(1),t.Q6J("ngIf",e.discount&&!e.discountPercent)}}function ia(o,c){if(1&o&&(t.TgZ(0,"span",84),t._UZ(1,"br"),t._uU(2),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("(-",e.discountPercent,"%)")}}function ca(o,c){if(1&o&&(t.TgZ(0,"span",84),t._UZ(1,"br"),t._uU(2),t.ALo(3,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.hij("(-",t.G7q(3,1,t.WLB(7,T,e.discount,n.translateService.currentLang)),")")}}function aa(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",80),t._uU(2),t.qZA(),t.TgZ(3,"td",60),t._uU(4),t.YNc(5,Kc,6,4,"ng-container",0),t.YNc(6,ea,5,6,"div",27),t.qZA(),t.TgZ(7,"td",81),t._uU(8),t.qZA(),t.TgZ(9,"td",58),t._uU(10),t.qZA(),t.TgZ(11,"td",58),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.YNc(14,ra,3,2,"td",82),t.TgZ(15,"td",61),t._uU(16),t.ALo(17,"currency"),t.YNc(18,ia,3,1,"span",83),t.YNc(19,ca,4,10,"span",83),t.qZA()()),2&o){const e=c.$implicit,n=c.index,r=t.oxw(2);t.xp6(2),t.hij(" ",n+1,""),t.xp6(2),t.hij(" ",r.productName(e.productCode,e.productName)," "),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length),t.xp6(1),t.Q6J("ngIf",r.hasOptionsOrAttributes(e)),t.xp6(2),t.hij(" ",e.unit,""),t.xp6(2),t.hij(" ",e.count," "),t.xp6(2),t.hij(" ",t.G7q(13,11,t.WLB(23,T,e.price,r.translateService.currentLang)),""),t.xp6(2),t.Q6J("ngIf",!r.hideDiscountColumn),t.xp6(2),t.hij(" ",t.G7q(17,17,t.WLB(26,T,e.total,r.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",r.hideDiscountColumn&&e.discountPercent),t.xp6(1),t.Q6J("ngIf",r.hideDiscountColumn&&e.discount&&!e.discountPercent)}}function sa(o,c){1&o&&(t.TgZ(0,"td",60),t._uU(1,"\xa0"),t.qZA())}function la(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",81),t._uU(2),t.qZA(),t.TgZ(3,"td",60),t._uU(4,"\xa0"),t.qZA(),t.TgZ(5,"td",60),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"td",60),t._uU(8,"\xa0"),t.qZA(),t.YNc(9,sa,2,0,"td",59),t.TgZ(10,"td",60),t._uU(11,"\xa0"),t.qZA(),t.TgZ(12,"td",85),t._uU(13," \xa0"),t.qZA()()),2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e+1,""),t.xp6(7),t.Q6J("ngIf",!n.hideDiscountColumn)}}function da(o,c){1&o&&(t.TgZ(0,"td",60),t._uU(1,"\xa0"),t.qZA())}function _a(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",61),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(1),t.hij(" ",t.lcZ(3,3,"order-add.total-promotion-discount")," "),t.xp6(3),t.hij(" -",t.G7q(6,5,t.WLB(11,T,e.order.totalPromotionDiscount,e.translateService.currentLang))," ")}}function pa(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",61),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(1),t.hij(" ",t.lcZ(3,3,"order-add.discount")," "),t.xp6(3),t.hij(" -",t.G7q(6,5,t.WLB(11,T,e.order.discountOnTotal,e.translateService.currentLang))," ")}}function ua(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",61),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(1),t.hij(" ",t.lcZ(3,3,"order-add.net-value")," "),t.xp6(3),t.hij(" ",t.G7q(6,5,t.WLB(11,T,e.order.netValue,e.translateService.currentLang))," ")}}function ga(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",61),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(1),t.hij(" ",t.lcZ(3,3,"order-add.pay-by-point")," "),t.xp6(3),t.hij(" -",t.G7q(6,5,t.WLB(11,T,e.order.amountFromPoint,e.translateService.currentLang))," ")}}function ma(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",61),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(1),t.hij(" ",t.lcZ(3,3,"order-add.tax")," "),t.xp6(3),t.hij(" +",t.G7q(6,5,t.WLB(11,T,e.order.tax,e.translateService.currentLang))," ")}}function fa(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",61),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(1),t.hij(" ",t.lcZ(3,3,"order-add.shipping-fee")," "),t.xp6(3),t.hij(" +",t.G7q(6,5,t.WLB(11,T,e.order.shippingFee,e.translateService.currentLang))," ")}}function xa(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",48)(2,"table",45)(3,"tr"),t._UZ(4,"td",43),t.TgZ(5,"td",49)(6,"span"),t._uU(7),t.qZA()()()()()()),2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("innerHTML",e.toHtml("order-add.note"),t.oJD),t.xp6(3),t.Oqu(e.order.note)}}function ha(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td",48)(2,"table",45)(3,"tr")(4,"td",86)(5,"i"),t._uU(6),t.qZA()()()()()()),2&o){const e=t.oxw(2);t.xp6(6),t.Oqu(e.orderPrintNote)}}function Za(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" - ",e.order.staff.userName,"")}}function Aa(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"span"),t._uU(3),t.YNc(4,Za,2,1,"span",0),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.order.staff.name),t.xp6(1),t.Q6J("ngIf",e.order.staff.userName&&e.showStaffPhone)}}function Ta(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Ic,12,9,"div",38),t.TgZ(2,"div",3)(3,"h2",39),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div")(7,"table",20)(8,"tr")(9,"td",40),t._UZ(10,"strong",41),t.qZA(),t.TgZ(11,"td",42),t._uU(12),t.qZA()(),t.YNc(13,Pc,5,3,"tr",0),t.TgZ(14,"tr"),t._UZ(15,"td",43),t.TgZ(16,"td",42),t._uU(17),t.qZA()()()(),t.TgZ(18,"table",20)(19,"tr")(20,"td",44)(21,"table",45)(22,"tr"),t._UZ(23,"td",43),t.TgZ(24,"td",46),t.YNc(25,Ec,2,1,"span",0),t.YNc(26,Mc,2,1,"span",0),t.qZA()()()(),t.TgZ(27,"td",47)(28,"table",45)(29,"tr"),t._UZ(30,"td",43),t.TgZ(31,"td",46),t.YNc(32,Yc,2,1,"span",0),t.YNc(33,Fc,2,1,"span",0),t.qZA()()()()(),t.TgZ(34,"tr")(35,"td",48)(36,"table",45)(37,"tr"),t._UZ(38,"td",43),t.TgZ(39,"td",49),t.YNc(40,jc,2,1,"span",0),t.YNc(41,Dc,2,1,"span",0),t.qZA()()()()()(),t.TgZ(42,"div",6)(43,"table",50)(44,"tr")(45,"td",51)(46,"b"),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t.TgZ(49,"td",52)(50,"b"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"td",53)(54,"b"),t._uU(55),t.ALo(56,"translate"),t.qZA()(),t.TgZ(57,"td",54)(58,"b"),t._uU(59),t.ALo(60,"translate"),t.qZA()(),t.TgZ(61,"td",54)(62,"b"),t._uU(63),t.ALo(64,"translate"),t.qZA()(),t.YNc(65,Gc,4,3,"td",55),t.TgZ(66,"td",56)(67,"b"),t._uU(68),t.ALo(69,"translate"),t.qZA()()(),t.YNc(70,aa,20,29,"tr",12),t._UZ(71,"tr"),t.YNc(72,la,14,2,"tr",12),t._UZ(73,"tr"),t.TgZ(74,"tr")(75,"td",57)(76,"strong"),t._uU(77),t.ALo(78,"translate"),t.qZA()(),t.TgZ(79,"td",58),t._uU(80),t.qZA(),t.YNc(81,da,2,0,"td",59),t.TgZ(82,"td",60),t._uU(83,"\xa0"),t.qZA(),t.TgZ(84,"td",61),t._uU(85),t.ALo(86,"currency"),t.qZA()(),t.YNc(87,_a,7,14,"tr",0),t.YNc(88,pa,7,14,"tr",0),t.YNc(89,ua,7,14,"tr",0),t.YNc(90,ga,7,14,"tr",0),t.YNc(91,ma,7,14,"tr",0),t.YNc(92,fa,7,14,"tr",0),t.TgZ(93,"tr")(94,"td",60)(95,"strong"),t._uU(96),t.ALo(97,"translate"),t.qZA()(),t.TgZ(98,"td",61),t._uU(99),t.ALo(100,"currency"),t.qZA()()()(),t.TgZ(101,"div")(102,"table",62)(103,"tr"),t._UZ(104,"td",63),t.TgZ(105,"td",64),t._uU(106," \xa0 "),t.qZA()(),t.TgZ(107,"tr")(108,"td",65),t._uU(109," \xa0 "),t.qZA()(),t.YNc(110,xa,8,2,"tr",0),t.YNc(111,ha,7,1,"tr",0),t.qZA()(),t.TgZ(112,"div")(113,"table",66)(114,"tr")(115,"td",67)(116,"table",68)(117,"tr")(118,"td")(119,"strong",69),t._uU(120),t.ALo(121,"translate"),t.qZA(),t._UZ(122,"br"),t._uU(123),t.ALo(124,"translate"),t.qZA()()()(),t.TgZ(125,"td",67)(126,"table",68)(127,"tr")(128,"td")(129,"strong",69),t._uU(130),t.ALo(131,"translate"),t.qZA(),t._UZ(132,"br"),t._uU(133),t.ALo(134,"translate"),t.qZA()(),t.TgZ(135,"tr")(136,"td"),t._uU(137,"\xa0"),t.qZA()(),t.TgZ(138,"tr")(139,"td"),t._uU(140,"\xa0"),t.qZA()(),t.TgZ(141,"tr")(142,"td"),t._uU(143,"\xa0"),t.qZA()(),t.YNc(144,Aa,5,2,"tr",0),t.qZA()()()()(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.shop),t.xp6(3),t.Oqu(t.lcZ(5,46,"order-add.order-print-title")),t.xp6(6),t.Q6J("innerHTML",e.toHtml("order-add.order-code"),t.oJD),t.xp6(2),t.hij(" #",e.order.orderCode," "),t.xp6(1),t.Q6J("ngIf",e.order.staff),t.xp6(2),t.Q6J("innerHTML",e.toHtml("order-print.date"),t.oJD),t.xp6(2),t.hij(" ",e.dateFormat(e.order.createdAt)," "),t.xp6(6),t.Q6J("innerHTML",e.toHtml("order-print.customer"),t.oJD),t.xp6(2),t.Q6J("ngIf",e.order.contact&&e.order.contact.fullName),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactName),t.xp6(4),t.Q6J("innerHTML",e.toHtml("contact-add.phone"),t.oJD),t.xp6(2),t.Q6J("ngIf",e.order.contact&&e.order.contact.mobile),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactPhone),t.xp6(5),t.Q6J("innerHTML",e.toHtml("contact-add.address"),t.oJD),t.xp6(2),t.Q6J("ngIf",e.order.contact&&e.order.contact.address),t.xp6(1),t.Q6J("ngIf",!e.order.contact&&e.order.contactAddress),t.xp6(6),t.Oqu(t.lcZ(48,48,"order-print.head-index")),t.xp6(4),t.Oqu(t.lcZ(52,50,"order-print.head-name")),t.xp6(4),t.Oqu(t.lcZ(56,52,"order-print.head-unit-full")),t.xp6(4),t.Oqu(t.lcZ(60,54,"order-print.head-qty-full")),t.xp6(4),t.Oqu(t.lcZ(64,56,"order-print.head-price-full")),t.xp6(2),t.Q6J("ngIf",!e.hideDiscountColumn),t.xp6(3),t.Oqu(t.lcZ(69,58,"order-print.head-amount-full")),t.xp6(2),t.Q6J("ngForOf",e.order.items),t.xp6(2),t.Q6J("ngForOf",e.numberArrays(e.order.items.length,e.orderInvoiceMaxEmptyRows)),t.xp6(5),t.Oqu(t.lcZ(78,60,"order-detail.total-amount")),t.xp6(3),t.hij(" ",e.totalProductsQuantity," "),t.xp6(1),t.Q6J("ngIf",!e.hideDiscountColumn),t.xp6(4),t.hij(" ",t.G7q(86,62,t.WLB(84,T,e.totalProductsAmount,e.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.order.totalPromotionDiscount),t.xp6(1),t.Q6J("ngIf",e.order.discountOnTotal),t.xp6(1),t.Q6J("ngIf",e.order.netValue!==e.totalProductsAmount),t.xp6(1),t.Q6J("ngIf",e.order.amountFromPoint&&e.order.pointAmount),t.xp6(1),t.Q6J("ngIf",!e.hideTax&&0!==e.order.tax),t.xp6(1),t.Q6J("ngIf",e.order.shippingFee),t.xp6(2),t.uIk("colspan",e.hideDiscountColumn?5:6),t.xp6(2),t.Oqu(t.lcZ(97,68,"order-add.total")),t.xp6(3),t.hij(" ",t.G7q(100,70,t.WLB(87,T,e.order.total,e.translateService.currentLang))," "),t.xp6(5),t.Q6J("innerHTML",e.toHtml("order-print.total-written-in-letters"),t.oJD),t.xp6(6),t.Q6J("ngIf",e.order.note),t.xp6(1),t.Q6J("ngIf",e.orderPrintNote),t.xp6(9),t.Oqu(t.lcZ(121,76,"order-print.customer")),t.xp6(3),t.hij(" (",t.lcZ(124,78,"order-print.sign-and-write-fullname"),") "),t.xp6(7),t.Oqu(t.lcZ(131,80,"order-print.buyer")),t.xp6(3),t.hij(" (",t.lcZ(134,82,"order-print.sign-and-write-fullname"),") "),t.xp6(11),t.Q6J("ngIf",e.order&&e.order.staff&&e.showStaffNameUnderSign)}}let ht=(()=>{class o{constructor(e,n){this.navCtrl=e,this.translateService=n,this.order=new F.K,this.isMobile=!1,this.totalProductsAmount=0,this.totalProductsQuantity=0,this.printOrderLikeInvoice=!1,this.hideTax=!1,this.orderInvoiceMaxEmptyRows=10,this.hideDiscountColumn=!0,this.showStaffPhone=!1,this.showStaffNameUnderSign=!1,this.hideProductCodePrint=!0,this.orderPrintNote=""}toHtml(e,n=":"){return x.W.toHtml(this.translateService.instant(e),n)}numberArrays(e,n){return x.W.numberArrays(e,n)}dateFormat(e){return A.C.toUiDateString(e)}dateTimeFormat(e){return A.C.toUiString(e)}productName(e,n){return x.W.productName(this.hideProductCodePrint?"":e,n)}hasOptionsOrAttributes(e){return x.W.hasOptionsOrAttributes(e)}getAttributesString(e){return x.W.getAttributesString(e)}getTypeAttributesString(e){return x.W.getTypeAttributesString(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.G),t.Y36(b.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-print"]],inputs:{order:"order",currency:"currency",shop:"shop",isMobile:"isMobile",totalProductsAmount:"totalProductsAmount",totalProductsQuantity:"totalProductsQuantity",printOrderLikeInvoice:"printOrderLikeInvoice",hideTax:"hideTax",orderInvoiceMaxEmptyRows:"orderInvoiceMaxEmptyRows",hideDiscountColumn:"hideDiscountColumn",showStaffPhone:"showStaffPhone",showStaffNameUnderSign:"showStaffNameUnderSign",hideProductCodePrint:"hideProductCodePrint",orderPrintNote:"orderPrintNote"},decls:2,vars:2,consts:[[4,"ngIf"],["style","width: 100%; border: none;",4,"ngIf"],[1,"hr"],[2,"text-align","center"],[2,"font-size","18px","text-transform","uppercase"],["style","border: none; ",4,"ngIf"],[2,"padding-left","5px","padding-right","5px"],[2,"width","100%","border-collapse","collapse"],[2,"border-bottom","1px solid #ccc"],[2,"padding-bottom","5px"],[2,"text-align","right","padding-bottom","5px"],["style","text-align: right; padding-bottom: 5px;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"padding-top","5px"],[2,"text-align","right","padding-top","5px"],["style","text-align: right; padding-top: 5px;",4,"ngIf"],[2,"width","100%","border","none"],[2,"text-align","center","vertical-align","text-bottom"],["style","max-width: 120px; float: left; max-height: 120px;",3,"src",4,"ngIf"],[2,"max-width","120px","float","left","max-height","120px",3,"src"],[2,"border","none","width","100%"],["nowrap","",2,"width","100px","white-space","nowrap"],[2,"padding-left","5px"],[2,"border","none"],["nowrap",""],["style","padding-left: 20px;",3,"width",4,"ngIf"],[2,"padding-left","20px"],["style","font-size: 0.8em;","class","ion-text-wrap",3,"fontWeight",4,"ngIf"],["style","font-size: 0.75em",4,"ngIf"],[2,"padding","0","margin","0","font-size","0.68em"],["style","padding: 0; margin: 0; font-size: 0.68em;",4,"ngFor","ngForOf"],[1,"ion-text-wrap",2,"font-size","0.8em"],["style","padding: 0; margin: 0",4,"ngIf"],[2,"padding","0","margin","0"],["style","padding: 0; margin: 0",4,"ngFor","ngForOf"],[2,"font-size","0.75em"],[2,"padding-left","5px","padding-right","5px","text-align","right"],[2,"font-weight","bold"],["style","border-bottom: 1px solid #000;",4,"ngIf"],[2,"font-size","18px","text-transform","uppercase","font-weight","bold"],[2,"width","1px","white-space","nowrap","padding","0"],[3,"innerHTML"],["nowrap","",2,"padding","0 0 0 5px"],[2,"width","1px","white-space","nowrap","padding","0",3,"innerHTML"],[2,"width","40%","padding","0"],[2,"width","100%"],[2,"padding","0 0 0 5px","border-bottom","1px dotted #000"],[2,"padding","0"],["colspan","2",2,"padding","0"],[2,"border-bottom","1px dotted #000","padding","0 0 0 5px"],[2,"margin-top","10px","margin-bottom","10px","width","100%","border-collapse","collapse"],[2,"border-top","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","max-width","60px","text-align","center"],["nowrap","",2,"border-top","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px"],[2,"border-top","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","text-align","center"],[2,"border-top","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","text-align","right"],["style","border-top: 1px solid #000; border-left: 1px solid #000; border-bottom: 1px solid #000; padding: 5px; text-align: right;",4,"ngIf"],[2,"border-right","1px solid #000","border-top","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","text-align","right"],["colspan","3",2,"border-left","1px solid #000","border-bottom","1px solid #000","padding","5px"],[2,"border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","text-align","right"],["style","border-left: 1px solid #000; border-bottom: 1px solid #000; padding: 5px;",4,"ngIf"],[2,"border-left","1px solid #000","border-bottom","1px solid #000","padding","5px"],[2,"border-right","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","text-align","right"],["cellpadding","0","cellspacing","0",2,"width","100%","border","none"],[2,"width","1px","white-space","nowrap",3,"innerHTML"],[2,"border-bottom","1px dotted #000"],["colspan","2",2,"border-bottom","1px dotted #000"],[2,"border","none","width","100%","margin-bottom","50px","margin-top","20px"],[2,"width","50%","text-align","center","vertical-align","text-top"],[2,"border","none","margin","0 auto"],[2,"text-transform","uppercase"],[2,"border-bottom","1px solid #000"],["style","width: 100%; text-align: center; margin-top: 5px;",4,"ngIf"],[3,"width",4,"ngIf"],[2,"vertical-align","top"],[2,"border","none","border-spacing","0","width","100%","left","50%"],["style","padding-left: 20px; vertical-align: text-top;",3,"width",4,"ngIf"],[2,"width","100%","text-align","center","margin-top","5px"],[2,"max-width","44px","float","left","max-height","44px",3,"src"],[2,"padding-left","20px","vertical-align","text-top"],[2,"padding","0 0 0 5px"],[2,"border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","max-width","60px","text-align","center"],[2,"border-left","1px solid #000","border-bottom","1px solid #000","padding","5px","text-align","center"],["style","border-left: 1px solid #000; border-bottom: 1px solid #000; padding: 5px; text-align: right;",4,"ngIf"],["style","font-size: 0.8em",4,"ngIf"],[2,"font-size","0.8em"],[2,"border-right","1px solid #000","border-left","1px solid #000","border-bottom","1px solid #000","padding","5px"],[2,"padding","0 0 0 0px"]],template:function(e,n){1&e&&(t.YNc(0,vc,44,36,"ng-container",0),t.YNc(1,Ta,145,90,"ng-container",0)),2&e&&(t.Q6J("ngIf",!n.printOrderLikeInvoice),t.xp6(1),t.Q6J("ngIf",n.printOrderLikeInvoice))},dependencies:[y.sg,y.O5,s.yW,y.H9,b.X$],encapsulation:2}),o})(),Ca=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f){this.navCtrl=e,this.platform=n,this.printer=r,this.translateService=i,this.userService=a,this.storeService=l,this.analyticsService=u,this.dataService=g,this.excelService=_,this.alertCtrl=f,this.params=null,this.mode="share",this.order=new F.K,this.isMobile=!1,this.totalProductsAmount=0,this.totalProductsQuantity=0,this.printOrderLikeInvoice=!1,this.hideTax=!1,this.orderInvoiceMaxEmptyRows=10,this.hideDiscountColumn=!0,this.showStaffNameUnderSign=!1,this.hideProductCodePrint=!0,this.orderPrintNote="",this.showStaffPhone=!1}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-detail-print")})()}ngOnInit(){var e=this;return(0,d.Z)(function*(){e.isMobile=e.platform.width()<720,e.platform.resize.subscribe(()=>{e.isMobile=e.platform.width()<720}),yield e.reload()})()}reload(){var e=this;return(0,d.Z)(function*(){e.currency=yield e.userService.getAttr("current-currency");const n=yield e.storeService.getCurrentStore();e.shop=n||(yield e.dataService.getFirstObject("shop")),e.printOrderLikeInvoice=yield e.userService.getAttr("print-order-like-invoice"),e.hideTax=yield e.userService.getAttr("hide-tax"),e.orderInvoiceMaxEmptyRows=yield e.userService.getAttr("order-invoice-max-empty-rows"),e.hideDiscountColumn=yield e.userService.getAttr("hide-discount-column"),e.orderPrintNote=yield e.userService.getAttr("order-print-note"),e.showStaffNameUnderSign=yield e.userService.getAttr("show-staff-name-under-sign"),e.hideProductCodePrint=yield e.userService.getAttr("hide-product-code-print"),e.showStaffPhone=yield e.userService.getAttr("show-staff-phone"),e.order=new F.K,e.params=e.navCtrl.getParams(e.params),e.params&&e.params.mode&&(e.mode=e.params.mode),e.params&&e.params.order&&(e.order=e.params.order,e.totalProductsAmount=e.order.items&&e.order.items.length?C.sumBy(e.order.items,r=>r.total):0,e.totalProductsQuantity=e.order.items&&e.order.items.length?C.sumBy(e.order.items,r=>r.count):0,e.doPrintOrShare())})()}doPrintOrShare(){var e=this;setTimeout((0,d.Z)(function*(){const r=document.getElementById("print-page").innerHTML;if("print"!==e.mode){const i="order-"+e.order.id+".pdf";return yield e.excelService.downloadPdf(i,r).then(function(){var a=(0,d.Z)(function*(l){e.navCtrl.isNotCordova()||(yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report.file-save-alert")+l,buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{}}]})).present(),e.userService.shareFileUrl(i,i,l))});return function(l){return a.apply(this,arguments)}}()),void e.navCtrl.back()}if(e.navCtrl.isNotCordova())return x.W.webPrint(r,500),void e.navCtrl.back();yield e.printer.print(r,{orientation:"portrait"}).then(()=>{}),e.navCtrl.back()}),1e3)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.G),t.Y36(s.t4),t.Y36(at.F),t.Y36(b.sK),t.Y36(D.K),t.Y36(K.d),t.Y36(I.y),t.Y36(xt.D),t.Y36(V.x),t.Y36(s.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-detail-print"]],decls:2,vars:14,consts:[["id","print-page"],[3,"printOrderLikeInvoice","shop","order","currency","isMobile","totalProductsAmount","totalProductsQuantity","hideTax","orderInvoiceMaxEmptyRows","hideDiscountColumn","showStaffNameUnderSign","hideProductCodePrint","showStaffPhone","orderPrintNote"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"order-print",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("printOrderLikeInvoice",n.printOrderLikeInvoice)("shop",n.shop)("order",n.order)("currency",n.currency)("isMobile",n.isMobile)("totalProductsAmount",n.totalProductsAmount)("totalProductsQuantity",n.totalProductsQuantity)("hideTax",n.hideTax)("orderInvoiceMaxEmptyRows",n.orderInvoiceMaxEmptyRows)("hideDiscountColumn",n.hideDiscountColumn)("showStaffNameUnderSign",n.showStaffNameUnderSign)("hideProductCodePrint",n.hideProductCodePrint)("showStaffPhone",n.showStaffPhone)("orderPrintNote",n.orderPrintNote))},dependencies:[ht],encapsulation:2}),o})();var ya=h(423),va=h(2975);let Sa=(()=>{class o{constructor(e,n,r,i){this.navCtrl=e,this.storage=n,this.platform=r,this.analyticsService=i,this.params=null,this.noAlertRepeat=!1}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-detail-print-alert")})()}ngOnInit(){this.params=this.navCtrl.getParams(this.params),this.params&&this.params.order&&(this.order=this.params.order)}share(){var e=this;return(0,d.Z)(function*(){yield e.navCtrl.popOnly(),e.navCtrl.push("/order/detail-print",{order:e.order,mode:"share"})})()}print(){var e=this;return(0,d.Z)(function*(){yield e.navCtrl.popOnly(),e.navCtrl.push("/order/detail-print",{order:e.order,mode:"print"})})()}gotoPrintAndroid(){this.navCtrl.push("/help/print-android")}updateAlertRepeat(){var e=this;return(0,d.Z)(function*(){yield e.storage.set("print-alert-no-repeat",e.noAlertRepeat?"1":"0")})()}goPrintPage(){const e=this.platform.is("android")?"print-android":"print-ios";this.navCtrl.push("/help/"+e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.G),t.Y36(it.V),t.Y36(s.t4),t.Y36(I.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-detail-print-alert"]],decls:38,vars:22,consts:[["slot","start"],["defaultHref","/home"],[1,"ion-padding"],["expand","full","color","danger",3,"click"],["name","help-circle","slot","start"],["lines","none",1,"ion-text-wrap"],["slot","start",3,"ngModel","ngModelChange"],[1,"ion-text-wrap"],["expand","full","color","primary",3,"click"],["name","print","slot","start"],["expand","full","color","success",3,"click"],["name","share","slot","start"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"ion-content",2)(8,"div"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ion-grid")(12,"ion-row")(13,"ion-col")(14,"ion-button",3),t.NdJ("click",function(){return n.goPrintPage()}),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"ion-icon",4),t.qZA()()()(),t.TgZ(18,"div"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"ion-item",5)(22,"ion-checkbox",6),t.NdJ("ngModelChange",function(i){return n.noAlertRepeat=i})("ngModelChange",function(){return n.updateAlertRepeat()}),t.qZA(),t.TgZ(23,"ion-label",7),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ion-grid")(27,"ion-row")(28,"ion-col")(29,"ion-button",8),t.NdJ("click",function(){return n.print()}),t._uU(30),t.ALo(31,"translate"),t._UZ(32,"ion-icon",9),t.qZA()(),t.TgZ(33,"ion-col")(34,"ion-button",10),t.NdJ("click",function(){return n.share()}),t._uU(35),t.ALo(36,"translate"),t._UZ(37,"ion-icon",11),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,8,"order-detail.print-alert-title")),t.xp6(4),t.hij(" ",t.lcZ(10,10,"order-detail.help-print-android")," "),t.xp6(6),t.hij(" ",t.lcZ(16,12,"order-detail.help-print-android-button"),""),t.xp6(4),t.hij(" ",t.lcZ(20,14,"order-detail.print-invoice-description")," "),t.xp6(3),t.Q6J("ngModel",n.noAlertRepeat),t.xp6(2),t.hij(" ",t.lcZ(25,16,"order-detail.print-alert-no-show-again")," "),t.xp6(6),t.Oqu(t.lcZ(31,18,"order-detail.continue-print")),t.xp6(5),t.Oqu(t.lcZ(36,20,"order-detail.share-to-print-app")))},dependencies:[w.JJ,w.On,s.oU,s.YG,s.Sm,s.nz,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.Nd,s.wd,s.sr,s.w,s.cs,b.X$],encapsulation:2}),o})();const ba=["fileUploadInput"];function qa(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",13)(1,"ion-label",14),t._uU(2),t.qZA(),t.TgZ(3,"ion-buttons")(4,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exitStore())}),t._UZ(5,"ion-icon",16),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.checkStore),t.xp6(4),t.hij(" ",t.lcZ(7,2,"store.exit-store")," ")}}function Oa(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"order-import.upload")))}function wa(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.fileToUpload.name)}}let Ua=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_){this.userService=e,this.excelService=n,this.navCtrl=r,this.platform=i,this.alertCtrl=a,this.translateService=l,this.storeService=u,this.staffService=g,this.analyticsService=_,this.uploadDisabled=!1,this.receivedNotesImported=[],this.isMobile=!0}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-import")})()}ngOnInit(){var e=this;return(0,d.Z)(function*(){e.isMobile=e.platform.width()<720,e.platform.resize.subscribe(()=>{e.isMobile=e.platform.width()<720}),e.store=yield e.storeService.getCurrentStore(),e.checkStore=e.store?e.translateService.instant("store.check-store",{shop:e.store.name}):null,e.selectedStaff=e.staffService.selectedStaff})()}downloadTemplate(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-import-download");const n="order-template.xlsx";e.excelService.downloadOrderTemplate(n).then(function(){var r=(0,d.Z)(function*(i){e.navCtrl.isNotCordova()||(yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report.file-save-alert")+i,buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{}}]})).present(),e.userService.shareFileUrl(n,n,i))});return function(i){return r.apply(this,arguments)}}())})()}rememberFile(e){this.fileToUpload=e.target.files[0],this.upload()}upload(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("order-import-upload"),e.uploadDisabled=!0;const n=yield e.navCtrl.loading(6e4);e.excelService.uploadOrdersFile(e.fileToUpload,e.store?e.store.id:null).then(function(){var r=(0,d.Z)(function*(i){if(yield n.dismiss(),i&&!i.error)return e.analyticsService.logEvent("order-import-uploaded-success"),e.navCtrl.publish("reloadOrderList",null),e.navCtrl.pop(),void alert(e.translateService.instant("order-import.loaded",{count:i.count}));if(i&&i.error){e.analyticsService.logEvent("order-import-error");let a=i.error+"";a=a.replace("{","").replace("}","");const l=a.split(":");a="",a=l.length>=2?e.translateService.instant("order-import."+l[0])+l[1]:e.translateService.instant("order-import."+l[0]),alert(a)}else alert("C\xf3 v\u1ea5n \u0111\u1ec1 x\u1ea3y ra, h\xe3y th\u1eed l\u1ea1i sau. (English: Something wrong, please try again later).");e.uploadDisabled=!1,e.fileToUpload=null,e.fileUploadInput.nativeElement.value=null});return function(i){return r.apply(this,arguments)}}()).catch((0,d.Z)(function*(){yield n.dismiss(),alert("C\xf3 v\u1ea5n \u0111\u1ec1 x\u1ea3y ra, h\xe3y th\u1eed l\u1ea1i sau. (English: Something wrong, please try again later)."),e.uploadDisabled=!1,e.fileToUpload=null,e.fileUploadInput.nativeElement.value=null}))})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(D.K),t.Y36(V.x),t.Y36(k.G),t.Y36(s.t4),t.Y36(s.Br),t.Y36(b.sK),t.Y36(K.d),t.Y36(j.x),t.Y36(I.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-import"]],viewQuery:function(e,n){if(1&e&&t.Gf(ba,5),2&e){let r;t.iGM(r=t.CRH())&&(n.fileUploadInput=r.first)}},decls:27,vars:17,consts:[["slot","start"],["defaultHref","/home"],["lines","none","color","success",4,"ngIf"],[1,"ion-padding"],["expand","block","fill","outline","color","secondary",3,"click"],["slot","start","name","download"],[3,"innerHTML"],["color","primary","for","files",2,"border-radius","10px","display","block","border","1px solid #387ef5","text-transform","uppercase","text-align","center"],[2,"color","#387ef5","height","45px","display","flex","align-items","center","justify-content","center"],["name","cloud-upload","color","primary",2,"zoom","1.5"],[4,"ngIf"],["type","file","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","id","files",2,"width","0","height","0","font-size","0",3,"change"],["fileUploadInput",""],["lines","none","color","success"],[1,"ion-text-wrap"],["size","small",3,"click"],["name","exit","slot","start","size","small"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.YNc(7,qa,8,4,"ion-item",2),t.qZA(),t.TgZ(8,"ion-content")(9,"div",3)(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"ion-button",4),t.NdJ("click",function(){return n.downloadTemplate()}),t._UZ(14,"ion-icon",5),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"p",6),t.ALo(18,"translate"),t.TgZ(19,"label",7)(20,"div",8),t._UZ(21,"ion-icon",9),t._uU(22," \xa0 "),t.YNc(23,Oa,3,3,"span",10),t.YNc(24,wa,2,1,"span",10),t.qZA()(),t.TgZ(25,"input",11,12),t.NdJ("change",function(i){return n.rememberFile(i)}),t.qZA()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,9,"order-import.title")),t.xp6(2),t.Q6J("ngIf",n.checkStore&&(null==n.selectedStaff||n.selectedStaff.hasFullAccess&&!n.selectedStaff.storeId)),t.xp6(1),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(3),t.Oqu(t.lcZ(12,11,"order-import.template-note")),t.xp6(4),t.hij("\xa0 ",t.lcZ(16,13,"order-import.download-template")," "),t.xp6(2),t.Q6J("innerHTML",t.lcZ(18,15,"order-import.note"),t.oJD),t.xp6(6),t.Q6J("ngIf",!n.fileToUpload),t.xp6(1),t.Q6J("ngIf",n.fileToUpload))},dependencies:[y.O5,s.oU,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.Ie,s.Q$,s.wd,s.sr,s.cs,b.X$],encapsulation:2}),o})();function La(o,c){if(1&o&&(t.ynx(0),t._UZ(1,"order-print",2)(2,"div",3),t.BQk()),2&o){const e=c.$implicit,n=t.oxw();t.xp6(1),t.Q6J("printOrderLikeInvoice",n.printOrderLikeInvoice)("shop",n.shop)("order",e)("currency",n.currency)("isMobile",n.isMobile)("totalProductsAmount",e.totalProductsAmount)("totalProductsQuantity",e.totalProductsQuantity)("hideTax",n.hideTax)("orderInvoiceMaxEmptyRows",n.orderInvoiceMaxEmptyRows)("hideDiscountColumn",n.hideDiscountColumn)("showStaffNameUnderSign",n.showStaffNameUnderSign)("hideProductCodePrint",n.hideProductCodePrint)("showStaffPhone",n.showStaffPhone)("orderPrintNote",n.orderPrintNote)}}let Na=(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f,S,U,M){this.navCtrl=e,this.platform=n,this.printer=r,this.translateService=i,this.userService=a,this.storeService=l,this.dataService=u,this.analyticsService=g,this.excelService=_,this.planService=f,this.staffService=S,this.orderService=U,this.alertCtrl=M,this.params=null,this.dateFrom="",this.dateTo="",this.orderStatusFilter=null,this.isMobile=!0,this.checkOrder=0,this.currentPlan=null,this.isOnTrial=!1,this.selectedStaff=null,this.mode="print",this.totalProductsAmount=0,this.totalProductsQuantity=0,this.printOrderLikeInvoice=!1,this.hideTax=!1,this.orderInvoiceMaxEmptyRows=10,this.hideDiscountColumn=!0,this.showStaffNameUnderSign=!1,this.showStaffPhone=!1,this.hideProductCodePrint=!0,this.orderPrintNote=""}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("order-detail-print")})()}ngOnInit(){this.isMobile=this.platform.width()<720,this.platform.resize.subscribe(()=>{this.isMobile=this.platform.width()<720}),this.reload()}reload(){var e=this;return(0,d.Z)(function*(){const n=yield e.navCtrl.loading();e.currency=yield e.userService.getAttr("current-currency");const r=yield e.storeService.getCurrentStore();if(e.shop=r||(yield e.dataService.getFirstObject("shop")),e.isMobile=e.platform.width()<720,e.currentPlan=yield e.planService.getCurrentPlan(),e.printOrderLikeInvoice=yield e.userService.getAttr("print-order-like-invoice"),e.hideTax=yield e.userService.getAttr("hide-tax"),e.orderInvoiceMaxEmptyRows=yield e.userService.getAttr("order-invoice-max-empty-rows"),e.hideDiscountColumn=yield e.userService.getAttr("hide-discount-column"),e.orderPrintNote=yield e.userService.getAttr("order-print-note"),e.showStaffNameUnderSign=yield e.userService.getAttr("show-staff-name-under-sign"),e.hideProductCodePrint=yield e.userService.getAttr("hide-product-code-print"),e.showStaffPhone=yield e.userService.getAttr("show-staff-phone"),e.stores=yield e.storeService.getStores(),e.selectedStaff=e.staffService.selectedStaff,e.params=e.navCtrl.getParams(e.params),e.params&&(e.dateFrom=e.params.dateFrom,e.dateTo=e.params.dateTo,e.selectedStaff=e.params.selectedStaff,e.orderStatusFilter=e.params.orderStatusFilter,e.storeSelected=e.params.storeSelected,e.ordersInput=e.params.ordersInput),e.store=yield e.storeService.getCurrentStore(),e.checkStore=e.store?e.translateService.instant("store.check-store",{shop:e.store.name}):null,e.ordersInput&&e.ordersInput.length){const i=JSON.parse(JSON.stringify(e.ordersInput)),a=[];for(const l of i){l.items=JSON.parse(l.itemsJson),l.store=!e.checkStore&&l.storeId&&e.stores&&e.stores.length?e.stores.find(_=>_.id===l.storeId):null;const u=l.items&&l.items.length?C.sumBy(l.items,_=>_.total):0,g=l.items&&l.items.length?C.sumBy(l.items,_=>_.count):0;l.totalProductsAmount=u,l.totalProductsQuantity=g,a.push(l)}return e.orders=a,e.filter(),yield n.dismiss(),void e.doPrintOrShare()}e.orderService.getOrders(e.selectedStaff?e.selectedStaff.id:null,e.dateFrom,e.dateTo,e.store?e.store.id:e.storeSelected&&!e.storeSelected.isMainShop?e.storeSelected.id:0,e.orderStatusFilter).then(function(){var i=(0,d.Z)(function*(a){const l=[];if(a&&a.length)for(const u of a){u.items=JSON.parse(u.itemsJson),u.store=!e.checkStore&&u.storeId&&e.stores&&e.stores.length?e.stores.find(f=>f.id===u.storeId):null;const g=u.items&&u.items.length?C.sumBy(u.items,f=>f.total):0,_=u.items&&u.items.length?C.sumBy(u.items,f=>f.count):0;u.totalProductsAmount=g,u.totalProductsQuantity=_,l.push(u)}e.orders=l,e.filter(),yield n.dismiss(),e.doPrintOrShare()});return function(a){return i.apply(this,arguments)}}()).catch((0,d.Z)(function*(){yield n.dismiss()}))})()}filter(){let e=JSON.parse(JSON.stringify(this.orders));e=this.sortByModifiedAt(e),this.orders=e}sortByModifiedAt(e){return e?C.orderBy(e,["createdAt"],["desc"]):null}doPrintOrShare(){var e=this;setTimeout((0,d.Z)(function*(){const r=document.getElementById("print-page").innerHTML;if("print"!==e.mode){const i="orders.pdf";return yield e.excelService.downloadPdf(i,r).then(function(){var a=(0,d.Z)(function*(l){e.navCtrl.isNotCordova()||(yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report.file-save-alert")+l,buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{}}]})).present(),e.userService.shareFileUrl(i,i,l))});return function(l){return a.apply(this,arguments)}}()),void e.navCtrl.back()}if(e.navCtrl.isNotCordova())return x.W.webPrint(r,500),void e.navCtrl.back();yield e.printer.print(r,{orientation:"portrait"}).then(()=>{}),e.navCtrl.back()}),1e3)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.G),t.Y36(s.t4),t.Y36(at.F),t.Y36(b.sK),t.Y36(D.K),t.Y36(K.d),t.Y36(xt.D),t.Y36(I.y),t.Y36(V.x),t.Y36(ct.D),t.Y36(j.x),t.Y36(tt.p),t.Y36(s.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["order-multi-print"]],decls:2,vars:1,consts:[["id","print-page"],[4,"ngFor","ngForOf"],[3,"printOrderLikeInvoice","shop","order","currency","isMobile","totalProductsAmount","totalProductsQuantity","hideTax","orderInvoiceMaxEmptyRows","hideDiscountColumn","showStaffNameUnderSign","hideProductCodePrint","showStaffPhone","orderPrintNote"],[2,"break-after","page"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,La,3,14,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.orders))},dependencies:[y.sg,ht],encapsulation:2}),o})();var Ja=h(7395),ka=h(666);const H=function(o,c,e){return[o,c,"symbol","1.0-2",e]};function Ia(o,c){if(1&o&&(t.TgZ(0,"p",22),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(1),t.HOy(" ",n.productName(e.productCode,e.productName)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,4,t.kEZ(10,H,e.price,n.currency,n.translateService.currentLang))," ")}}function Qa(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",22)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Ia,3,14,"p",23),t.BQk()),2&o){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.product.items)}}function Pa(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" - ",t.G7q(2,1,t.kEZ(7,H,e.product.discount,e.currency,e.translateService.currentLang)),"")}}function Ea(o,c){if(1&o&&(t.TgZ(0,"p",28)(1,"ion-text"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.getTypeAttributesString(e.product)," ")}}function Ma(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",28)(2,"ion-text"),t._uU(3),t.qZA()(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.getAttributesString(e.product)," ")}}function Ya(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.kEZ(8,H,e.price,n.currency,n.translateService.currentLang)),"")}}function Fa(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function ja(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",28)(2,"ion-text"),t._uU(3),t.YNc(4,Ya,3,12,"span",4),t._uU(5," | "),t.YNc(6,Fa,2,0,"span",4),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.kEZ(12,H,e.total,n.currency,n.translateService.currentLang))," ")}}function Da(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",28)(2,"ion-text")(3,"strong"),t._uU(4),t.qZA()()(),t.YNc(5,ja,9,16,"ng-container",27),t.BQk()),2&o){const e=c.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(1),t.Q6J("ngForOf",e.values)}}function Ga(o,c){if(1&o&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(3);t.xp6(1),t.xDo(" ",n.productName(e.code,e.title)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,5,t.kEZ(17,H,e.price,n.currency,n.translateService.currentLang))," | +",t.G7q(3,11,t.kEZ(21,H,e.total,n.currency,n.translateService.currentLang))," ")}}function Ha(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",28)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,Ga,4,25,"p",29),t.BQk()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,2,"order-add.added-products")),t.xp6(2),t.Q6J("ngForOf",e.product.options)}}function Ka(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-item",24)(2,"ion-text",25),t.YNc(3,Ea,3,3,"p",26),t.YNc(4,Ma,4,3,"ng-container",4),t.YNc(5,Da,6,2,"ng-container",27),t.YNc(6,Ha,6,4,"ng-container",4),t.qZA()(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.Q6J("ngIf",e.product.typeAttributes&&e.product.typeAttributes.length),t.xp6(1),t.Q6J("ngIf",e.product.attributes&&e.product.attributes.length),t.xp6(1),t.Q6J("ngForOf",e.product.typeOptions),t.xp6(1),t.Q6J("ngIf",e.product.options&&e.product.options.length)}}let Ba=(()=>{class o{constructor(e,n,r,i){this.staffService=e,this.translateService=n,this.analyticsService=r,this.alertCtrl=i,this.onReCalc=new t.vpe,this.onIncrease=new t.vpe,this.onDecrease=new t.vpe,this.onChangeCount=new t.vpe,this.onShowOptions=new t.vpe,this.onShowTypes=new t.vpe,this.onExpand=new t.vpe,this.onAdd=new t.vpe,this.onApplyItemTotal=new t.vpe,this.onRemoveProduct=new t.vpe,this.isShopAdmin=!1,this.product=null,this.isSelected=!1}openProductDiscountPercent(e){var n=this;return(0,d.Z)(function*(){var i;yield(yield n.alertCtrl.create({message:n.translateService.instant("order-add.discount-percent-message"),inputs:[{name:"discountPercent",placeholder:n.translateService.instant("order-add.enter-discount-percent"),type:"number",min:0,max:100,value:e.discountPercent}],buttons:[{text:n.translateService.instant("order-add.remove-percent"),handler:()=>{e.discountPercent=0,e.discount=0,n.onReCalc.emit(e)}},{text:n.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(a){if(!a)return;const l=+a.discountPercent;l<0||l>100?alert(n.translateService.instant("order-add.discount-percent-not-valid")):(n.analyticsService.logEvent("order-add-change-discount-percent"),l&&(e.discountPercent=l,e.discount=e.price*e.count*l/100,n.onReCalc.emit(e)))}),function(l){return i.apply(this,arguments)})},{text:n.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}changeCount(e){this.onChangeCount.emit(e)}toFixQuantity(e){return x.W.toFixQuantity(e)}increase(e){this.onIncrease.emit(e)}decrease(e){this.onDecrease.emit(e)}dateFormat(e){return A.C.toUiString(e)}productName(e,n){return x.W.productName(e,n)}showOptions(e){this.onShowOptions.emit(e)}getOptionPrices(e){return e&&x.W.getOptionPrices(e)}showTypes(e){this.onShowTypes.emit(e)}showOthers(e){e.showOthers=!e.showOthers}getAttributesString(e){return x.W.getAttributesString(e)}getTypeAttributesString(e){return x.W.getTypeAttributesString(e)}getTypeOptions(e){return x.W.getTypeOptions(e)}expand(e){this.onExpand.emit(e)}reCalc(e){this.onReCalc.emit(e)}add(){this.onAdd.emit()}applyItemTotal(){this.onApplyItemTotal.emit()}selectAll(e){x.W.selectAll(e)}hasOptionsOrAttributes(e){return e&&x.W.hasOptionsOrAttributes(e)}removeProduct(e){this.onRemoveProduct.emit(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(j.x),t.Y36(b.sK),t.Y36(I.y),t.Y36(s.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["quote-selector-item"]],inputs:{isShopAdmin:"isShopAdmin",product:"product",currency:"currency",isSelected:"isSelected"},outputs:{onReCalc:"onReCalc",onIncrease:"onIncrease",onDecrease:"onDecrease",onChangeCount:"onChangeCount",onShowOptions:"onShowOptions",onShowTypes:"onShowTypes",onExpand:"onExpand",onAdd:"onAdd",onApplyItemTotal:"onApplyItemTotal",onRemoveProduct:"onRemoveProduct"},decls:55,vars:70,consts:[["text-wrap","","lines","none","color","light",2,"--min-height","0"],["fill","clear","color","primary",3,"click"],["size","xs",3,"icon"],[2,"padding","0","margin","0",3,"click"],[4,"ngIf"],["slot","end",2,"padding","0","margin","0"],["fill","clear","size","large",2,"padding","0","margin","0",3,"click"],["slot","icon-only","size","large","name","remove"],["fill","clear","size","large",3,"click"],["slot","icon-only","size","large","name","add"],["fill","clear","size","small","color","medium",3,"click"],["slot","icon-only","size","small","name","options"],["slot","icon-only","size","small","name","cog"],["text-wrap","","color","light",2,"--min-height","0",3,"lines"],["slot","end",2,"--padding-bottom","0","--padding-top","0","height","20px","--padding-start","0","--padding-end","0"],["color","danger","fill","clear","size","small",2,"--padding-bottom","0","--padding-top","0","height","20px","--padding-start","0","--padding-end","0",3,"click"],["slot","icon-only","size","small","name","close"],["color","light",2,"padding-left","15px","padding-right","15px","margin","0",3,"hidden"],["position","stacked","color","primary"],[3,"clear","placeholder","moneyValue","moneyValueChange"],["clearInput","","type","number",3,"placeholder","ngModel","ngModelChange","focus"],[1,"ion-text-nowrap",2,"margin-left","3px","margin-top","3px","font-size","0.7em","background-color","#3880ff","color","white","padding","3px","border-radius","5px","font-weight","bold",3,"click"],[2,"padding","0","margin","0","font-size","0.68em"],["style","padding: 0; margin: 0; font-size: 0.68em;",4,"ngFor","ngForOf"],["lines","inset","color","light",2,"--min-height","0"],[1,"ion-text-wrap",2,"font-size","0.8em"],["style","padding: 0; margin: 0",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"padding","0","margin","0"],["style","padding: 0; margin: 0",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-item",0)(1,"ion-buttons")(2,"ion-button",1),t.NdJ("click",function(){return n.expand(n.product)}),t._UZ(3,"fa-icon",2),t.qZA()(),t.TgZ(4,"ion-text",3),t.NdJ("click",function(){return n.expand(n.product)}),t._uU(5),t.YNc(6,Qa,6,4,"ng-container",4),t.qZA(),t.TgZ(7,"ion-buttons",5)(8,"ion-button",6),t.NdJ("click",function(){return n.decrease(n.product)}),t._UZ(9,"ion-icon",7),t.qZA(),t.TgZ(10,"ion-button",8),t.NdJ("click",function(){return n.increase(n.product)}),t._UZ(11,"ion-icon",9),t.qZA(),t.TgZ(12,"ion-button",10),t.NdJ("click",function(){return n.showTypes(n.product)}),t._UZ(13,"ion-icon",11),t.qZA(),t.TgZ(14,"ion-button",10),t.NdJ("click",function(){return n.showOptions(n.product)}),t._UZ(15,"ion-icon",12),t.qZA()()(),t.TgZ(16,"ion-item",13)(17,"ion-text",3),t.NdJ("click",function(){return n.expand(n.product)}),t._uU(18),t.ALo(19,"currency"),t.YNc(20,Pa,3,11,"span",4),t._uU(21),t.ALo(22,"currency"),t.qZA(),t.TgZ(23,"ion-buttons",14)(24,"ion-button",15),t.NdJ("click",function(){return n.removeProduct(n.product)}),t._UZ(25,"ion-icon",16),t.qZA()()(),t.YNc(26,Ka,7,6,"ng-container",4),t.TgZ(27,"ion-grid",17)(28,"ion-row")(29,"ion-col")(30,"ion-label",18),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"money-input",19),t.NdJ("moneyValueChange",function(i){return n.product.price=i})("moneyValueChange",function(){return n.reCalc(n.product)}),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"ion-col")(36,"ion-label",18),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"ion-input",20),t.NdJ("ngModelChange",function(i){return n.product.count=i})("ngModelChange",function(){return n.changeCount(n.product)})("focus",function(i){return n.selectAll(i)}),t.ALo(40,"translate"),t.qZA()(),t.TgZ(41,"ion-col")(42,"ion-label",18),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"money-input",19),t.NdJ("moneyValueChange",function(i){return n.product.discount=i})("moneyValueChange",function(){return n.reCalc(n.product)}),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"ion-text",21),t.NdJ("click",function(){return n.openProductDiscountPercent(n.product)}),t._uU(48),t.qZA()(),t.TgZ(49,"ion-col")(50,"ion-label",18),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"money-input",19),t.NdJ("moneyValueChange",function(i){return n.product.total=i})("moneyValueChange",function(){return n.applyItemTotal()}),t.ALo(54,"translate"),t.qZA()()()()),2&e&&(t.xp6(3),t.s9C("icon",n.product.isExpand?"compress-arrows-alt":"edit"),t.xp6(1),t.Udp("font-weight",n.product.isExpand?"bold":"normal"),t.xp6(1),t.AsE(" ",n.product.productCode?n.product.productCode.toUpperCase()+"-":"","",n.product.productName," "),t.xp6(1),t.Q6J("ngIf",n.product.items&&n.product.items.length),t.xp6(10),t.Q6J("lines",n.hasOptionsOrAttributes(n.product)?"none":"inset"),t.xp6(1),t.Udp("font-weight",n.product.isExpand?"bold":"normal"),t.xp6(1),t.lnq(" ",n.product.count," ",n.product.unit," \xd7 ",t.G7q(19,34,t.kEZ(62,H,n.product.price+n.getOptionPrices(n.product),n.currency,n.translateService.currentLang)),""),t.xp6(2),t.Q6J("ngIf",n.product.discount),t.xp6(1),t.hij(" | ",t.G7q(22,40,t.kEZ(66,H,n.product.total,n.currency,n.translateService.currentLang))," "),t.xp6(5),t.Q6J("ngIf",n.hasOptionsOrAttributes(n.product)),t.xp6(1),t.Q6J("hidden",!n.product.isExpand),t.xp6(4),t.hij(" ",t.lcZ(32,46,"order-add.product-price")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(34,48,"order-add.enter-product-price")),t.Q6J("clear",!0)("moneyValue",n.product.price),t.xp6(4),t.hij(" ",t.lcZ(38,50,"order-add.product-count")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(40,52,"order-add.enter-product-count")),t.Q6J("ngModel",n.product.count),t.xp6(4),t.hij(" ",t.lcZ(44,54,"order-add.product-discount"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(46,56,"order-add.enter-product-discount")),t.Q6J("clear",!0)("moneyValue",n.product.discount),t.xp6(2),t.Udp("background-color",n.product.discountPercent?"#3880ff":"#ccc"),t.xp6(1),t.hij(" ",n.product.discountPercent?n.product.discountPercent.toFixed(0)+"%":"%"," "),t.xp6(3),t.hij(" ",t.lcZ(52,58,"order-add.product-total")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(54,60,"order-add.enter-product-total")),t.Q6J("clear",!0)("moneyValue",n.product.total))},dependencies:[y.sg,y.O5,w.JJ,w.On,s.YG,s.Sm,s.wI,s.jY,s.gu,s.pK,s.Ie,s.Q$,s.Nd,s.yW,s.as,W.BN,mt.F,y.H9,b.X$],encapsulation:2}),o})();function $a(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",23)(1,"ion-label",24),t._uU(2),t.qZA(),t.TgZ(3,"ion-buttons")(4,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exitStore())}),t._UZ(5,"ion-icon",26),t._uU(6),t.ALo(7,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.checkStore),t.xp6(4),t.hij(" ",t.lcZ(7,2,"store.exit-store")," ")}}function za(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-searchbar",27),t.NdJ("ionClear",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.clearSearch())})("ionChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.search())})("ngModelChange",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.searchKey=r)}),t.ALo(1,"translate"),t.qZA()}if(2&o){const e=t.oxw();t.s9C("placeholder",t.lcZ(1,2,"quote.search")),t.Q6J("ngModel",e.searchKey)}}function Va(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"quote-selector-item",28),t.NdJ("onReCalc",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.reCalc(r))})("onIncrease",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.increase(r))})("onDecrease",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.decrease(r))})("onChangeCount",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.changeCount(r))})("onShowOptions",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.showOptions(r))})("onShowTypes",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.showTypes(r))})("onExpand",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.expand(r))})("onRemoveProduct",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.removeProduct(r))})("onAdd",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.add(r))})("onApplyItemTotal",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.applyItemTotal())}),t.qZA(),t.BQk()}if(2&o){const e=c.$implicit,n=t.oxw();t.xp6(1),t.Q6J("product",e)("currency",n.currency)("isShopAdmin",null===n.selectedStaff||n.selectedStaff.hasFullAccess&&!n.selectedStaff.storeId)}}function Wa(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",29)(1,"ion-label",30),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"ion-buttons",31)(6,"ion-button",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.previousPage())}),t._UZ(7,"ion-icon",33),t.qZA(),t.TgZ(8,"ion-button",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nextPage())}),t._UZ(9,"ion-icon",34),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"common.page")," ",e.currentPage+1," ")}}function Ra(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"quote-list-item",36),t.NdJ("onClick",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.selectQuote(i))}),t.qZA()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.Q6J("quote",e)("currency",n.currency)("showContact",!0)("selectMode",n.selectMode)("color",e.isSelected?"tertiary":"light")}}function Xa(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Ra,1,5,"quote-list-item",35),t.ALo(2,"slice"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,1,e.quotes,e.start,e.end+1))}}const B=function(o,c,e){return[o,c,"symbol","1.0-2",e]};function ts(o,c){if(1&o&&(t.TgZ(0,"p",42)(1,"ion-text",43),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"currency"),t.ALo(5,"translate"),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.HOy("",t.lcZ(3,4,"quote-add.pay-by-point"),": ",t.G7q(4,6,t.kEZ(14,B,e.amountFromPoint,n.currency,n.translateService.currentLang))," / ",e.pointAmount," ",t.lcZ(5,12,"point-add.point")," ")}}function es(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.contact.fullName,"")}}function ns(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.contactName)}}function os(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.contactPhone)}}function rs(o,c){if(1&o&&(t.TgZ(0,"p",46),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.hij(" ",n.limitText(e.note)," ")}}function is(o,c){if(1&o&&(t.TgZ(0,"p",47),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(1),t.HOy(" ",n.productName(e.productCode,e.productName)," | ",e.count," ",e.unit," \xd7 ",t.G7q(2,4,t.kEZ(10,B,e.price,n.currency,n.translateService.currentLang))," ")}}function cs(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",47)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.YNc(5,is,3,14,"p",48),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,"quote-add.combo-products")),t.xp6(2),t.Q6J("ngForOf",e.items)}}function as(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(6);t.xp6(1),t.AsE(" | ",e.count," \xd7 ",t.G7q(2,2,t.kEZ(8,B,e.price,n.currency,n.translateService.currentLang)),"")}}function ss(o,c){1&o&&(t.TgZ(0,"span"),t._uU(1,"+"),t.qZA())}function ls(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",49)(2,"ion-text",44),t._uU(3),t.YNc(4,as,3,12,"span",19),t._uU(5," | "),t.YNc(6,ss,2,0,"span",19),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(6);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.Q6J("ngIf",!e.selectOnly),t.xp6(2),t.Q6J("ngIf",e.isAddedToPrice),t.xp6(1),t.hij("",t.G7q(8,6,t.kEZ(12,B,e.total,n.currency,n.translateService.currentLang))," ")}}function ds(o,c){if(1&o&&(t.ynx(0),t.YNc(1,ls,9,16,"ng-container",13),t.BQk()),2&o){const e=c.$implicit;t.xp6(1),t.Q6J("ngForOf",e.values)}}function _s(o,c){if(1&o&&(t.ynx(0),t.YNc(1,ds,2,1,"ng-container",13),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.typeOptions)}}function ps(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",49)(2,"ion-text",44),t._uU(3),t.ALo(4,"currency"),t.qZA()(),t.BQk()),2&o){const e=c.$implicit,n=t.oxw(5);t.xp6(2),t.Udp("font-weight","normal"),t.xp6(1),t.xDo(" ",e.code?e.code.toUpperCase()+"-":"","",e.title," | ",e.count," ",e.unit," | ",t.G7q(4,7,t.kEZ(13,B,e.total,n.currency,n.translateService.currentLang))," ")}}function us(o,c){1&o&&(t.ynx(0),t.TgZ(1,"p",49)(2,"ion-text",44),t._uU(3," ... "),t.qZA()(),t.BQk()),2&o&&(t.xp6(2),t.Udp("font-weight","normal"))}function gs(o,c){if(1&o&&(t.ynx(0),t.YNc(1,ps,5,17,"ng-container",13),t.ALo(2,"slice"),t.YNc(3,us,4,2,"ng-container",19),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,2,e.options,0,2)),t.xp6(2),t.Q6J("ngIf",e.options.length>=3)}}function ms(o,c){if(1&o&&(t.TgZ(0,"span")(1,"ion-text",44),t._uU(2),t.ALo(3,"currency"),t.YNc(4,rs,2,1,"p",45),t.YNc(5,cs,6,4,"ng-container",19),t.YNc(6,_s,2,1,"ng-container",19),t.YNc(7,gs,4,6,"ng-container",19),t.qZA(),t._UZ(8,"br"),t.qZA()),2&o){const e=c.$implicit,n=c.index,r=t.oxw(3);t.xp6(2),t.gL8(" ",n+1,".",e.productCode?e.productCode.toUpperCase()+"-":"","",e.productName," | ",e.count," ",e.unit," | ",t.G7q(3,10,t.kEZ(16,B,e.total,r.currency,r.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.note),t.xp6(1),t.Q6J("ngIf",e.items&&e.items.length),t.xp6(1),t.Q6J("ngIf",e.typeOptions&&e.typeOptions.length),t.xp6(1),t.Q6J("ngIf",e.options&&e.options.length)}}function fs(o,c){1&o&&(t.TgZ(0,"span")(1,"ion-text",44),t._uU(2,"..."),t.qZA()())}function xs(o,c){if(1&o&&(t.TgZ(0,"span",44),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.limitText(e.note)," ")}}function hs(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" - ",e.store.name,"")}}function Zs(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.YNc(2,hs,2,1,"span",19),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.staff.name,""),t.xp6(1),t.Q6J("ngIf",e.store)}}function As(o,c){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.store.name)}}function Ts(o,c){if(1&o&&(t.TgZ(0,"p"),t.YNc(1,As,2,1,"span",19),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.store)}}function Cs(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row",39),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.selectQuote(i))}),t.TgZ(1,"ion-col"),t._uU(2),t.qZA(),t.TgZ(3,"ion-col"),t._uU(4),t.ALo(5,"currency"),t.YNc(6,ts,6,18,"p",40),t.qZA(),t.TgZ(7,"ion-col"),t.YNc(8,es,2,1,"p",19),t.YNc(9,ns,2,1,"p",19),t.YNc(10,os,2,1,"p",19),t.qZA(),t.TgZ(11,"ion-col"),t.YNc(12,ms,9,20,"span",13),t.ALo(13,"slice"),t.YNc(14,fs,3,0,"span",19),t.qZA(),t.TgZ(15,"ion-col",24),t.YNc(16,xs,2,1,"span",41),t.qZA(),t.TgZ(17,"ion-col",24),t.YNc(18,Zs,3,2,"p",19),t.YNc(19,Ts,2,1,"p",19),t.qZA(),t.TgZ(20,"ion-col",24),t._uU(21),t.qZA()()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.Udp("cursor","pointer"),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",t.G7q(5,14,t.kEZ(24,B,e.total,n.currency,n.translateService.currentLang))," "),t.xp6(2),t.Q6J("ngIf",e.amountFromPoint&&e.pointAmount),t.xp6(2),t.Q6J("ngIf",e.contactId&&0!==e.contactId&&e.contact),t.xp6(1),t.Q6J("ngIf",!e.contactId&&e.contactName),t.xp6(1),t.Q6J("ngIf",!e.contactId&&e.contactPhone),t.xp6(2),t.Q6J("ngForOf",t.Dn7(13,20,e.items,0,2)),t.xp6(2),t.Q6J("ngIf",e.items.length>=3),t.xp6(2),t.Q6J("ngIf",e.note),t.xp6(2),t.Q6J("ngIf",e.staffId&&0!==e.staffId&&e.staff&&!n.staffService.isStaff()),t.xp6(1),t.Q6J("ngIf",!(e.staffId&&0!==e.staffId&&e.staff&&!n.staffService.isStaff())&&e.store),t.xp6(2),t.hij(" ",n.dateFormat(e.createdAt)," ")}}function ys(o,c){if(1&o&&(t.TgZ(0,"ion-grid",37)(1,"ion-row",14)(2,"ion-col")(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-col")(7,"strong"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col")(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"ion-col")(15,"strong"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"ion-col")(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"ion-col")(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"ion-col")(27,"strong"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,Cs,22,28,"ion-row",38),t.ALo(31,"slice"),t.qZA()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,8,"quote-add.name")),t.xp6(4),t.Oqu(t.lcZ(9,10,"quote-add.total")),t.xp6(4),t.Oqu(t.lcZ(13,12,"quote-add.contact-info")),t.xp6(4),t.Oqu(t.lcZ(17,14,"quote-add.product")),t.xp6(4),t.Oqu(t.lcZ(21,16,"quote-add.note")),t.xp6(4),t.Oqu(t.lcZ(25,18,"trade.staff")),t.xp6(4),t.Oqu(t.lcZ(29,20,"quote.created-at")),t.xp6(2),t.Q6J("ngForOf",t.Dn7(31,22,e.quotes,e.start,e.end+1))}}function vs(o,c){1&o&&(t.TgZ(0,"ion-item",50),t._UZ(1,"div",51),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,"quote.no-quote"),t.oJD))}function Ss(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",52)(1,"ion-label",53),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-buttons",54)(5,"ion-button",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.previousPage())}),t._UZ(6,"ion-icon",33),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nextPage())}),t._UZ(8,"ion-icon",34),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"common.page")," ",e.currentPage+1," ")}}const qs=[{path:"",component:fr},{path:"detail",component:fi},{path:"detail-print",component:Ca},{path:"multi-print",component:Na},{path:"select-filter",component:_t.S},{path:"print-alert",component:Sa},{path:"add",component:Ue},{path:"export",component:Rn},{path:"import",component:Ua},{path:"product-selector",component:ya.c},{path:"quote-selector",component:(()=>{class o{constructor(e,n,r,i,a,l,u,g,_,f,S,U,M){var Z=this;this.platform=e,this.quoteService=n,this.translateService=r,this.userService=i,this.productService=a,this.barcodeScanner=l,this.modalCtrl=u,this.alertCtrl=g,this.storeService=_,this.navCtrl=f,this.analyticsService=S,this.planService=U,this.staffService=M,this.params=null,this.searchKey="",this.noteFilter="frequency",this.total=0,this.selectedProducts=[],this.isMobile=!0,this.checkQuote=0,this.currentPlan=null,this.isOnTrial=!1,this.selectedStaff=null,this.start=0,this.pageSize=40,this.end=39,this.currentPage=0,this.selectMode=!1,this.isSelectAll=!1,this.tab="all",this.reload=(0,d.Z)(function*(){const J=yield Z.navCtrl.loading();Z.isMobile=Z.platform.width()<720,Z.currency=yield Z.userService.getAttr("current-currency"),Z.currentPlan=yield Z.planService.getCurrentPlan(),Z.stores=yield Z.storeService.getStores(),Z.selectedStaff=Z.staffService.selectedStaff,Z.currentPlan||(Z.isOnTrial=yield Z.planService.isOnTrial(Z.currentPlan)),Z.params=Z.navCtrl.getParams(Z.params),Z.params&&Z.params.callback&&(Z.callback=Z.params.callback),Z.params&&Z.params.selectedStaff&&(Z.selectedStaff=Z.params.selectedStaff),Z.params||(Z.params={selectedStaff:null}),Z.store=yield Z.storeService.getCurrentStore(),Z.checkStore=Z.store?Z.translateService.instant("store.check-store",{shop:Z.store.name}):null,Z.quoteService.getQuotes(Z.selectedStaff?Z.selectedStaff.id:null).then(function(){var P=(0,d.Z)(function*(E){const Y=[];if(E&&E.length)for(const p of E)p.items=JSON.parse(p.itemsJson),p.store=!Z.checkStore&&p.storeId&&Z.stores&&Z.stores.length?Z.stores.find(v=>v.id===p.storeId):null,Y.push(p);Z.originalQuotes=JSON.parse(JSON.stringify(Y)),Z.quotes=Y,Z.total=C.sumBy(Z.quotes,p=>p.total),Z.filter(),yield J.dismiss()});return function(E){return P.apply(this,arguments)}}()).catch((0,d.Z)(function*(){yield J.dismiss()}))}),this.doEnteredBarcode=J=>{!J||this.productService.searchByBarcode(J).then(P=>{if(P)return this.analyticsService.logEvent("quote-scan-barcode-ok"),void this.navCtrl.push("/quote/add",{product:P.id})})},this.navCtrl.removeEventListener("reloadQuoteList",this.reload),this.navCtrl.addEventListener("reloadQuoteList",this.reload)}ngOnInit(){this.platform.resize.subscribe(()=>{this.isMobile=this.platform.width()<720}),this.reload()}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("quote")})()}openQuoteAdd(){if(!this.currentPlan&&!this.isOnTrial)return this.analyticsService.logEvent("check-quote-alert"),void alert(this.translateService.instant("quote.check-quote-alert",{total:this.checkQuote}));this.navCtrl.navigateForward("/quote/add",null)}search(){var e=this;return(0,d.Z)(function*(){e.analyticsService.logEvent("quote-search");let n=JSON.parse(JSON.stringify(e.originalQuotes));if(null!==e.searchKey&&""!==e.searchKey){e.start=0,e.end=e.pageSize-1,e.currentPage=0;const r=e.searchKey.toLowerCase();n=n.filter(i=>i.contact&&i.contact.fullName&&-1!==i.contact.fullName.toLowerCase().indexOf(r)||i.contact&&i.contact.mobile&&-1!==i.contact.mobile.toLowerCase().indexOf(r)||i.contactName&&-1!==i.contactName.toLowerCase().indexOf(r)||i.staff&&-1!==i.staff.name.toLowerCase().indexOf(r)||i.staff&&-1!==i.staff.userName.toLowerCase().indexOf(r)||i.store&&i.store.name&&-1!==i.store.name.toLowerCase().indexOf(r)||i.contactPhone&&-1!==i.contactPhone.toLowerCase().indexOf(r)||i.note&&-1!==i.note.toLowerCase().indexOf(r)||i.name&&-1!==i.name.toLowerCase().indexOf(r)||i.hasShipInfo&&i.billOfLadingCode&&-1!==i.billOfLadingCode.toLowerCase().indexOf(r)||i.hasShipInfo&&i.shippingPartner&&-1!==i.shippingPartner.toLowerCase().indexOf(r)||i.hasShipInfo&&i.shipperName&&-1!==i.shipperName.toLowerCase().indexOf(r)||i.hasShipInfo&&i.shipperPhone&&-1!==i.shipperPhone.toLowerCase().indexOf(r)||i.hasShipInfo&&i.deliveryAddress&&-1!==i.deliveryAddress.toLowerCase().indexOf(r)||i.items&&i.items.length&&i.items.filter(a=>a.productCode&&-1!==a.productCode.toLowerCase().indexOf(r)||a.productName&&-1!==a.productName.toLowerCase().indexOf(r)||a.note&&-1!==a.note.toLowerCase().indexOf(r)).length>0)}e.quotes=n,e.total=C.sumBy(e.quotes,r=>r.total)})()}clearSearch(){this.start=0,this.end=this.pageSize-1,this.currentPage=0,this.searchKey=null,this.reload()}filter(){let e=JSON.parse(JSON.stringify(this.originalQuotes));e=this.sortByModifiedAt(e),this.quotes=e}sortByModifiedAt(e){return e?C.orderBy(e,["createdAt"],["desc"]):null}dateOnlyFormat(e){return A.C.toUiDateString(e)}selectQuote(e){if(e.isSelected=!e.isSelected,e.isSelected)for(const n of e.items)this.selectedProducts.push(n);else for(const n of e.items)this.selectedProducts=this.selectedProducts.filter(r=>r.productId!=n.productId)}dateFormat(e){let n=e;return e.indexOf(":00Z")<0&&(n=L(e).format(A.C.getDateTimeDbFormat())),A.C.toUiLocalDateTimeString(n)}isNotCordova(){return this.navCtrl.isNotCordova()}scan(){var e=this;return(0,d.Z)(function*(){if(e.analyticsService.logEvent("quote-scan-barcode"),e.isNotCordova()){const n=yield e.modalCtrl.create({component:z.k});yield n.present();const{data:r}=yield n.onDidDismiss();r&&r.barcode&&e.doEnteredBarcode(r.barcode)}else e.barcodeScanner.scan().then(n=>{!n||!n.text||e.doEnteredBarcode(n.text)})})()}goHelpPage(e){this.navCtrl.push("/help/"+e)}requestProPlan(){this.navCtrl.push("/request-pro")}limitText(e,n=200){return x.W.limitText(e,n)}exitStore(){var e=this;return(0,d.Z)(function*(){var r;yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("store.exit-store-alert",{shop:e.store.name}),buttons:[{text:e.translateService.instant("common.agree"),handler:(r=(0,d.Z)(function*(){yield e.storeService.exitStore(),yield e.reload()}),function(){return r.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}productName(e,n){return x.W.productName(e,n)}get isShowPaging(){return!!(this.quotes&&this.quotes.length>this.pageSize)}previousPage(){this.currentPage<=0?this.currentPage=0:(this.currentPage--,this.start=this.currentPage*this.pageSize,this.end=this.start+this.pageSize-1,this.content.scrollToTop())}nextPage(){(this.currentPage+1)*this.pageSize>=this.quotes.length||(this.currentPage++,this.start=this.currentPage*this.pageSize,this.end=this.start+this.pageSize-1,this.content.scrollToTop())}showSelect(){this.selectMode=!0,this.isSelectAll=!1}exitSelectMode(){this.selectMode=!1,this.isSelectAll=!1;for(const e of this.quotes)e.isSelected=!1}multiDelete(){var e=this;return(0,d.Z)(function*(){const n=e.quotes?e.quotes.filter(i=>i.isSelected).length:0;var i;0!==n?yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("quote-detail.multi-delete-alert",{count:n}),buttons:[{text:e.translateService.instant("common.agree"),handler:(i=(0,d.Z)(function*(){const a=yield e.navCtrl.loading(),l=[],u=[];for(const g of e.quotes)g.isSelected&&(l.push(g),u.push(e.quoteService.delete(g)));yield Promise.all(u);for(const g of l){e.analyticsService.logEvent("quote-delete-success");let _=e.quotes.findIndex(f=>f.id===g.id);_>=0&&e.quotes.splice(_,1),_=e.originalQuotes.findIndex(f=>f.id===g.id),_>=0&&e.originalQuotes.splice(_,1)}e.selectMode=!1,yield a.dismiss()}),function(){return i.apply(this,arguments)})},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present():alert(e.translateService.instant("quote-detail.multi-delete-no-quote-alert"))})()}selectAll(){for(const e of this.quotes)e.isSelected=!1;for(let e=this.start;e<this.end;e++)this.quotes[e].isSelected=this.isSelectAll}dismiss(){var e=this;return(0,d.Z)(function*(){if(e.callback)return e.callback(null),void(yield e.navCtrl.back());e.modalCtrl.dismiss()})()}ok(){var e=this;return(0,d.Z)(function*(){if(e.analyticsService.logEvent("quote-selector-ok"),e.callback)return e.callback(e.selectedProducts),void(yield e.navCtrl.back());e.modalCtrl.dismiss(e.selectedProducts)})()}showOptions(e){var n=this;return(0,d.Z)(function*(){n.analyticsService.logEvent("quote-selector-show-options"),yield n.navCtrl.push("/order/option-selector",{callback:i=>{i&&(e.options=i.options,e.attributes=i.attributes,e.count<=0&&(e.count=1,n.selectedProducts.find(l=>e.id===l.id)||n.selectedProducts.push(e)),n.reCalc(e))},mainProduct:JSON.parse(JSON.stringify(e))})})()}showTypes(e){var n=this;return(0,d.Z)(function*(){n.analyticsService.logEvent("quote-selector-show-types");const i=JSON.parse(JSON.stringify(e));i.price=e.initPrice?e.initPrice:e.price,i.changedPrice=0,yield n.navCtrl.push("/product/type-selector",{callback:a=>{a&&(e.types=a.types,e.typeOptions=n.getTypeOptions(a.types),e.typeAttributes=n.getTypeAttributesString(e),e.initPrice=a.initPrice,e.price=a.price?a.price:e.initPrice,e.count<=0&&(e.count=1,n.selectedProducts.find(u=>e.id===u.id)||n.selectedProducts.push(e)),n.reCalc(e))},mainProduct:i})})()}showOthers(e){e.showOthers=!e.showOthers}getTypeAttributesString(e){return x.W.getTypeAttributesString(e)}getTypeOptions(e){return x.W.getTypeOptions(e)}reCalc(e){const n=e.count*e.price;if(e.total=n,e.options&&e.options.length){let i=0;for(const a of e.options)i+=1*a.total;e.total=(e.price+i)*e.count}e.total=n-(e.discount?e.discount:0)}expand(e){var n=this;return(0,d.Z)(function*(){const r=!e.isExpand;for(const i of n.selectedProducts)i.isExpand=!1;e.isExpand=r,r&&n.analyticsService.logEvent("quote-selector-expand")})()}increase(e){var n=this;return(0,d.Z)(function*(){n.analyticsService.logEvent("quote-selector-increase"),e.count++,e.discountPercent&&(e.discount=e.price*e.count*e.discountPercent/100),n.reCalc(e)})()}decrease(e){var n=this;return(0,d.Z)(function*(){e&&0===e.count||(n.analyticsService.logEvent("quote-selector-decrease"),e.count--,e.discountPercent&&(e.discount=e.price*e.count*e.discountPercent/100),n.reCalc(e))})()}changeCount(e){e.discountPercent&&(e.discount=e.price*e.count*e.discountPercent/100),this.reCalc(e)}removeProduct(e){var n=this;return(0,d.Z)(function*(){const r=n.selectedProducts.findIndex(i=>i.productId===e.productId&&i.unit===e.unit);r>=0&&n.selectedProducts.splice(r,1),n.analyticsService.logEvent("quote-selector-remove-item")})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.t4),t.Y36(Ja.P),t.Y36(b.sK),t.Y36(D.K),t.Y36(X.M),t.Y36(R.m),t.Y36(s.IN),t.Y36(s.Br),t.Y36(K.d),t.Y36(k.G),t.Y36(I.y),t.Y36(ct.D),t.Y36(j.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["quote-selector"]],viewQuery:function(e,n){if(1&e&&t.Gf(s.W2,7),2&e){let r;t.iGM(r=t.CRH())&&(n.content=r.first)}},decls:43,vars:33,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end"],["slot","icon-only","name","add-circle"],["name","checkmark"],["lines","none","color","success",4,"ngIf"],["color","primary",3,"ngModel","ngModelChange"],["value","all"],["value","selected"],["color","danger"],["debounce","700",3,"placeholder","ngModel","ionClear","ionChange","ngModelChange",4,"ngIf"],[3,"hidden"],[4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #ccc"],[3,"size"],["lines","none",1,"ion-text-wrap","ion-no-padding"],["color","primary"],["size","4","class","ion-text-right",4,"ngIf"],[4,"ngIf"],["class","ion-padding",4,"ngIf"],["text-wrap","","lines","none","style","padding-top: 10px;",4,"ngIf"],["class","ion-no-padding","lines","none",4,"ngIf"],["lines","none","color","success"],[1,"ion-text-wrap"],["size","small",3,"click"],["name","exit","slot","start","size","small"],["debounce","700",3,"placeholder","ngModel","ionClear","ionChange","ngModelChange"],[3,"product","currency","isShopAdmin","onReCalc","onIncrease","onDecrease","onChangeCount","onShowOptions","onShowTypes","onExpand","onRemoveProduct","onAdd","onApplyItemTotal"],["size","4",1,"ion-text-right"],[1,"ion-text-wrap","ion-text-right"],[1,"ion-float-right"],["fill","solid","size","small",3,"click"],["slot","icon-only","name","arrow-back-circle"],["slot","icon-only","name","arrow-forward-circle"],[3,"quote","currency","showContact","selectMode","color","onClick",4,"ngFor","ngForOf"],[3,"quote","currency","showContact","selectMode","color","onClick"],[1,"ion-padding"],["style","border-bottom: 1px solid #ccc;",3,"cursor","click",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #ccc",3,"click"],["style","padding: 0; margin: 0; font-size: 0.8em;",4,"ngIf"],["style","font-size: 0.8em;",4,"ngIf"],[2,"padding","0","margin","0","font-size","0.8em"],["color","secondary"],[2,"font-size","0.8em"],["style","font-size: 0.8em; margin: 3px 0 0 0;",4,"ngIf"],[2,"font-size","0.8em","margin","3px 0 0 0"],[2,"padding","0","margin","0","font-size","0.68em"],["style","padding: 0; margin: 0; font-size: 0.68em;",4,"ngFor","ngForOf"],[2,"padding","0","margin","0"],["text-wrap","","lines","none",2,"padding-top","10px"],[3,"innerHTML"],["lines","none",1,"ion-no-padding"],["slot","end",1,"ion-text-right"],["slot","end",1,"ion-float-right"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return n.dismiss()}),t._UZ(4,"ion-icon",2),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-buttons",3)(9,"ion-button",1),t.NdJ("click",function(){return n.openQuoteAdd()}),t._UZ(10,"ion-icon",4),t.qZA(),t.TgZ(11,"ion-button",1),t.NdJ("click",function(){return n.ok()}),t._UZ(12,"ion-icon",5),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.YNc(15,$a,8,4,"ion-item",6),t.TgZ(16,"ion-segment",7),t.NdJ("ngModelChange",function(i){return n.tab=i}),t.TgZ(17,"ion-segment-button",8),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ion-segment-button",9)(21,"ion-text"),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"ion-text",10),t._uU(25),t.qZA()()()(),t.YNc(26,za,2,4,"ion-searchbar",11),t.qZA(),t.TgZ(27,"ion-content")(28,"ion-list",12),t.YNc(29,Va,2,3,"ng-container",13),t.qZA(),t.TgZ(30,"ion-list",12)(31,"ion-grid")(32,"ion-row",14)(33,"ion-col",15)(34,"ion-item",16)(35,"ion-label",17),t._uU(36),t.ALo(37,"translate"),t.qZA()()(),t.YNc(38,Wa,10,4,"ion-col",18),t.qZA()(),t.YNc(39,Xa,3,5,"ng-container",19),t.YNc(40,ys,32,26,"ion-grid",20),t.YNc(41,vs,3,3,"ion-item",21),t.YNc(42,Ss,9,4,"ion-item",22),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(t.lcZ(7,23,"quote.title-select")),t.xp6(7),t.hij("\xa0",t.lcZ(14,25,"action.save")," "),t.xp6(2),t.Q6J("ngIf",n.checkStore&&(null===n.selectedStaff||n.selectedStaff.hasFullAccess&&!n.selectedStaff.storeId)),t.xp6(1),t.Q6J("ngModel",n.tab),t.xp6(2),t.hij(" ",t.lcZ(19,27,"product-selector.filter-all")," "),t.xp6(3),t.Udp("font-weight",n.selectedProducts&&n.selectedProducts.length?"bold":"normal"),t.xp6(1),t.hij(" ",t.lcZ(23,29,"product-selector.filter-selected")," "),t.xp6(3),t.hij(" (",n.selectedProducts?n.selectedProducts.length:0,")"),t.xp6(1),t.Q6J("ngIf","all"===n.tab),t.xp6(1),t.Akn(n.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(1),t.Q6J("hidden","all"===n.tab),t.xp6(1),t.Q6J("ngForOf",n.selectedProducts),t.xp6(1),t.Q6J("hidden","selected"===n.tab),t.xp6(3),t.Q6J("size",n.isShowPaging&&n.quotes&&n.quotes.length?8:12),t.xp6(3),t.AsE(" ",n.quotes&&n.quotes.length?n.quotes.length:0," ",t.lcZ(37,31,"quote.quote(s)")," "),t.xp6(2),t.Q6J("ngIf",n.isShowPaging&&n.quotes&&n.quotes.length),t.xp6(1),t.Q6J("ngIf",n.isMobile),t.xp6(1),t.Q6J("ngIf",!n.isMobile&&n.quotes&&n.quotes.length),t.xp6(1),t.Q6J("ngIf",!n.originalQuotes||0===n.originalQuotes.length),t.xp6(1),t.Q6J("ngIf",n.isShowPaging&&n.quotes&&n.quotes.length))},dependencies:[y.sg,y.O5,w.JJ,w.On,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.Nd,s.VI,s.cJ,s.GO,s.yW,s.wd,s.sr,s.QI,s.j9,ka.p,Ba,y.OU,y.H9,b.X$],encapsulation:2}),o})()},{path:"option-selector",component:va.p}];let Os=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[dt.Bz.forChild(qs),dt.Bz]}),o})();var Zt=h(3093);let ws=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[y.ez,w.u5,s.Pc,Os,Zt.m,W.uH,b.aw.forChild({loader:{provide:b.Zw,useFactory:Zt.x,deps:[At.eN]}})]}),o})()}}]);