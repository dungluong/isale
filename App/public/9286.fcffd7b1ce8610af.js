"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9286],{4283:(L,A,l)=>{l.r(A),l.d(A,{DebtReportModule:()=>Xt});var _=l(6895),m=l(4006),p=l(191),u=l(3306),D=l(529),x=l(3196),d=l(5861),c=l(1914),Z=l(6723),t=l(6738),f=l(4518),b=l(5851),C=l(323);function U(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-customer")))}function w(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-category")))}function O(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-product")))}function M(n,i){if(1&n&&(t.TgZ(0,"p",10)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"common.filter"),": ",e.getFilter(e.youBorrowedReport)," ")}}function I(n,i){if(1&n&&(t.TgZ(0,"span"),t._UZ(1,"br"),t.YNc(2,U,3,3,"span",9),t.YNc(3,w,3,3,"span",9),t.YNc(4,O,3,3,"span",9),t.TgZ(5,"p",10)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,M,4,4,"p",11),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0===e.youBorrowedReport.reportType),t.xp6(1),t.Q6J("ngIf",1===e.youBorrowedReport.reportType),t.xp6(1),t.Q6J("ngIf",2===e.youBorrowedReport.reportType),t.xp6(3),t.hij(" ",e.getDateType(e.youBorrowedReport)," "),t.xp6(1),t.Q6J("ngIf",e.getFilter(e.youBorrowedReport))}}function N(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-customer")))}function Q(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-category")))}function Y(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-product")))}function S(n,i){if(1&n&&(t.TgZ(0,"p",10)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"common.filter"),": ",e.getFilter(e.borrowedYouReport)," ")}}function F(n,i){if(1&n&&(t.TgZ(0,"span"),t._UZ(1,"br"),t.YNc(2,N,3,3,"span",9),t.YNc(3,Q,3,3,"span",9),t.YNc(4,Y,3,3,"span",9),t.TgZ(5,"p",10)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,S,4,4,"p",11),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0===e.borrowedYouReport.reportType),t.xp6(1),t.Q6J("ngIf",1===e.borrowedYouReport.reportType),t.xp6(1),t.Q6J("ngIf",2===e.borrowedYouReport.reportType),t.xp6(3),t.hij(" ",e.getDateType(e.borrowedYouReport)," "),t.xp6(1),t.Q6J("ngIf",e.getFilter(e.borrowedYouReport))}}function k(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-customer")))}function E(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-category")))}function G(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-product")))}function j(n,i){if(1&n&&(t.TgZ(0,"p",10)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"common.filter"),": ",e.getFilter(e.youOwnedReport)," ")}}function K(n,i){if(1&n&&(t.TgZ(0,"span"),t._UZ(1,"br"),t.YNc(2,k,3,3,"span",9),t.YNc(3,E,3,3,"span",9),t.YNc(4,G,3,3,"span",9),t.TgZ(5,"p",10)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,j,4,4,"p",11),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0===e.youOwnedReport.reportType),t.xp6(1),t.Q6J("ngIf",1===e.youOwnedReport.reportType),t.xp6(1),t.Q6J("ngIf",2===e.youOwnedReport.reportType),t.xp6(3),t.hij(" ",e.getDateType(e.youOwnedReport)," "),t.xp6(1),t.Q6J("ngIf",e.getFilter(e.youOwnedReport))}}function H(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-customer")))}function P(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-category")))}function B(n,i){1&n&&(t.TgZ(0,"span",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-product")))}function $(n,i){if(1&n&&(t.TgZ(0,"p",10)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"common.filter"),": ",e.getFilter(e.ownedYouReport)," ")}}function W(n,i){if(1&n&&(t.TgZ(0,"span"),t._UZ(1,"br"),t.YNc(2,H,3,3,"span",9),t.YNc(3,P,3,3,"span",9),t.YNc(4,B,3,3,"span",9),t.TgZ(5,"p",10)(6,"span"),t._uU(7),t.qZA()(),t.YNc(8,$,4,4,"p",11),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0===e.ownedYouReport.reportType),t.xp6(1),t.Q6J("ngIf",1===e.ownedYouReport.reportType),t.xp6(1),t.Q6J("ngIf",2===e.ownedYouReport.reportType),t.xp6(3),t.hij(" ",e.getDateType(e.ownedYouReport)," "),t.xp6(1),t.Q6J("ngIf",e.getFilter(e.ownedYouReport))}}let V=(()=>{class n{constructor(e,o,r,a){var s=this;this.reportService=e,this.translateService=o,this.navCtrl=r,this.analyticsService=a,this.searchKey="",this.reload=(0,d.Z)(function*(){s.youBorrowedReport=yield s.reportService.getCustomReport(1,"debt-report-0"),s.borrowedYouReport=yield s.reportService.getCustomReport(1,"debt-report-1"),s.youOwnedReport=yield s.reportService.getCustomReport(1,"debt-report-2"),s.ownedYouReport=yield s.reportService.getCustomReport(1,"debt-report-3")}),this.navCtrl.unsubscribe("reloadDebtReportList",this.reload),this.navCtrl.subscribe("reloadDebtReportList",this.reload)}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("debt-report")})()}ngOnInit(){this.reload()}openReportAdd(){this.navCtrl.push("/debt-report/add")}dateFormat(e){return c.C.toUiString(e)}limitText(e,o=200){return Z.W.limitText(e,o)}selectYouBorrowedReport(){this.youBorrowedReport?this.navCtrl.push("/debt-report/detail",{id:this.youBorrowedReport.id,debtType:0}):this.navCtrl.push("/debt-report/add",{debtType:0})}selectBorrowedYouReport(){this.borrowedYouReport?this.navCtrl.push("/debt-report/detail",{id:this.borrowedYouReport.id,debtType:1}):this.navCtrl.push("/debt-report/add",{debtType:1})}selectYouOwnedReport(){this.youOwnedReport?this.navCtrl.push("/debt-report/detail",{id:this.youOwnedReport.id,debtType:2}):this.navCtrl.push("/debt-report/add",{debtType:2})}selectOwnedYouReport(){this.ownedYouReport?this.navCtrl.push("/debt-report/detail",{id:this.ownedYouReport.id,debtType:3}):this.navCtrl.push("/debt-report/add",{debtType:3})}getDateType(e){return 0==e.dateType?this.translateService.instant("report-category.by-week"):1==e.dateType?this.translateService.instant("report-category.by-month"):2==e.dateType?this.translateService.instant("report-category.by-year"):3==e.dateType?this.translateService.instant("report-category.by-day"):4==e.dateType?this.translateService.instant("report-category.custom"):5==e.dateType?this.translateService.instant("report-category.by-quarter"):""}getFilter(e){let o="";return 0==e.reportType&&(1==e.genderType?o=this.translateService.instant("contact-add.gender-male"):2==e.genderType&&(o=this.translateService.instant("contact-add.gender-female")),1==e.ageType?(""!=o&&(o+="; "),o+=this.translateService.instant("report-output.year-from-to",{ageFrom:e.ageFrom,ageTo:e.ageTo})):2==e.ageType&&(""!=o&&(o+="; "),o+=this.translateService.instant("report-output.age-from-to",{ageFrom:e.ageFrom,ageTo:e.ageTo}))),(0!=e.customListType||0!=e.ignore)&&(""!=o&&(o+="; "),0==e.reportType?o+=this.translateService.instant("report-output.contact-limited"):1==e.reportType?o+=this.translateService.instant("report-output.category-limited"):2==e.reportType&&(o+=this.translateService.instant("report-output.product-limited"))),o}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.r),t.Y36(u.sK),t.Y36(b.G),t.Y36(C.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["debt-report"]],decls:35,vars:21,consts:[["slot","start"],["menu","first"],["color","primary",3,"click"],["name","home"],[3,"click"],[1,"ion-text-wrap"],[2,"white-space","pre-wrap"],[4,"ngIf"],["text-wrap","",3,"click"],["style","white-space: pre-wrap;",4,"ngIf"],[2,"padding-top","5px"],["style","padding-top: 5px;",4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-menu-button",1),t.TgZ(4,"ion-button",2),t.NdJ("click",function(){return o.navCtrl.home()}),t._UZ(5,"ion-icon",3),t.qZA()(),t.TgZ(6,"ion-title"),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"ion-content")(10,"ion-list")(11,"ion-item",4),t.NdJ("click",function(){return o.selectYouBorrowedReport()}),t.TgZ(12,"ion-label",5)(13,"span",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.YNc(16,I,9,5,"span",7),t.qZA()(),t.TgZ(17,"ion-item",4),t.NdJ("click",function(){return o.selectBorrowedYouReport()}),t.TgZ(18,"ion-label",5)(19,"span",6),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,F,9,5,"span",7),t.qZA()(),t.TgZ(23,"ion-item",4),t.NdJ("click",function(){return o.selectYouOwnedReport()}),t.TgZ(24,"ion-label",5)(25,"span",6),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.YNc(28,K,9,5,"span",7),t.qZA()(),t.TgZ(29,"ion-item",8),t.NdJ("click",function(){return o.selectOwnedYouReport()}),t.TgZ(30,"ion-label",5)(31,"span",6),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.YNc(34,W,9,5,"span",7),t.qZA()()()()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,11,"debt-report.title")),t.xp6(2),t.Akn(o.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(5),t.Oqu(t.lcZ(15,13,"debt-add.you-borrowed")),t.xp6(2),t.Q6J("ngIf",o.youBorrowedReport),t.xp6(4),t.Oqu(t.lcZ(21,15,"debt-add.borrowed-you")),t.xp6(2),t.Q6J("ngIf",o.borrowedYouReport),t.xp6(4),t.Oqu(t.lcZ(27,17,"debt-add.you-owned")),t.xp6(2),t.Q6J("ngIf",o.youOwnedReport),t.xp6(4),t.Oqu(t.lcZ(33,19,"debt-add.owned-you")),t.xp6(2),t.Q6J("ngIf",o.ownedYouReport))},dependencies:[_.O5,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.Ie,p.Q$,p.q_,p.fG,p.wd,p.sr,u.X$],encapsulation:2}),n})();class v{constructor(){this.id=0,this.name="",this.reportType=0,this.debtType=0,this.dateType=0,this.dateFrom="",this.dateTo="",this.customListType=0,this.customList="",this.ignore=0,this.ignoredList="",this.genderType=0,this.ageType=0,this.ageFrom=0,this.ageTo=0,this.createdAt="",this.modifiedAt=""}}var X=l(8007);function z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"date-item",20),t.NdJ("dateChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.dateFrom=r)}),t.ALo(1,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("date",e.report.dateFrom)("label",t.lcZ(1,2,"report-category-add.start-date"))}}function tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"date-item",21),t.NdJ("dateChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.dateTo=r)}),t.ALo(1,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("date",e.report.dateTo)("label",t.lcZ(1,2,"report-category-add.end-date"))}}function et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.customListType=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"report-add.select-contact")),t.xp6(2),t.Q6J("ngModel",e.report.customListType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,8,"report-category-add.all")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,10,"report-category.custom"))}}function ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSearchContact())}),t._UZ(4,"ion-icon",24),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("hidden",0!=e.report.reportType),t.xp6(1),t.hij(" ",t.lcZ(2,3,"report-add.list"),": "),t.xp6(4),t.hij(" ",t.lcZ(6,5,"report-add.add")," ")}}function nt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.removeSelectedContact(a))}),t._UZ(4,"ion-icon",25),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.Q6J("hidden",0!=o.report.reportType),t.xp6(2),t.Oqu(e.fullName),t.xp6(3),t.hij(" ",t.lcZ(6,3,"report-add.remove")," ")}}function rt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ignore=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"report-add.ignore-contact")),t.xp6(2),t.Q6J("ngModel",e.report.ignore),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,8,"report-category-add.none")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,10,"report-category.custom"))}}function it(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSearchContact(!1))}),t._UZ(4,"ion-icon",24),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"report-add.list"),": "),t.xp6(4),t.hij(" ",t.lcZ(6,4,"report-add.add")," "))}function at(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.removeIgnoredContact(a))}),t._UZ(4,"ion-icon",25),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.Q6J("hidden",0!=o.report.reportType),t.xp6(2),t.Oqu(e.fullName),t.xp6(3),t.hij(" ",t.lcZ(6,3,"report-add.remove")," ")}}function pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.genderType=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ion-select-option",7),t._uU(12),t.ALo(13,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"report-add.gender")),t.xp6(2),t.Q6J("ngModel",e.report.genderType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,10,"report-category-add.all")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,12,"contact-add.gender-male")),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.Oqu(t.lcZ(13,14,"contact-add.gender-female"))}}function st(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ageType=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ion-select-option",7),t._uU(12),t.ALo(13,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"report-add.age-range")),t.xp6(2),t.Q6J("ngModel",e.report.ageType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,10,"report-category-add.all")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,12,"report-add.by-year")),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.Oqu(t.lcZ(13,14,"report-add.by-age"))}}function lt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-input",26),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ageFrom=r)}),t.ALo(5,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"report-add.from-year")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,5,"report-add.enter-from-year")),t.Q6J("ngModel",e.report.ageFrom)}}function ct(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-input",26),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ageTo=r)}),t.ALo(5,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"report-add.to-year")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,5,"report-add.enter-to-year")),t.Q6J("ngModel",e.report.ageTo)}}function dt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-input",26),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ageFrom=r)}),t.ALo(5,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"report-add.from-age")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,5,"report-add.enter-from-age")),t.Q6J("ngModel",e.report.ageFrom)}}function _t(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-input",26),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ageTo=r)}),t.ALo(5,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"report-add.to-age")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,5,"report-add.enter-to-year")),t.Q6J("ngModel",e.report.ageTo)}}function ut(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.customListType=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"report-category-add.select-category")),t.xp6(2),t.Q6J("ngModel",e.report.customListType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,8,"report-category-add.all")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,10,"report-category.custom"))}}function mt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSearchCategory())}),t._UZ(4,"ion-icon",24),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"report-category-add.list-category"),": "),t.xp6(4),t.hij(" ",t.lcZ(6,4,"report-category-add.add")," "))}function gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.removeSelectedCategory(a))}),t._UZ(4,"ion-icon",25),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.Q6J("hidden",1!==o.report.reportType),t.xp6(2),t.Oqu(e.title),t.xp6(3),t.hij(" ",t.lcZ(6,3,"report-category-add.remove")," ")}}function ht(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ignore=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"report-category-add.ignored-categories")),t.xp6(2),t.Q6J("ngModel",e.report.ignore),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,8,"report-category-add.none")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,10,"report-category.custom"))}}function ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSearchCategory(!1))}),t._UZ(4,"ion-icon",24),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"report-category-add.list-category"),": "),t.xp6(4),t.hij(" ",t.lcZ(6,4,"report-category-add.add")," "))}function Zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.removeIgnoredCategory(a))}),t._UZ(4,"ion-icon",25),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.Q6J("hidden",1!==o.report.reportType),t.xp6(2),t.Oqu(e.title),t.xp6(3),t.hij(" ",t.lcZ(6,3,"report-category-add.remove")," ")}}function Tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.customListType=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"report-product-add.select-product")),t.xp6(2),t.Q6J("ngModel",e.report.customListType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,8,"report-category-add.all")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,10,"report-category.custom"))}}function xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSearchProduct())}),t._UZ(4,"ion-icon",24),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"report-add.list"),": "),t.xp6(4),t.hij(" ",t.lcZ(6,4,"report-add.add")," "))}function bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.removeSelectedProduct(a))}),t._UZ(4,"ion-icon",25),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.Q6J("hidden",2!==o.report.reportType),t.xp6(2),t.AsE("",e.code,"-",e.title,""),t.xp6(3),t.hij(" ",t.lcZ(6,4,"report-add.remove")," ")}}function Ct(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",6),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.report.ignore=r)}),t.TgZ(5,"ion-select-option",7),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"report-product-add.ignore-product")),t.xp6(2),t.Q6J("ngModel",e.report.ignore),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(7,8,"report-category-add.none")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(10,10,"report-category.custom"))}}function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showSearchProduct(!1))}),t._UZ(4,"ion-icon",24),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"report-add.list"),": "),t.xp6(4),t.hij(" ",t.lcZ(6,4,"report-add.add")," "))}function At(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",22)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.removeIgnoredProduct(a))}),t._UZ(4,"ion-icon",25),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.Q6J("hidden",2!==o.report.reportType),t.xp6(2),t.AsE("",e.code,"-",e.title,""),t.xp6(3),t.hij(" ",t.lcZ(6,4,"report-add.remove")," ")}}let Dt=(()=>{class n{constructor(e,o,r,a){this.navCtrl=e,this.modalCtrl=o,this.reportService=r,this.analyticsService=a,this.params=null,this.report=new v,this.selecteds=[],this.ignoreds=[]}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("debt-report-add")})()}ngOnInit(){let e=0,o=0;this.params=this.params?this.params:this.navCtrl.getParams(),this.params&&this.params.id?e=this.params.id:this.params&&this.params.debtType&&(o=this.params.debtType),e&&e>0?this.reportService.getCustomReport(e,"debt-report-"+this.params.debtType).then(r=>{this.report=r,r.customList&&""!==r.customList&&(this.selecteds=JSON.parse(r.customList)),r.ignoredList&&""!==r.ignoredList&&(this.ignoreds=JSON.parse(r.ignoredList))}):o&&o>0&&(this.report.debtType=o)}save(){var e=this;this.reportService.saveCustomReport(this.report,"debt-report-"+this.params.debtType).then(function(){var o=(0,d.Z)(function*(r){e.analyticsService.logEvent("debt-report-add-save-success"),e.report.id=r,e.exitPage()});return function(r){return o.apply(this,arguments)}}())}exitPage(){var e=this;return(0,d.Z)(function*(){yield e.navCtrl.popOnly(),(!e.params||!e.params.id)&&(yield e.navCtrl.push("/debt-report/detail",{id:e.report.id,debtType:e.params.debtType})),e.navCtrl.publish("reloadDebtReportList"),e.navCtrl.publish("reloadDebtReport",e.report)})()}changeReportType(){this.selecteds=[],this.report.customList=JSON.stringify(this.selecteds),this.ignoreds=[],this.report.ignoredList=JSON.stringify(this.ignoreds),this.report.customListType=0,this.report.ignore=0}showSearchContact(e=!0){var o=this;return(0,d.Z)(function*(){o.navCtrl.push("/contact",{callback:a=>{const s=a;if(s)if(e){if(o.selecteds.findIndex(h=>h.id===s.id)>=0)return;o.selecteds.push(s),o.report.customList=JSON.stringify(o.selecteds)}else{if(o.ignoreds.findIndex(h=>h.id===s.id)>=0)return;o.ignoreds.push(s),o.report.ignoredList=JSON.stringify(o.ignoreds)}},searchMode:!0})})()}removeIgnoredContact(e){const o=this.ignoreds.findIndex(r=>r.id===e.id);o>=0&&(this.ignoreds.splice(o,1),this.report.ignoredList=JSON.stringify(this.ignoreds))}removeSelectedContact(e){const o=this.selecteds.findIndex(r=>r.id===e.id);o>=0&&(this.selecteds.splice(o,1),this.report.customList=JSON.stringify(this.selecteds))}showSearchCategory(e=!0){var o=this;return(0,d.Z)(function*(){const r=function(){var a=(0,d.Z)(function*(s){const g=s;if(g)if(e){if(o.selecteds.findIndex(T=>T.id===g.id)>=0)return;o.selecteds.push(g),o.report.customList=JSON.stringify(o.selecteds)}else{if(o.ignoreds.findIndex(T=>T.id===g.id)>=0)return;o.ignoreds.push(g),o.report.ignoredList=JSON.stringify(o.ignoreds)}});return function(g){return a.apply(this,arguments)}}();o.navCtrl.push("/trade-category",{callback:r,searchMode:!0})})()}removeIgnoredCategory(e){const o=this.ignoreds.findIndex(r=>r.id===e.id);o>=0&&(this.ignoreds.splice(o,1),this.report.ignoredList=JSON.stringify(this.ignoreds))}removeSelectedCategory(e){const o=this.selecteds.findIndex(r=>r.id===e.id);o>=0&&(this.selecteds.splice(o,1),this.report.customList=JSON.stringify(this.selecteds))}showSearchProduct(e=!0){var o=this;return(0,d.Z)(function*(){o.navCtrl.push("/product",{callback:a=>{const s=a;if(s)if(e){if(o.selecteds.findIndex(h=>h.id===s.id)>=0)return;o.selecteds.push(s),o.report.customList=JSON.stringify(o.selecteds)}else{if(o.ignoreds.findIndex(h=>h.id===s.id)>=0)return;o.ignoreds.push(s),o.report.ignoredList=JSON.stringify(o.ignoreds)}},searchMode:!0})})()}removeIgnoredProduct(e){const o=this.ignoreds.findIndex(r=>r.id===e.id);o>=0&&(this.ignoreds.splice(o,1),this.report.ignoredList=JSON.stringify(this.ignoreds))}removeSelectedProduct(e){const o=this.selecteds.findIndex(r=>r.id===e.id);o>=0&&(this.selecteds.splice(o,1),this.report.customList=JSON.stringify(this.selecteds))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.G),t.Y36(p.IN),t.Y36(f.r),t.Y36(C.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["debt-report-add"]],decls:100,vars:102,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["ion-button","","color","primary",3,"click"],["name","checkmark"],["color","primary"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"disabled","ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],["position","stacked","color","primary"],["clearInput","","type","text",3,"placeholder","ngModel","ngModelChange"],["pickerId","reportDateFromPicker3",3,"date","label","dateChange",4,"ngIf"],["pickerId","reportDateEndPicker3",3,"date","label","dateChange",4,"ngIf"],[4,"ngIf"],[3,"hidden",4,"ngIf"],[3,"hidden",4,"ngFor","ngForOf"],["pickerId","reportDateFromPicker3",3,"date","label","dateChange"],["pickerId","reportDateEndPicker3",3,"date","label","dateChange"],[3,"hidden"],["fill","outline","slot","end",3,"click"],["name","add"],["name","remove"],["clearInput","","type","number",3,"placeholder","ngModel","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",2)(8,"ion-button",3),t.NdJ("click",function(){return o.save()}),t._UZ(9,"ion-icon",4),t._uU(10),t.ALo(11,"translate"),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"ion-list")(14,"ion-item")(15,"ion-label",5),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"ion-select",6),t.NdJ("ngModelChange",function(a){return o.report.reportType=a})("ngModelChange",function(){return o.changeReportType()}),t.TgZ(19,"ion-select-option",7),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"ion-select-option",7),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"ion-select-option",7),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"ion-item")(29,"ion-label",5),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ion-select",8),t.NdJ("ngModelChange",function(a){return o.report.debtType=a}),t.TgZ(33,"ion-select-option",9),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"ion-select-option",10),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"ion-select-option",11),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"ion-select-option",12),t._uU(43),t.ALo(44,"translate"),t.qZA()()(),t.TgZ(45,"ion-item")(46,"ion-label",13),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"ion-input",14),t.NdJ("ngModelChange",function(a){return o.report.name=a}),t.ALo(50,"translate"),t.qZA()(),t.TgZ(51,"ion-item")(52,"ion-label",5),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"ion-select",6),t.NdJ("ngModelChange",function(a){return o.report.dateType=a}),t.TgZ(56,"ion-select-option",7),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"ion-select-option",7),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"ion-select-option",7),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"ion-select-option",7),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"ion-select-option",7),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"ion-select-option",7),t._uU(72),t.ALo(73,"translate"),t.qZA()()(),t.YNc(74,z,2,4,"date-item",15),t.YNc(75,tt,2,4,"date-item",16),t.YNc(76,et,11,12,"ion-item",17),t.YNc(77,ot,7,7,"ion-item",18),t.YNc(78,nt,7,5,"ion-item",19),t.YNc(79,rt,11,12,"ion-item",17),t.YNc(80,it,7,6,"ion-item",17),t.YNc(81,at,7,5,"ion-item",19),t.YNc(82,pt,14,16,"ion-item",17),t.YNc(83,st,14,16,"ion-item",17),t.YNc(84,lt,6,7,"ion-item",17),t.YNc(85,ct,6,7,"ion-item",17),t.YNc(86,dt,6,7,"ion-item",17),t.YNc(87,_t,6,7,"ion-item",17),t.YNc(88,ut,11,12,"ion-item",17),t.YNc(89,mt,7,6,"ion-item",17),t.YNc(90,gt,7,5,"ion-item",19),t.YNc(91,ht,11,12,"ion-item",17),t.YNc(92,ft,7,6,"ion-item",17),t.YNc(93,Zt,7,5,"ion-item",19),t.YNc(94,Tt,11,12,"ion-item",17),t.YNc(95,xt,7,6,"ion-item",17),t.YNc(96,bt,7,6,"ion-item",19),t.YNc(97,Ct,11,12,"ion-item",17),t.YNc(98,yt,7,6,"ion-item",17),t.YNc(99,At,7,6,"ion-item",19),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,62,"debt-report-add.title")),t.xp6(5),t.hij(" \xa0",t.lcZ(11,64,"action.save")," "),t.xp6(2),t.Akn(o.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(4),t.Oqu(t.lcZ(17,66,"debt-report-add.report-type")),t.xp6(2),t.Q6J("ngModel",o.report.reportType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(21,68,"debt-report-add.type-for-customer")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(24,70,"debt-report-add.type-for-category")),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.Oqu(t.lcZ(27,72,"debt-report-add.type-for-product")),t.xp6(4),t.Oqu(t.lcZ(31,74,"debt-report-add.debt-type")),t.xp6(2),t.Q6J("disabled",!0)("ngModel",o.report.debtType),t.xp6(2),t.Oqu(t.lcZ(35,76,"debt-add.you-borrowed")),t.xp6(3),t.Oqu(t.lcZ(38,78,"debt-add.borrowed-you")),t.xp6(3),t.Oqu(t.lcZ(41,80,"debt-add.you-owned")),t.xp6(3),t.Oqu(t.lcZ(44,82,"debt-add.owned-you")),t.xp6(4),t.Oqu(t.lcZ(48,84,"report-category-add.report-name")),t.xp6(2),t.s9C("placeholder",t.lcZ(50,86,"report-category-add.enter-report-name")),t.Q6J("ngModel",o.report.name),t.xp6(4),t.Oqu(t.lcZ(54,88,"report-category-add.date-range")),t.xp6(2),t.Q6J("ngModel",o.report.dateType),t.xp6(1),t.Q6J("value",0),t.xp6(1),t.Oqu(t.lcZ(58,90,"report-category.by-week")),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Oqu(t.lcZ(61,92,"report-category.by-month")),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.Oqu(t.lcZ(64,94,"report-category.by-year")),t.xp6(2),t.Q6J("value",3),t.xp6(1),t.Oqu(t.lcZ(67,96,"report-category.by-day")),t.xp6(2),t.Q6J("value",5),t.xp6(1),t.Oqu(t.lcZ(70,98,"report-category.by-quarter")),t.xp6(2),t.Q6J("value",4),t.xp6(1),t.Oqu(t.lcZ(73,100,"report-category.custom")),t.xp6(2),t.Q6J("ngIf",4===o.report.dateType),t.xp6(1),t.Q6J("ngIf",4===o.report.dateType),t.xp6(1),t.Q6J("ngIf",0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.customListType),t.xp6(1),t.Q6J("ngForOf",o.selecteds),t.xp6(1),t.Q6J("ngIf",0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.ignore&&0==o.report.reportType),t.xp6(1),t.Q6J("ngForOf",o.ignoreds),t.xp6(1),t.Q6J("ngIf",0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.ageType&&0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.ageType&&0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",2===o.report.ageType&&0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",2===o.report.ageType&&0==o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.customListType&&1===o.report.reportType),t.xp6(1),t.Q6J("ngForOf",o.selecteds),t.xp6(1),t.Q6J("ngIf",1===o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.ignore&&1===o.report.reportType),t.xp6(1),t.Q6J("ngForOf",o.ignoreds),t.xp6(1),t.Q6J("ngIf",2===o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.customListType&&2===o.report.reportType),t.xp6(1),t.Q6J("ngForOf",o.selecteds),t.xp6(1),t.Q6J("ngIf",2===o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.ignore&&2===o.report.reportType),t.xp6(1),t.Q6J("ngForOf",o.ignoreds))},dependencies:[_.sg,_.O5,m.JJ,m.On,p.oU,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.pK,p.Ie,p.Q$,p.q_,p.t9,p.n0,p.wd,p.sr,p.as,p.QI,p.j9,p.cs,X.p,u.X$],encapsulation:2}),n})();var Rt=l(3989),y=l(5439),vt=l(7488),R=l(4155);const qt=["chart"];function Jt(n,i){1&n&&t._UZ(0,"br")}function Lt(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-customer")))}function Ut(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-category")))}function wt(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-report-add.type-for-product")))}function Ot(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.you-borrowed")))}function Mt(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.borrowed-you")))}function It(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.you-owned")))}function Nt(n,i){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debt-add.owned-you")))}function Qt(n,i){if(1&n&&(t.TgZ(0,"p",11)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.AsE(" ",t.lcZ(3,2,"common.filter"),": ",e.filter," ")}}function Yt(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"chart.contact(s)"),"."))}function St(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"chart.category(s)"),"."))}function Ft(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"chart.product(s)"),"."))}function kt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-select",24),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.barChartType=r)}),t.TgZ(5,"ion-select-option",25),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ion-select-option",26),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ion-select-option",27),t._uU(12),t.ALo(13,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"common.chart")),t.xp6(2),t.Q6J("ngModel",e.barChartType),t.xp6(2),t.Oqu(t.lcZ(7,7,"common.bar")),t.xp6(3),t.Oqu(t.lcZ(10,9,"common.pie")),t.xp6(3),t.Oqu(t.lcZ(13,11,"common.line"))}}function Et(n,i){if(1&n&&t._UZ(0,"canvas",28,29),2&n){const e=t.oxw();t.Q6J("hidden",e.isCapturing)("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("legend",e.barChartLegend)("type",e.barChartType)}}function Gt(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item.fullName)}}function jt(n,i){if(1&n&&(t.TgZ(0,"ion-avatar",32),t._UZ(1,"img",33),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("src",o.contactImageOrPlaceholder(e.item),t.LSH)}}function Kt(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.item.code,"-",e.item.title,"")}}function Ht(n,i){if(1&n&&(t.TgZ(0,"ion-avatar",32),t._UZ(1,"img",33),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.item.avatarUrl,t.LSH)}}function Pt(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.item.title)}}const q=function(n,i,e){return[n,i,"symbol","1.0-2",e]};function Bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.selectReport(a))}),t.TgZ(2,"ion-label",8)(3,"span",13),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.YNc(6,Gt,2,1,"p",9),t.YNc(7,jt,2,1,"ion-avatar",31),t.YNc(8,Kt,2,2,"p",9),t.YNc(9,Ht,2,1,"ion-avatar",31),t.YNc(10,Pt,2,1,"p",9),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(4),t.Oqu(t.G7q(5,6,t.kEZ(12,q,e.value,o.currency,o.translateService.currentLang))),t.xp6(2),t.Q6J("ngIf",0===o.report.reportType),t.xp6(1),t.Q6J("ngIf",0===o.report.reportType),t.xp6(1),t.Q6J("ngIf",2===o.report.reportType&&e.item),t.xp6(1),t.Q6J("ngIf",2===o.report.reportType&&e.item&&e.item.avatarUrl),t.xp6(1),t.Q6J("ngIf",1===o.report.reportType&&e.item)}}const $t=[{path:"",component:V},{path:"add",component:Dt},{path:"detail",component:(()=>{class n{constructor(e,o,r,a,s,g,h){this.navCtrl=e,this.translateService=o,this.userService=r,this.reportService=a,this.actionSheetCtrl=s,this.alertCtrl=g,this.analyticsService=h,this.params=null,this.isCapturing=!1,this.report=new v,this.itemReports=[],this.totalItem=0,this.totalValue=0,this.dateType="",this.dateFrom="",this.dateTo="",this.filter="",this.currentMoment=y(),this.barChartOptions={scaleShowVerticalLines:!1,responsive:!0,bezierCurve:!1,onAnimationComplete:this.done},this.barChartLabels=[""],this.barChartType="bar",this.barChartLegend=!0,this.barChartData=[{data:[0]}],this.isInChartMode=!1,this.isLoadingChart=!1;const T=zt=>{this.report&&zt.detail.id===this.report.id&&this.reload()};this.navCtrl.unsubscribe("reloadDebtReport",T),this.navCtrl.subscribe("reloadDebtReport",T)}done(){}ionViewWillEnter(){var e=this;return(0,d.Z)(function*(){yield e.analyticsService.setCurrentScreen("debt-report-detail")})()}ngOnInit(){this.reload()}reload(){this.userService.getAttr("current-currency").then(e=>{this.currency=e}),this.params=this.params?this.params:this.navCtrl.getParams(),this.params&&this.params.id&&this.params.id>0?this.reportService.getCustomReport(this.params.id,"debt-report-"+this.params.debtType).then(o=>{this.report=o,this.doCalculate()}):this.params&&this.params.templateReport&&(this.report=this.params.templateReport,this.doCalculate())}doCalculate(){this.isLoadingChart=!0,0==this.report.reportType||2==this.report.reportType?this.reportService.calculateDebtReport(this.report,this.currentMoment).then(e=>{this.itemReports=e.reports,this.totalItem=e.totalItem,this.totalValue=e.totalValue,this.dateType=e.dateType,this.dateFrom=e.dateFrom,this.dateTo=e.dateTo,this.filter=e.filter,this.showChart(),this.isInChartMode=!0,this.isLoadingChart=!1}):this.reportService.calculateDebtCategoryReport(this.report,this.currentMoment).then(e=>{this.itemReports=e.reports,this.totalItem=e.totalItem,this.totalValue=e.totalValue,this.dateType=e.dateType,this.dateFrom=e.dateFrom,this.dateTo=e.dateTo,this.filter=e.filter,this.showChart(),this.isInChartMode=!0,this.isLoadingChart=!1})}contactImageOrPlaceholder(e){return Z.W.contactImageOrPlaceholder(e.avatarUrl)}edit(){this.navCtrl.push("/debt-report/add",{id:this.report.id,debtType:this.params.debtType})}presentActionSheet(){var e=this;return(0,d.Z)(function*(){yield(yield e.actionSheetCtrl.create({header:e.translateService.instant("action.action"),buttons:[{text:e.translateService.instant("report-detail.delete-report"),role:"destructive",handler:()=>{e.deleteReport()}},{text:e.translateService.instant("report-detail.share"),role:"destructive",handler:()=>{e.shareReport()}},{text:e.translateService.instant("common.cancel"),role:"cancel",handler:()=>{}}]})).present()})()}deleteReport(){var e=this;return(0,d.Z)(function*(){yield(yield e.alertCtrl.create({header:e.translateService.instant("common.confirm"),message:e.translateService.instant("report-detail.delete-alert"),buttons:[{text:e.translateService.instant("common.agree"),handler:()=>{e.reportService.deleteDebtReport(e.report).then((0,d.Z)(function*(){e.analyticsService.logEvent("debt-report-detail-delete-success"),e.navCtrl.publish("reloadDebtReportList"),e.navCtrl.pop()}))}},{text:e.translateService.instant("common.cancel"),handler:()=>{}}]})).present()})()}showChart(){const e={label:"",data:[]},o=[];for(const r of this.itemReports)0==this.report.reportType?o.push(r.item.fullName):2==this.report.reportType&&o.push(Z.W.productName(r.item.code,r.item.title)),e.data.push(r.value);this.barChartLabels=o,this.barChartData=[e]}enableChart(){this.isInChartMode=!this.isInChartMode}selectReport(e){this.navCtrl.push(0!=this.report.reportType?2!=this.report.reportType?"/trade-category/detail":"/product/detail":"/contact/detail",{id:e.itemId,tab:"debt",dateDebtFrom:c.C.toDbString(this.dateFrom,c.C.getUiDateFormat()),dateDebtTo:c.C.toDbString(this.dateTo,c.C.getUiDateFormat())})}previousMoment(){this.currentMoment=y(this.currentMoment).subtract(1,c.C.dateTypeToDuration(this.report.dateType)),this.doCalculate()}nextMoment(){this.currentMoment=y(this.currentMoment).add(1,c.C.dateTypeToDuration(this.report.dateType)),this.doCalculate()}viewTrend(){const e=new Rt.k;e.dataType=this.report.reportType,e.dateType=this.report.dateType,3!=e.dateType&&4!=e.dateType&&(e.dateFrom=y().startOf("year").format(c.C.getDbFormat())),e.dateTo=y().endOf("day").format(c.C.getDbFormat()),e.dataSources=JSON.stringify([this.report]),this.reportService.calculateDebtChart(e).then(o=>{this.navCtrl.push("/chart/detail",{chart:e,data:o,isDebtChart:!0})})}shareReport(){this.isCapturing=!0,this.chartImg=this.chart.nativeElement.toDataURL(),this.userService.shareScreenshot().then(()=>{this.isCapturing=!1}).catch(()=>{this.isCapturing=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.G),t.Y36(u.sK),t.Y36(vt.K),t.Y36(f.r),t.Y36(p.BX),t.Y36(p.Br),t.Y36(C.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["debt-report-detail"]],viewQuery:function(e,o){if(1&e&&t.Gf(qt,7),2&e){let r;t.iGM(r=t.CRH())&&(o.chart=r.first)}},decls:63,vars:59,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["ion-button","","color","primary",3,"click"],["name","create"],["color","primary",3,"click"],["name","stats-chart"],["name","ellipsis-vertical"],[1,"ion-text-wrap"],[4,"ngIf"],["style","white-space: pre-wrap;",4,"ngIf"],[2,"padding-top","5px"],["style","padding-top: 5px;",4,"ngIf"],["color","danger"],["fill","outline",3,"disabled","click"],["name","chevron-back"],["name","chevron-forward"],["fill","outline",3,"click"],["name","trending-up"],[3,"hidden"],[3,"hidden","src"],["baseChart","",3,"hidden","datasets","labels","options","legend","type",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"white-space","pre-wrap"],[3,"ngModel","ngModelChange"],["value","bar"],["value","pie"],["value","line"],["baseChart","",3,"hidden","datasets","labels","options","legend","type"],["chart",""],[3,"click"],["item-right","",4,"ngIf"],["item-right",""],[3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",2)(8,"ion-button",3),t.NdJ("click",function(){return o.edit()}),t._UZ(9,"ion-icon",4),t.qZA(),t.TgZ(10,"ion-button",5),t.NdJ("click",function(){return o.enableChart()}),t._UZ(11,"ion-icon",6),t.qZA(),t.TgZ(12,"ion-button",5),t.NdJ("click",function(){return o.presentActionSheet()}),t._UZ(13,"ion-icon",7),t.qZA()()()(),t.TgZ(14,"ion-content")(15,"ion-list")(16,"ion-item")(17,"ion-label",8)(18,"b"),t._uU(19),t.qZA(),t.YNc(20,Jt,1,0,"br",9),t.YNc(21,Lt,3,3,"span",10),t.YNc(22,Ut,3,3,"span",10),t.YNc(23,wt,3,3,"span",10),t._UZ(24,"br"),t.YNc(25,Ot,3,3,"span",10),t.YNc(26,Mt,3,3,"span",10),t.YNc(27,It,3,3,"span",10),t.YNc(28,Nt,3,3,"span",10),t.TgZ(29,"ion-text",11)(30,"span"),t._uU(31),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA()(),t._UZ(34,"br"),t.YNc(35,Qt,4,4,"p",12),t.TgZ(36,"p",11)(37,"span",13),t._uU(38),t.ALo(39,"translate"),t.ALo(40,"currency"),t.qZA(),t._uU(41),t.YNc(42,Yt,3,3,"span",9),t.YNc(43,St,3,3,"span",9),t.YNc(44,Ft,3,3,"span",9),t.qZA()()(),t.TgZ(45,"ion-item")(46,"ion-button",14),t.NdJ("click",function(){return o.previousMoment()}),t._UZ(47,"ion-icon",15),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"ion-button",14),t.NdJ("click",function(){return o.nextMoment()}),t._uU(51),t.ALo(52,"translate"),t._UZ(53,"ion-icon",16),t.qZA(),t.TgZ(54,"ion-button",17),t.NdJ("click",function(){return o.viewTrend()}),t._UZ(55,"ion-icon",18),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t.YNc(58,kt,14,13,"ion-item",9),t.TgZ(59,"div",19),t._UZ(60,"img",20),t.YNc(61,Et,2,6,"canvas",21),t.qZA(),t.YNc(62,Bt,11,16,"ion-item-sliding",22),t.qZA()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,35,"report-detail.title")),t.xp6(9),t.Akn(o.navCtrl.hasAds()?"--padding-bottom: 60px":""),t.xp6(5),t.Oqu(o.report.name),t.xp6(1),t.Q6J("ngIf",o.report.name),t.xp6(1),t.Q6J("ngIf",0===o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.reportType),t.xp6(1),t.Q6J("ngIf",2===o.report.reportType),t.xp6(2),t.Q6J("ngIf",0===o.report.debtType),t.xp6(1),t.Q6J("ngIf",1===o.report.debtType),t.xp6(1),t.Q6J("ngIf",2===o.report.debtType),t.xp6(1),t.Q6J("ngIf",3===o.report.debtType),t.xp6(3),t.xDo(" ",o.dateType," (",t.lcZ(32,37,"common.from")," ",o.dateFrom," ",t.lcZ(33,39,"common.to")," ",o.dateTo,") "),t.xp6(4),t.Q6J("ngIf",o.filter),t.xp6(3),t.AsE(" ",t.lcZ(39,41,"common.total"),": ",t.G7q(40,43,t.kEZ(55,q,o.totalValue,o.currency,o.translateService.currentLang))," "),t.xp6(3),t.hij(" / ",o.totalItem," "),t.xp6(1),t.Q6J("ngIf",0===o.report.reportType),t.xp6(1),t.Q6J("ngIf",1===o.report.reportType),t.xp6(1),t.Q6J("ngIf",2===o.report.reportType),t.xp6(2),t.Q6J("disabled",o.isLoadingChart),t.xp6(2),t.hij("\xa0 ",t.lcZ(49,49,"report-detail.pre")," "),t.xp6(2),t.Q6J("disabled",o.isLoadingChart),t.xp6(1),t.hij(" ",t.lcZ(52,51,"report-detail.next"),"\xa0 "),t.xp6(5),t.hij(" ",t.lcZ(57,53,"report-detail.view-trend")," "),t.xp6(2),t.Q6J("ngIf",o.isInChartMode),t.xp6(1),t.Q6J("hidden",!o.isInChartMode),t.xp6(1),t.Q6J("hidden",!o.isCapturing)("src",o.chartImg,t.LSH),t.xp6(1),t.Q6J("ngIf",!o.isLoadingChart),t.xp6(1),t.Q6J("ngForOf",o.itemReports))},dependencies:[_.sg,_.O5,m.JJ,m.On,p.BJ,p.oU,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.Ie,p.td,p.Q$,p.q_,p.t9,p.n0,p.yW,p.wd,p.sr,p.QI,p.cs,R.jh,_.H9,u.X$],encapsulation:2}),n})()}];let Wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[x.Bz.forChild($t),x.Bz]}),n})();var Vt=l(2216),J=l(3093);let Xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:R.$g,useValue:{generateColors:!1}}],imports:[_.ez,m.u5,p.Pc,Wt,R.vQ,J.m,Vt.uH,u.aw.forChild({loader:{provide:u.Zw,useFactory:J.x,deps:[D.eN]}})]}),n})()},8851:(L,A,l)=>{l.d(A,{L:()=>d});var _=l(6738),m=l(5439),u=l(1914),D=l(4006),x=l(191);let d=(()=>{class c{constructor(){this.min=null,this.max=null,this.pickerId=null,this.date="",this.type="date",this.dateChange=new _.vpe}ionViewWillEnter(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?m(this.date.split(":00Z").join("")).format(u.C.getDateTimeDbFormat()):m(this.date.split(":00Z").join("")).format(u.C.getDateDbFormat()):this.date,this.min||(this.min="1900-01-01"),this.max||(this.max="2100-01-01")}ngOnInit(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?m(this.date.split(":00Z").join("")).format(u.C.getDateTimeDbFormat()):m(this.date.split(":00Z").join("")).format(u.C.getDateDbFormat()):this.date,this.min||(this.min="1900-01-01"),this.max||(this.max="2100-01-01")}change(){this.date=this.date&&this.date.length>10?"datetime-local"===this.type?m(this.date.split(":00Z").join("")).format(u.C.getDateTimeDbFormat()):m(this.date.split(":00Z").join("")).format(u.C.getDateDbFormat()):this.date,this.dateChange.emit(this.date)}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=_.Xpm({type:c,selectors:[["date-picker"]],inputs:{min:"min",max:"max",pickerId:"pickerId",date:"date",type:"type"},outputs:{dateChange:"dateChange"},decls:1,vars:4,consts:[["color","primary",1,"ion-button",2,"font-size","0.8em",3,"type","ngModel","min","max","ngModelChange","ionChange"]],template:function(t,f){1&t&&(_.TgZ(0,"ion-input",0),_.NdJ("ngModelChange",function(C){return f.date=C})("ionChange",function(){return f.change()}),_.qZA()),2&t&&_.Q6J("type",f.type)("ngModel",f.date)("min",f.min)("max",f.max)},dependencies:[D.JJ,D.On,x.pK,x.j9],encapsulation:2}),c})()}}]);